{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/parser-v3/utf8.js"],"sourcesContent":["/*! https://mths.be/utf8js v2.1.2 by @mathias */\nvar stringFromCharCode = String.fromCharCode;\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n    var output = [];\n    var counter = 0;\n    var length = string.length;\n    var value;\n    var extra;\n    while (counter < length) {\n        value = string.charCodeAt(counter++);\n        if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n            // high surrogate, and there is a next character\n            extra = string.charCodeAt(counter++);\n            if ((extra & 0xFC00) == 0xDC00) { // low surrogate\n                output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n            }\n            else {\n                // unmatched surrogate; only append this code unit, in case the next\n                // code unit is the high surrogate of a surrogate pair\n                output.push(value);\n                counter--;\n            }\n        }\n        else {\n            output.push(value);\n        }\n    }\n    return output;\n}\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n    var length = array.length;\n    var index = -1;\n    var value;\n    var output = '';\n    while (++index < length) {\n        value = array[index];\n        if (value > 0xFFFF) {\n            value -= 0x10000;\n            output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n            value = 0xDC00 | value & 0x3FF;\n        }\n        output += stringFromCharCode(value);\n    }\n    return output;\n}\nfunction checkScalarValue(codePoint, strict) {\n    if (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n        if (strict) {\n            throw Error('Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n                ' is not a scalar value');\n        }\n        return false;\n    }\n    return true;\n}\n/*--------------------------------------------------------------------------*/\nfunction createByte(codePoint, shift) {\n    return stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\nfunction encodeCodePoint(codePoint, strict) {\n    if ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n        return stringFromCharCode(codePoint);\n    }\n    var symbol = '';\n    if ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n        symbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n    }\n    else if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n        if (!checkScalarValue(codePoint, strict)) {\n            codePoint = 0xFFFD;\n        }\n        symbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n        symbol += createByte(codePoint, 6);\n    }\n    else if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n        symbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n        symbol += createByte(codePoint, 12);\n        symbol += createByte(codePoint, 6);\n    }\n    symbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n    return symbol;\n}\nfunction utf8encode(string, opts) {\n    opts = opts || {};\n    var strict = false !== opts.strict;\n    var codePoints = ucs2decode(string);\n    var length = codePoints.length;\n    var index = -1;\n    var codePoint;\n    var byteString = '';\n    while (++index < length) {\n        codePoint = codePoints[index];\n        byteString += encodeCodePoint(codePoint, strict);\n    }\n    return byteString;\n}\n/*--------------------------------------------------------------------------*/\nfunction readContinuationByte() {\n    if (byteIndex >= byteCount) {\n        throw Error('Invalid byte index');\n    }\n    var continuationByte = byteArray[byteIndex] & 0xFF;\n    byteIndex++;\n    if ((continuationByte & 0xC0) == 0x80) {\n        return continuationByte & 0x3F;\n    }\n    // If we end up here, itâ€™s not a continuation byte\n    throw Error('Invalid continuation byte');\n}\nfunction decodeSymbol(strict) {\n    var byte1;\n    var byte2;\n    var byte3;\n    var byte4;\n    var codePoint;\n    if (byteIndex > byteCount) {\n        throw Error('Invalid byte index');\n    }\n    if (byteIndex == byteCount) {\n        return false;\n    }\n    // Read first byte\n    byte1 = byteArray[byteIndex] & 0xFF;\n    byteIndex++;\n    // 1-byte sequence (no continuation bytes)\n    if ((byte1 & 0x80) == 0) {\n        return byte1;\n    }\n    // 2-byte sequence\n    if ((byte1 & 0xE0) == 0xC0) {\n        byte2 = readContinuationByte();\n        codePoint = ((byte1 & 0x1F) << 6) | byte2;\n        if (codePoint >= 0x80) {\n            return codePoint;\n        }\n        else {\n            throw Error('Invalid continuation byte');\n        }\n    }\n    // 3-byte sequence (may include unpaired surrogates)\n    if ((byte1 & 0xF0) == 0xE0) {\n        byte2 = readContinuationByte();\n        byte3 = readContinuationByte();\n        codePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n        if (codePoint >= 0x0800) {\n            return checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n        }\n        else {\n            throw Error('Invalid continuation byte');\n        }\n    }\n    // 4-byte sequence\n    if ((byte1 & 0xF8) == 0xF0) {\n        byte2 = readContinuationByte();\n        byte3 = readContinuationByte();\n        byte4 = readContinuationByte();\n        codePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n            (byte3 << 0x06) | byte4;\n        if (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n            return codePoint;\n        }\n    }\n    throw Error('Invalid UTF-8 detected');\n}\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n    opts = opts || {};\n    var strict = false !== opts.strict;\n    byteArray = ucs2decode(byteString);\n    byteCount = byteArray.length;\n    byteIndex = 0;\n    var codePoints = [];\n    var tmp;\n    while ((tmp = decodeSymbol(strict)) !== false) {\n        codePoints.push(tmp);\n    }\n    return ucs2encode(codePoints);\n}\nmodule.exports = {\n    version: '2.1.2',\n    encode: utf8encode,\n    decode: utf8decode\n};\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/parser-v3/index.js"],"sourcesContent":["\"use strict\";\n// imported from https://github.com/socketio/engine.io-parser/tree/2.2.x\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.packets = exports.protocol = void 0;\nexports.encodePacket = encodePacket;\nexports.encodeBase64Packet = encodeBase64Packet;\nexports.decodePacket = decodePacket;\nexports.decodeBase64Packet = decodeBase64Packet;\nexports.encodePayload = encodePayload;\nexports.decodePayload = decodePayload;\nexports.encodePayloadAsBinary = encodePayloadAsBinary;\nexports.decodePayloadAsBinary = decodePayloadAsBinary;\n/**\n * Module dependencies.\n */\nvar utf8 = require('./utf8');\n/**\n * Current protocol version.\n */\nexports.protocol = 3;\nconst hasBinary = (packets) => {\n    for (const packet of packets) {\n        if (packet.data instanceof ArrayBuffer || ArrayBuffer.isView(packet.data)) {\n            return true;\n        }\n    }\n    return false;\n};\n/**\n * Packet types.\n */\nexports.packets = {\n    open: 0 // non-ws\n    ,\n    close: 1 // non-ws\n    ,\n    ping: 2,\n    pong: 3,\n    message: 4,\n    upgrade: 5,\n    noop: 6\n};\nvar packetslist = Object.keys(exports.packets);\n/**\n * Premade error packet.\n */\nvar err = { type: 'error', data: 'parser error' };\nconst EMPTY_BUFFER = Buffer.concat([]);\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\nfunction encodePacket(packet, supportsBinary, utf8encode, callback) {\n    if (typeof supportsBinary === 'function') {\n        callback = supportsBinary;\n        supportsBinary = null;\n    }\n    if (typeof utf8encode === 'function') {\n        callback = utf8encode;\n        utf8encode = null;\n    }\n    if (Buffer.isBuffer(packet.data)) {\n        return encodeBuffer(packet, supportsBinary, callback);\n    }\n    else if (packet.data && (packet.data.buffer || packet.data) instanceof ArrayBuffer) {\n        return encodeBuffer({ type: packet.type, data: arrayBufferToBuffer(packet.data) }, supportsBinary, callback);\n    }\n    // Sending data as a utf-8 string\n    var encoded = exports.packets[packet.type];\n    // data fragment is optional\n    if (undefined !== packet.data) {\n        encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n    }\n    return callback('' + encoded);\n}\n;\n/**\n * Encode Buffer data\n */\nfunction encodeBuffer(packet, supportsBinary, callback) {\n    if (!supportsBinary) {\n        return encodeBase64Packet(packet, callback);\n    }\n    var data = packet.data;\n    var typeBuffer = Buffer.allocUnsafe(1);\n    typeBuffer[0] = exports.packets[packet.type];\n    return callback(Buffer.concat([typeBuffer, data]));\n}\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\nfunction encodeBase64Packet(packet, callback) {\n    var data = Buffer.isBuffer(packet.data) ? packet.data : arrayBufferToBuffer(packet.data);\n    var message = 'b' + exports.packets[packet.type];\n    message += data.toString('base64');\n    return callback(message);\n}\n;\n/**\n * Decodes a packet. Data also available as an ArrayBuffer if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\nfunction decodePacket(data, binaryType, utf8decode) {\n    if (data === undefined) {\n        return err;\n    }\n    var type;\n    // String data\n    if (typeof data === 'string') {\n        type = data.charAt(0);\n        if (type === 'b') {\n            return decodeBase64Packet(data.slice(1), binaryType);\n        }\n        if (utf8decode) {\n            data = tryDecode(data);\n            if (data === false) {\n                return err;\n            }\n        }\n        if (Number(type) != type || !packetslist[type]) {\n            return err;\n        }\n        if (data.length > 1) {\n            return { type: packetslist[type], data: data.slice(1) };\n        }\n        else {\n            return { type: packetslist[type] };\n        }\n    }\n    // Binary data\n    if (binaryType === 'arraybuffer') {\n        // wrap Buffer/ArrayBuffer data into an Uint8Array\n        var intArray = new Uint8Array(data);\n        type = intArray[0];\n        return { type: packetslist[type], data: intArray.buffer.slice(1) };\n    }\n    if (data instanceof ArrayBuffer) {\n        data = arrayBufferToBuffer(data);\n    }\n    type = data[0];\n    return { type: packetslist[type], data: data.slice(1) };\n}\n;\nfunction tryDecode(data) {\n    try {\n        data = utf8.decode(data, { strict: false });\n    }\n    catch (e) {\n        return false;\n    }\n    return data;\n}\n/**\n * Decodes a packet encoded in a base64 string.\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\nfunction decodeBase64Packet(msg, binaryType) {\n    var type = packetslist[msg.charAt(0)];\n    var data = Buffer.from(msg.slice(1), 'base64');\n    if (binaryType === 'arraybuffer') {\n        var abv = new Uint8Array(data.length);\n        for (var i = 0; i < abv.length; i++) {\n            abv[i] = data[i];\n        }\n        // @ts-ignore\n        data = abv.buffer;\n    }\n    return { type: type, data: data };\n}\n;\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\nfunction encodePayload(packets, supportsBinary, callback) {\n    if (typeof supportsBinary === 'function') {\n        callback = supportsBinary;\n        supportsBinary = null;\n    }\n    if (supportsBinary && hasBinary(packets)) {\n        return encodePayloadAsBinary(packets, callback);\n    }\n    if (!packets.length) {\n        return callback('0:');\n    }\n    function encodeOne(packet, doneCallback) {\n        encodePacket(packet, supportsBinary, false, function (message) {\n            doneCallback(null, setLengthHeader(message));\n        });\n    }\n    map(packets, encodeOne, function (err, results) {\n        return callback(results.join(''));\n    });\n}\n;\nfunction setLengthHeader(message) {\n    return message.length + ':' + message;\n}\n/**\n * Async array map using after\n */\nfunction map(ary, each, done) {\n    const results = new Array(ary.length);\n    let count = 0;\n    for (let i = 0; i < ary.length; i++) {\n        each(ary[i], (error, msg) => {\n            results[i] = msg;\n            if (++count === ary.length) {\n                done(null, results);\n            }\n        });\n    }\n}\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\nfunction decodePayload(data, binaryType, callback) {\n    if (typeof data !== 'string') {\n        return decodePayloadAsBinary(data, binaryType, callback);\n    }\n    if (typeof binaryType === 'function') {\n        callback = binaryType;\n        binaryType = null;\n    }\n    if (data === '') {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n    }\n    var length = '', n, msg, packet;\n    for (var i = 0, l = data.length; i < l; i++) {\n        var chr = data.charAt(i);\n        if (chr !== ':') {\n            length += chr;\n            continue;\n        }\n        // @ts-ignore\n        if (length === '' || (length != (n = Number(length)))) {\n            // parser error - ignoring payload\n            return callback(err, 0, 1);\n        }\n        msg = data.slice(i + 1, i + 1 + n);\n        if (length != msg.length) {\n            // parser error - ignoring payload\n            return callback(err, 0, 1);\n        }\n        if (msg.length) {\n            packet = decodePacket(msg, binaryType, false);\n            if (err.type === packet.type && err.data === packet.data) {\n                // parser error in individual packet - ignoring payload\n                return callback(err, 0, 1);\n            }\n            var more = callback(packet, i + n, l);\n            if (false === more)\n                return;\n        }\n        // advance cursor\n        i += n;\n        length = '';\n    }\n    if (length !== '') {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n    }\n}\n;\n/**\n *\n * Converts a buffer to a utf8.js encoded string\n *\n * @api private\n */\nfunction bufferToString(buffer) {\n    var str = '';\n    for (var i = 0, l = buffer.length; i < l; i++) {\n        str += String.fromCharCode(buffer[i]);\n    }\n    return str;\n}\n/**\n *\n * Converts a utf8.js encoded string to a buffer\n *\n * @api private\n */\nfunction stringToBuffer(string) {\n    var buf = Buffer.allocUnsafe(string.length);\n    for (var i = 0, l = string.length; i < l; i++) {\n        buf.writeUInt8(string.charCodeAt(i), i);\n    }\n    return buf;\n}\n/**\n *\n * Converts an ArrayBuffer to a Buffer\n *\n * @api private\n */\nfunction arrayBufferToBuffer(data) {\n    // data is either an ArrayBuffer or ArrayBufferView.\n    var length = data.byteLength || data.length;\n    var offset = data.byteOffset || 0;\n    return Buffer.from(data.buffer || data, offset, length);\n}\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {Buffer} encoded payload\n * @api private\n */\nfunction encodePayloadAsBinary(packets, callback) {\n    if (!packets.length) {\n        return callback(EMPTY_BUFFER);\n    }\n    map(packets, encodeOneBinaryPacket, function (err, results) {\n        return callback(Buffer.concat(results));\n    });\n}\n;\nfunction encodeOneBinaryPacket(p, doneCallback) {\n    function onBinaryPacketEncode(packet) {\n        var encodingLength = '' + packet.length;\n        var sizeBuffer;\n        if (typeof packet === 'string') {\n            sizeBuffer = Buffer.allocUnsafe(encodingLength.length + 2);\n            sizeBuffer[0] = 0; // is a string (not true binary = 0)\n            for (var i = 0; i < encodingLength.length; i++) {\n                sizeBuffer[i + 1] = parseInt(encodingLength[i], 10);\n            }\n            sizeBuffer[sizeBuffer.length - 1] = 255;\n            return doneCallback(null, Buffer.concat([sizeBuffer, stringToBuffer(packet)]));\n        }\n        sizeBuffer = Buffer.allocUnsafe(encodingLength.length + 2);\n        sizeBuffer[0] = 1; // is binary (true binary = 1)\n        for (var i = 0; i < encodingLength.length; i++) {\n            sizeBuffer[i + 1] = parseInt(encodingLength[i], 10);\n        }\n        sizeBuffer[sizeBuffer.length - 1] = 255;\n        doneCallback(null, Buffer.concat([sizeBuffer, packet]));\n    }\n    encodePacket(p, true, true, onBinaryPacketEncode);\n}\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n\n * @param {Buffer} data, callback method\n * @api public\n */\nfunction decodePayloadAsBinary(data, binaryType, callback) {\n    if (typeof binaryType === 'function') {\n        callback = binaryType;\n        binaryType = null;\n    }\n    var bufferTail = data;\n    var buffers = [];\n    var i;\n    while (bufferTail.length > 0) {\n        var strLen = '';\n        var isString = bufferTail[0] === 0;\n        for (i = 1;; i++) {\n            if (bufferTail[i] === 255)\n                break;\n            // 310 = char length of Number.MAX_VALUE\n            if (strLen.length > 310) {\n                return callback(err, 0, 1);\n            }\n            strLen += '' + bufferTail[i];\n        }\n        bufferTail = bufferTail.slice(strLen.length + 1);\n        var msgLength = parseInt(strLen, 10);\n        var msg = bufferTail.slice(1, msgLength + 1);\n        if (isString)\n            msg = bufferToString(msg);\n        buffers.push(msg);\n        bufferTail = bufferTail.slice(msgLength + 1);\n    }\n    var total = buffers.length;\n    for (i = 0; i < total; i++) {\n        var buffer = buffers[i];\n        callback(decodePacket(buffer, binaryType, true), i, total);\n    }\n}\n;\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/transport.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transport = void 0;\nconst events_1 = require(\"events\");\nconst parser_v4 = require(\"engine.io-parser\");\nconst parser_v3 = require(\"./parser-v3/index\");\nconst debug_1 = require(\"debug\");\nconst debug = (0, debug_1.default)(\"engine:transport\");\nfunction noop() { }\nclass Transport extends events_1.EventEmitter {\n    get readyState() {\n        return this._readyState;\n    }\n    set readyState(state) {\n        debug(\"readyState updated from %s to %s (%s)\", this._readyState, state, this.name);\n        this._readyState = state;\n    }\n    /**\n     * Transport constructor.\n     *\n     * @param {EngineRequest} req\n     */\n    constructor(req) {\n        super();\n        /**\n         * Whether the transport is currently ready to send packets.\n         */\n        this.writable = false;\n        /**\n         * The current state of the transport.\n         * @protected\n         */\n        this._readyState = \"open\";\n        /**\n         * Whether the transport is discarded and can be safely closed (used during upgrade).\n         * @protected\n         */\n        this.discarded = false;\n        this.protocol = req._query.EIO === \"4\" ? 4 : 3; // 3rd revision by default\n        this.parser = this.protocol === 4 ? parser_v4 : parser_v3;\n        this.supportsBinary = !(req._query && req._query.b64);\n    }\n    /**\n     * Flags the transport as discarded.\n     *\n     * @package\n     */\n    discard() {\n        this.discarded = true;\n    }\n    /**\n     * Called with an incoming HTTP request.\n     *\n     * @param req\n     * @package\n     */\n    onRequest(req) { }\n    /**\n     * Closes the transport.\n     *\n     * @package\n     */\n    close(fn) {\n        if (\"closed\" === this.readyState || \"closing\" === this.readyState)\n            return;\n        this.readyState = \"closing\";\n        this.doClose(fn || noop);\n    }\n    /**\n     * Called with a transport error.\n     *\n     * @param {String} msg - message error\n     * @param {Object} desc - error description\n     * @protected\n     */\n    onError(msg, desc) {\n        if (this.listeners(\"error\").length) {\n            const err = new Error(msg);\n            // @ts-ignore\n            err.type = \"TransportError\";\n            // @ts-ignore\n            err.description = desc;\n            this.emit(\"error\", err);\n        }\n        else {\n            debug(\"ignored transport error %s (%s)\", msg, desc);\n        }\n    }\n    /**\n     * Called with parsed out a packets from the data stream.\n     *\n     * @param {Object} packet\n     * @protected\n     */\n    onPacket(packet) {\n        this.emit(\"packet\", packet);\n    }\n    /**\n     * Called with the encoded packet data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        this.onPacket(this.parser.decodePacket(data));\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @protected\n     */\n    onClose() {\n        this.readyState = \"closed\";\n        this.emit(\"close\");\n    }\n}\nexports.Transport = Transport;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,SAAS,GAAG,KAAK;AACzB,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM,QAAQ,CAAC,GAAG,QAAQ,OAAO,EAAE;AACnC,SAAS,QAAS;AAClB,MAAM,kBAAkB,SAAS,YAAY;IACzC,IAAI,aAAa;QACb,OAAO,IAAI,CAAC,WAAW;IAC3B;IACA,IAAI,WAAW,KAAK,EAAE;QAClB,MAAM,yCAAyC,IAAI,CAAC,WAAW,EAAE,OAAO,IAAI,CAAC,IAAI;QACjF,IAAI,CAAC,WAAW,GAAG;IACvB;IA0BA;;;;KAIC,GACD,UAAU;QACN,IAAI,CAAC,SAAS,GAAG;IACrB;IACA;;;;;KAKC,GACD,UAAU,GAAG,EAAE,CAAE;IACjB;;;;KAIC,GACD,MAAM,EAAE,EAAE;QACN,IAAI,aAAa,IAAI,CAAC,UAAU,IAAI,cAAc,IAAI,CAAC,UAAU,EAC7D;QACJ,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,OAAO,CAAC,MAAM;IACvB;IACA;;;;;;KAMC,GACD,QAAQ,GAAG,EAAE,IAAI,EAAE;QACf,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,MAAM,EAAE;YAChC,MAAM,MAAM,IAAI,MAAM;YACtB,aAAa;YACb,IAAI,IAAI,GAAG;YACX,aAAa;YACb,IAAI,WAAW,GAAG;YAClB,IAAI,CAAC,IAAI,CAAC,SAAS;QACvB,OACK;YACD,MAAM,mCAAmC,KAAK;QAClD;IACJ;IACA;;;;;KAKC,GACD,SAAS,MAAM,EAAE;QACb,IAAI,CAAC,IAAI,CAAC,UAAU;IACxB;IACA;;;;;KAKC,GACD,OAAO,IAAI,EAAE;QACT,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;IAC3C;IACA;;;;KAIC,GACD,UAAU;QACN,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,IAAI,CAAC;IACd;IAjGA;;;;KAIC,GACD,YAAY,GAAG,CAAE;QACb,KAAK;QACL;;SAEC,GACD,IAAI,CAAC,QAAQ,GAAG;QAChB;;;SAGC,GACD,IAAI,CAAC,WAAW,GAAG;QACnB;;;SAGC,GACD,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,QAAQ,GAAG,IAAI,MAAM,CAAC,GAAG,KAAK,MAAM,IAAI,GAAG,0BAA0B;QAC1E,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,KAAK,IAAI,YAAY;QAChD,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,IAAI,MAAM,IAAI,IAAI,MAAM,CAAC,GAAG;IACxD;AA0EJ;AACA,QAAQ,SAAS,GAAG","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 733, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/transports/polling.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Polling = void 0;\nconst transport_1 = require(\"../transport\");\nconst zlib_1 = require(\"zlib\");\nconst accepts = require(\"accepts\");\nconst debug_1 = require(\"debug\");\nconst debug = (0, debug_1.default)(\"engine:polling\");\nconst compressionMethods = {\n    gzip: zlib_1.createGzip,\n    deflate: zlib_1.createDeflate,\n};\nclass Polling extends transport_1.Transport {\n    /**\n     * HTTP polling constructor.\n     */\n    constructor(req) {\n        super(req);\n        this.closeTimeout = 30 * 1000;\n    }\n    /**\n     * Transport name\n     */\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Overrides onRequest.\n     *\n     * @param {EngineRequest} req\n     * @package\n     */\n    onRequest(req) {\n        const res = req.res;\n        // remove the reference to the ServerResponse object (as the first request of the session is kept in memory by default)\n        req.res = null;\n        if (\"GET\" === req.method) {\n            this.onPollRequest(req, res);\n        }\n        else if (\"POST\" === req.method) {\n            this.onDataRequest(req, res);\n        }\n        else {\n            res.writeHead(500);\n            res.end();\n        }\n    }\n    /**\n     * The client sends a request awaiting for us to send data.\n     *\n     * @private\n     */\n    onPollRequest(req, res) {\n        if (this.req) {\n            debug(\"request overlap\");\n            // assert: this.res, '.req and .res should be (un)set together'\n            this.onError(\"overlap from client\");\n            res.writeHead(400);\n            res.end();\n            return;\n        }\n        debug(\"setting request\");\n        this.req = req;\n        this.res = res;\n        const onClose = () => {\n            this.onError(\"poll connection closed prematurely\");\n        };\n        const cleanup = () => {\n            req.removeListener(\"close\", onClose);\n            this.req = this.res = null;\n        };\n        req.cleanup = cleanup;\n        req.on(\"close\", onClose);\n        this.writable = true;\n        this.emit(\"ready\");\n        // if we're still writable but had a pending close, trigger an empty send\n        if (this.writable && this.shouldClose) {\n            debug(\"triggering empty send to append close packet\");\n            this.send([{ type: \"noop\" }]);\n        }\n    }\n    /**\n     * The client sends a request with data.\n     *\n     * @private\n     */\n    onDataRequest(req, res) {\n        if (this.dataReq) {\n            // assert: this.dataRes, '.dataReq and .dataRes should be (un)set together'\n            this.onError(\"data request overlap from client\");\n            res.writeHead(400);\n            res.end();\n            return;\n        }\n        const isBinary = \"application/octet-stream\" === req.headers[\"content-type\"];\n        if (isBinary && this.protocol === 4) {\n            return this.onError(\"invalid content\");\n        }\n        this.dataReq = req;\n        this.dataRes = res;\n        let chunks = isBinary ? Buffer.concat([]) : \"\";\n        const cleanup = () => {\n            req.removeListener(\"data\", onData);\n            req.removeListener(\"end\", onEnd);\n            req.removeListener(\"close\", onClose);\n            this.dataReq = this.dataRes = chunks = null;\n        };\n        const onClose = () => {\n            cleanup();\n            this.onError(\"data request connection closed prematurely\");\n        };\n        const onData = (data) => {\n            let contentLength;\n            if (isBinary) {\n                chunks = Buffer.concat([chunks, data]);\n                contentLength = chunks.length;\n            }\n            else {\n                chunks += data;\n                contentLength = Buffer.byteLength(chunks);\n            }\n            if (contentLength > this.maxHttpBufferSize) {\n                res.writeHead(413).end();\n                cleanup();\n            }\n        };\n        const onEnd = () => {\n            this.onData(chunks);\n            const headers = {\n                // text/html is required instead of text/plain to avoid an\n                // unwanted download dialog on certain user-agents (GH-43)\n                \"Content-Type\": \"text/html\",\n                \"Content-Length\": \"2\",\n            };\n            res.writeHead(200, this.headers(req, headers));\n            res.end(\"ok\");\n            cleanup();\n        };\n        req.on(\"close\", onClose);\n        if (!isBinary)\n            req.setEncoding(\"utf8\");\n        req.on(\"data\", onData);\n        req.on(\"end\", onEnd);\n    }\n    /**\n     * Processes the incoming data payload.\n     *\n     * @param data - encoded payload\n     * @protected\n     */\n    onData(data) {\n        debug('received \"%s\"', data);\n        const callback = (packet) => {\n            if (\"close\" === packet.type) {\n                debug(\"got xhr close packet\");\n                this.onClose();\n                return false;\n            }\n            this.onPacket(packet);\n        };\n        if (this.protocol === 3) {\n            this.parser.decodePayload(data, callback);\n        }\n        else {\n            this.parser.decodePayload(data).forEach(callback);\n        }\n    }\n    /**\n     * Overrides onClose.\n     *\n     * @private\n     */\n    onClose() {\n        if (this.writable) {\n            // close pending poll request\n            this.send([{ type: \"noop\" }]);\n        }\n        super.onClose();\n    }\n    send(packets) {\n        this.writable = false;\n        if (this.shouldClose) {\n            debug(\"appending close packet to payload\");\n            packets.push({ type: \"close\" });\n            this.shouldClose();\n            this.shouldClose = null;\n        }\n        const doWrite = (data) => {\n            const compress = packets.some((packet) => {\n                return packet.options && packet.options.compress;\n            });\n            this.write(data, { compress });\n        };\n        if (this.protocol === 3) {\n            this.parser.encodePayload(packets, this.supportsBinary, doWrite);\n        }\n        else {\n            this.parser.encodePayload(packets, doWrite);\n        }\n    }\n    /**\n     * Writes data as response to poll request.\n     *\n     * @param {String} data\n     * @param {Object} options\n     * @private\n     */\n    write(data, options) {\n        debug('writing \"%s\"', data);\n        this.doWrite(data, options, () => {\n            this.req.cleanup();\n            this.emit(\"drain\");\n        });\n    }\n    /**\n     * Performs the write.\n     *\n     * @protected\n     */\n    doWrite(data, options, callback) {\n        // explicit UTF-8 is required for pages not served under utf\n        const isString = typeof data === \"string\";\n        const contentType = isString\n            ? \"text/plain; charset=UTF-8\"\n            : \"application/octet-stream\";\n        const headers = {\n            \"Content-Type\": contentType,\n        };\n        const respond = (data) => {\n            headers[\"Content-Length\"] =\n                \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n            this.res.writeHead(200, this.headers(this.req, headers));\n            this.res.end(data);\n            callback();\n        };\n        if (!this.httpCompression || !options.compress) {\n            respond(data);\n            return;\n        }\n        const len = isString ? Buffer.byteLength(data) : data.length;\n        if (len < this.httpCompression.threshold) {\n            respond(data);\n            return;\n        }\n        const encoding = accepts(this.req).encodings([\"gzip\", \"deflate\"]);\n        if (!encoding) {\n            respond(data);\n            return;\n        }\n        this.compress(data, encoding, (err, data) => {\n            if (err) {\n                this.res.writeHead(500);\n                this.res.end();\n                callback(err);\n                return;\n            }\n            headers[\"Content-Encoding\"] = encoding;\n            respond(data);\n        });\n    }\n    /**\n     * Compresses data.\n     *\n     * @private\n     */\n    compress(data, encoding, callback) {\n        debug(\"compressing\");\n        const buffers = [];\n        let nread = 0;\n        compressionMethods[encoding](this.httpCompression)\n            .on(\"error\", callback)\n            .on(\"data\", function (chunk) {\n            buffers.push(chunk);\n            nread += chunk.length;\n        })\n            .on(\"end\", function () {\n            callback(null, Buffer.concat(buffers, nread));\n        })\n            .end(data);\n    }\n    /**\n     * Closes the transport.\n     *\n     * @private\n     */\n    doClose(fn) {\n        debug(\"closing\");\n        let closeTimeoutTimer;\n        if (this.dataReq) {\n            debug(\"aborting ongoing data request\");\n            this.dataReq.destroy();\n        }\n        const onClose = () => {\n            clearTimeout(closeTimeoutTimer);\n            fn();\n            this.onClose();\n        };\n        if (this.writable) {\n            debug(\"transport writable - closing right away\");\n            this.send([{ type: \"close\" }]);\n            onClose();\n        }\n        else if (this.discarded) {\n            debug(\"transport discarded - closing right away\");\n            onClose();\n        }\n        else {\n            debug(\"transport not writable - buffering orderly close\");\n            this.shouldClose = onClose;\n            closeTimeoutTimer = setTimeout(onClose, this.closeTimeout);\n        }\n    }\n    /**\n     * Returns headers for a response.\n     *\n     * @param {http.IncomingMessage} req\n     * @param {Object} headers - extra headers\n     * @private\n     */\n    headers(req, headers = {}) {\n        // prevent XSS warnings on IE\n        // https://github.com/LearnBoost/socket.io/pull/1333\n        const ua = req.headers[\"user-agent\"];\n        if (ua && (~ua.indexOf(\";MSIE\") || ~ua.indexOf(\"Trident/\"))) {\n            headers[\"X-XSS-Protection\"] = \"0\";\n        }\n        headers[\"cache-control\"] = \"no-store\";\n        this.emit(\"headers\", headers, req);\n        return headers;\n    }\n}\nexports.Polling = Polling;\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1068, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/transports/polling-jsonp.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JSONP = void 0;\nconst polling_1 = require(\"./polling\");\nconst qs = require(\"querystring\");\nconst rDoubleSlashes = /\\\\\\\\n/g;\nconst rSlashes = /(\\\\)?\\\\n/g;\nclass JSONP extends polling_1.Polling {\n    /**\n     * JSON-P polling transport.\n     */\n    constructor(req) {\n        super(req);\n        this.head = \"___eio[\" + (req._query.j || \"\").replace(/[^0-9]/g, \"\") + \"](\";\n        this.foot = \");\";\n    }\n    onData(data) {\n        // we leverage the qs module so that we get built-in DoS protection\n        // and the fast alternative to decodeURIComponent\n        data = qs.parse(data).d;\n        if (\"string\" === typeof data) {\n            // client will send already escaped newlines as \\\\\\\\n and newlines as \\\\n\n            // \\\\n must be replaced with \\n and \\\\\\\\n with \\\\n\n            data = data.replace(rSlashes, function (match, slashes) {\n                return slashes ? match : \"\\n\";\n            });\n            super.onData(data.replace(rDoubleSlashes, \"\\\\n\"));\n        }\n    }\n    doWrite(data, options, callback) {\n        // we must output valid javascript, not valid json\n        // see: http://timelessrepo.com/json-isnt-a-javascript-subset\n        const js = JSON.stringify(data)\n            .replace(/\\u2028/g, \"\\\\u2028\")\n            .replace(/\\u2029/g, \"\\\\u2029\");\n        // prepare response\n        data = this.head + js + this.foot;\n        super.doWrite(data, options, callback);\n    }\n}\nexports.JSONP = JSONP;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,KAAK,GAAG,KAAK;AACrB,MAAM;AACN,MAAM;AACN,MAAM,iBAAiB;AACvB,MAAM,WAAW;AACjB,MAAM,cAAc,UAAU,OAAO;IASjC,OAAO,IAAI,EAAE;QACT,mEAAmE;QACnE,iDAAiD;QACjD,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC;QACvB,IAAI,aAAa,OAAO,MAAM;YAC1B,yEAAyE;YACzE,kDAAkD;YAClD,OAAO,KAAK,OAAO,CAAC,UAAU,SAAU,KAAK,EAAE,OAAO;gBAClD,OAAO,UAAU,QAAQ;YAC7B;YACA,KAAK,CAAC,OAAO,KAAK,OAAO,CAAC,gBAAgB;QAC9C;IACJ;IACA,QAAQ,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE;QAC7B,kDAAkD;QAClD,6DAA6D;QAC7D,MAAM,KAAK,KAAK,SAAS,CAAC,MACrB,OAAO,CAAC,WAAW,WACnB,OAAO,CAAC,WAAW;QACxB,mBAAmB;QACnB,OAAO,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI,CAAC,IAAI;QACjC,KAAK,CAAC,QAAQ,MAAM,SAAS;IACjC;IA9BA;;KAEC,GACD,YAAY,GAAG,CAAE;QACb,KAAK,CAAC;QACN,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,WAAW,MAAM;QACtE,IAAI,CAAC,IAAI,GAAG;IAChB;AAwBJ;AACA,QAAQ,KAAK,GAAG","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/transports/websocket.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebSocket = void 0;\nconst transport_1 = require(\"../transport\");\nconst debug_1 = require(\"debug\");\nconst debug = (0, debug_1.default)(\"engine:ws\");\nclass WebSocket extends transport_1.Transport {\n    /**\n     * WebSocket transport\n     *\n     * @param {EngineRequest} req\n     */\n    constructor(req) {\n        super(req);\n        this._doSend = (data) => {\n            this.socket.send(data, this._onSent);\n        };\n        this._doSendLast = (data) => {\n            this.socket.send(data, this._onSentLast);\n        };\n        this._onSent = (err) => {\n            if (err) {\n                this.onError(\"write error\", err.stack);\n            }\n        };\n        this._onSentLast = (err) => {\n            if (err) {\n                this.onError(\"write error\", err.stack);\n            }\n            else {\n                this.emit(\"drain\");\n                this.writable = true;\n                this.emit(\"ready\");\n            }\n        };\n        this.socket = req.websocket;\n        this.socket.on(\"message\", (data, isBinary) => {\n            const message = isBinary ? data : data.toString();\n            debug('received \"%s\"', message);\n            super.onData(message);\n        });\n        this.socket.once(\"close\", this.onClose.bind(this));\n        this.socket.on(\"error\", this.onError.bind(this));\n        this.writable = true;\n        this.perMessageDeflate = null;\n    }\n    /**\n     * Transport name\n     */\n    get name() {\n        return \"websocket\";\n    }\n    /**\n     * Advertise upgrade support.\n     */\n    get handlesUpgrades() {\n        return true;\n    }\n    send(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const isLast = i + 1 === packets.length;\n            if (this._canSendPreEncodedFrame(packet)) {\n                // the WebSocket frame was computed with WebSocket.Sender.frame()\n                // see https://github.com/websockets/ws/issues/617#issuecomment-283002469\n                this.socket._sender.sendFrame(\n                // @ts-ignore\n                packet.options.wsPreEncodedFrame, isLast ? this._onSentLast : this._onSent);\n            }\n            else {\n                this.parser.encodePacket(packet, this.supportsBinary, isLast ? this._doSendLast : this._doSend);\n            }\n        }\n    }\n    /**\n     * Whether the encoding of the WebSocket frame can be skipped.\n     * @param packet\n     * @private\n     */\n    _canSendPreEncodedFrame(packet) {\n        var _a, _b, _c;\n        return (!this.perMessageDeflate &&\n            typeof ((_b = (_a = this.socket) === null || _a === void 0 ? void 0 : _a._sender) === null || _b === void 0 ? void 0 : _b.sendFrame) === \"function\" &&\n            // @ts-ignore\n            ((_c = packet.options) === null || _c === void 0 ? void 0 : _c.wsPreEncodedFrame) !== undefined);\n    }\n    doClose(fn) {\n        debug(\"closing\");\n        this.socket.close();\n        fn && fn();\n    }\n}\nexports.WebSocket = WebSocket;\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1201, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/transports/webtransport.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebTransport = void 0;\nconst transport_1 = require(\"../transport\");\nconst debug_1 = require(\"debug\");\nconst engine_io_parser_1 = require(\"engine.io-parser\");\nconst debug = (0, debug_1.default)(\"engine:webtransport\");\n/**\n * Reference: https://developer.mozilla.org/en-US/docs/Web/API/WebTransport_API\n */\nclass WebTransport extends transport_1.Transport {\n    constructor(session, stream, reader) {\n        super({ _query: { EIO: \"4\" } });\n        this.session = session;\n        const transformStream = (0, engine_io_parser_1.createPacketEncoderStream)();\n        transformStream.readable.pipeTo(stream.writable).catch(() => {\n            debug(\"the stream was closed\");\n        });\n        this.writer = transformStream.writable.getWriter();\n        (async () => {\n            try {\n                while (true) {\n                    const { value, done } = await reader.read();\n                    if (done) {\n                        debug(\"session is closed\");\n                        break;\n                    }\n                    debug(\"received chunk: %o\", value);\n                    this.onPacket(value);\n                }\n            }\n            catch (e) {\n                debug(\"error while reading: %s\", e.message);\n            }\n        })();\n        session.closed.then(() => this.onClose());\n        this.writable = true;\n    }\n    get name() {\n        return \"webtransport\";\n    }\n    async send(packets) {\n        this.writable = false;\n        try {\n            for (let i = 0; i < packets.length; i++) {\n                const packet = packets[i];\n                await this.writer.write(packet);\n            }\n        }\n        catch (e) {\n            debug(\"error while writing: %s\", e.message);\n        }\n        this.emit(\"drain\");\n        this.writable = true;\n        this.emit(\"ready\");\n    }\n    doClose(fn) {\n        debug(\"closing WebTransport session\");\n        this.session.close();\n        fn && fn();\n    }\n}\nexports.WebTransport = WebTransport;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,YAAY,GAAG,KAAK;AAC5B,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM,QAAQ,CAAC,GAAG,QAAQ,OAAO,EAAE;AACnC;;CAEC,GACD,MAAM,qBAAqB,YAAY,SAAS;IA4B5C,IAAI,OAAO;QACP,OAAO;IACX;IACA,MAAM,KAAK,OAAO,EAAE;QAChB,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI;YACA,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;gBACrC,MAAM,SAAS,OAAO,CAAC,EAAE;gBACzB,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAC5B;QACJ,EACA,OAAO,GAAG;YACN,MAAM,2BAA2B,EAAE,OAAO;QAC9C;QACA,IAAI,CAAC,IAAI,CAAC;QACV,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,IAAI,CAAC;IACd;IACA,QAAQ,EAAE,EAAE;QACR,MAAM;QACN,IAAI,CAAC,OAAO,CAAC,KAAK;QAClB,MAAM;IACV;IAjDA,YAAY,OAAO,EAAE,MAAM,EAAE,MAAM,CAAE;QACjC,KAAK,CAAC;YAAE,QAAQ;gBAAE,KAAK;YAAI;QAAE;QAC7B,IAAI,CAAC,OAAO,GAAG;QACf,MAAM,kBAAkB,CAAC,GAAG,mBAAmB,yBAAyB;QACxE,gBAAgB,QAAQ,CAAC,MAAM,CAAC,OAAO,QAAQ,EAAE,KAAK,CAAC;YACnD,MAAM;QACV;QACA,IAAI,CAAC,MAAM,GAAG,gBAAgB,QAAQ,CAAC,SAAS;QAChD,CAAC;YACG,IAAI;gBACA,MAAO,KAAM;oBACT,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,OAAO,IAAI;oBACzC,IAAI,MAAM;wBACN,MAAM;wBACN;oBACJ;oBACA,MAAM,sBAAsB;oBAC5B,IAAI,CAAC,QAAQ,CAAC;gBAClB;YACJ,EACA,OAAO,GAAG;gBACN,MAAM,2BAA2B,EAAE,OAAO;YAC9C;QACJ,CAAC;QACD,QAAQ,MAAM,CAAC,IAAI,CAAC,IAAM,IAAI,CAAC,OAAO;QACtC,IAAI,CAAC,QAAQ,GAAG;IACpB;AAwBJ;AACA,QAAQ,YAAY,GAAG","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1270, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/transports/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst polling_1 = require(\"./polling\");\nconst polling_jsonp_1 = require(\"./polling-jsonp\");\nconst websocket_1 = require(\"./websocket\");\nconst webtransport_1 = require(\"./webtransport\");\nexports.default = {\n    polling: polling,\n    websocket: websocket_1.WebSocket,\n    webtransport: webtransport_1.WebTransport,\n};\n/**\n * Polling polymorphic constructor.\n */\nfunction polling(req) {\n    if (\"string\" === typeof req._query.j) {\n        return new polling_jsonp_1.JSONP(req);\n    }\n    else {\n        return new polling_1.Polling(req);\n    }\n}\npolling.upgradesTo = [\"websocket\", \"webtransport\"];\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,QAAQ,OAAO,GAAG;IACd,SAAS;IACT,WAAW,YAAY,SAAS;IAChC,cAAc,eAAe,YAAY;AAC7C;AACA;;CAEC,GACD,SAAS,QAAQ,GAAG;IAChB,IAAI,aAAa,OAAO,IAAI,MAAM,CAAC,CAAC,EAAE;QAClC,OAAO,IAAI,gBAAgB,KAAK,CAAC;IACrC,OACK;QACD,OAAO,IAAI,UAAU,OAAO,CAAC;IACjC;AACJ;AACA,QAAQ,UAAU,GAAG;IAAC;IAAa;CAAe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/socket.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = void 0;\nconst events_1 = require(\"events\");\nconst debug_1 = require(\"debug\");\nconst timers_1 = require(\"timers\");\nconst debug = (0, debug_1.default)(\"engine:socket\");\nclass Socket extends events_1.EventEmitter {\n    get readyState() {\n        return this._readyState;\n    }\n    set readyState(state) {\n        debug(\"readyState updated from %s to %s\", this._readyState, state);\n        this._readyState = state;\n    }\n    constructor(id, server, transport, req, protocol) {\n        super();\n        /**\n         * The current state of the socket.\n         */\n        this._readyState = \"opening\";\n        /* private */ this.upgrading = false;\n        /* private */ this.upgraded = false;\n        this.writeBuffer = [];\n        this.packetsFn = [];\n        this.sentCallbackFn = [];\n        this.cleanupFn = [];\n        this.id = id;\n        this.server = server;\n        this.request = req;\n        this.protocol = protocol;\n        // Cache IP since it might not be in the req later\n        if (req) {\n            if (req.websocket && req.websocket._socket) {\n                this.remoteAddress = req.websocket._socket.remoteAddress;\n            }\n            else {\n                this.remoteAddress = req.connection.remoteAddress;\n            }\n        }\n        else {\n            // TODO there is currently no way to get the IP address of the client when it connects with WebTransport\n            //  see https://github.com/fails-components/webtransport/issues/114\n        }\n        this.pingTimeoutTimer = null;\n        this.pingIntervalTimer = null;\n        this.setTransport(transport);\n        this.onOpen();\n    }\n    /**\n     * Called upon transport considered open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        // sends an `open` packet\n        this.transport.sid = this.id;\n        this.sendPacket(\"open\", JSON.stringify({\n            sid: this.id,\n            upgrades: this.getAvailableUpgrades(),\n            pingInterval: this.server.opts.pingInterval,\n            pingTimeout: this.server.opts.pingTimeout,\n            maxPayload: this.server.opts.maxHttpBufferSize,\n        }));\n        if (this.server.opts.initialPacket) {\n            this.sendPacket(\"message\", this.server.opts.initialPacket);\n        }\n        this.emit(\"open\");\n        if (this.protocol === 3) {\n            // in protocol v3, the client sends a ping, and the server answers with a pong\n            this.resetPingTimeout();\n        }\n        else {\n            // in protocol v4, the server sends a ping, and the client answers with a pong\n            this.schedulePing();\n        }\n    }\n    /**\n     * Called upon transport packet.\n     *\n     * @param {Object} packet\n     * @private\n     */\n    onPacket(packet) {\n        if (\"open\" !== this.readyState) {\n            return debug(\"packet received with closed socket\");\n        }\n        // export packet event\n        debug(`received packet ${packet.type}`);\n        this.emit(\"packet\", packet);\n        switch (packet.type) {\n            case \"ping\":\n                if (this.transport.protocol !== 3) {\n                    this.onError(new Error(\"invalid heartbeat direction\"));\n                    return;\n                }\n                debug(\"got ping\");\n                this.pingTimeoutTimer.refresh();\n                this.sendPacket(\"pong\");\n                this.emit(\"heartbeat\");\n                break;\n            case \"pong\":\n                if (this.transport.protocol === 3) {\n                    this.onError(new Error(\"invalid heartbeat direction\"));\n                    return;\n                }\n                debug(\"got pong\");\n                (0, timers_1.clearTimeout)(this.pingTimeoutTimer);\n                this.pingIntervalTimer.refresh();\n                this.emit(\"heartbeat\");\n                break;\n            case \"error\":\n                this.onClose(\"parse error\");\n                break;\n            case \"message\":\n                this.emit(\"data\", packet.data);\n                this.emit(\"message\", packet.data);\n                break;\n        }\n    }\n    /**\n     * Called upon transport error.\n     *\n     * @param {Error} err - error object\n     * @private\n     */\n    onError(err) {\n        debug(\"transport error\");\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Pings client every `this.pingInterval` and expects response\n     * within `this.pingTimeout` or closes connection.\n     *\n     * @private\n     */\n    schedulePing() {\n        this.pingIntervalTimer = (0, timers_1.setTimeout)(() => {\n            debug(\"writing ping packet - expecting pong within %sms\", this.server.opts.pingTimeout);\n            this.sendPacket(\"ping\");\n            this.resetPingTimeout();\n        }, this.server.opts.pingInterval);\n    }\n    /**\n     * Resets ping timeout.\n     *\n     * @private\n     */\n    resetPingTimeout() {\n        (0, timers_1.clearTimeout)(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = (0, timers_1.setTimeout)(() => {\n            if (this.readyState === \"closed\")\n                return;\n            this.onClose(\"ping timeout\");\n        }, this.protocol === 3\n            ? this.server.opts.pingInterval + this.server.opts.pingTimeout\n            : this.server.opts.pingTimeout);\n    }\n    /**\n     * Attaches handlers for the given transport.\n     *\n     * @param {Transport} transport\n     * @private\n     */\n    setTransport(transport) {\n        const onError = this.onError.bind(this);\n        const onReady = () => this.flush();\n        const onPacket = this.onPacket.bind(this);\n        const onDrain = this.onDrain.bind(this);\n        const onClose = this.onClose.bind(this, \"transport close\");\n        this.transport = transport;\n        this.transport.once(\"error\", onError);\n        this.transport.on(\"ready\", onReady);\n        this.transport.on(\"packet\", onPacket);\n        this.transport.on(\"drain\", onDrain);\n        this.transport.once(\"close\", onClose);\n        this.cleanupFn.push(function () {\n            transport.removeListener(\"error\", onError);\n            transport.removeListener(\"ready\", onReady);\n            transport.removeListener(\"packet\", onPacket);\n            transport.removeListener(\"drain\", onDrain);\n            transport.removeListener(\"close\", onClose);\n        });\n    }\n    /**\n     * Upon transport \"drain\" event\n     *\n     * @private\n     */\n    onDrain() {\n        if (this.sentCallbackFn.length > 0) {\n            debug(\"executing batch send callback\");\n            const seqFn = this.sentCallbackFn.shift();\n            if (seqFn) {\n                for (let i = 0; i < seqFn.length; i++) {\n                    seqFn[i](this.transport);\n                }\n            }\n        }\n    }\n    /**\n     * Upgrades socket to the given transport\n     *\n     * @param {Transport} transport\n     * @private\n     */\n    /* private */ _maybeUpgrade(transport) {\n        debug('might upgrade socket transport from \"%s\" to \"%s\"', this.transport.name, transport.name);\n        this.upgrading = true;\n        // set transport upgrade timer\n        const upgradeTimeoutTimer = (0, timers_1.setTimeout)(() => {\n            debug(\"client did not complete upgrade - closing transport\");\n            cleanup();\n            if (\"open\" === transport.readyState) {\n                transport.close();\n            }\n        }, this.server.opts.upgradeTimeout);\n        let checkIntervalTimer;\n        const onPacket = (packet) => {\n            if (\"ping\" === packet.type && \"probe\" === packet.data) {\n                debug(\"got probe ping packet, sending pong\");\n                transport.send([{ type: \"pong\", data: \"probe\" }]);\n                this.emit(\"upgrading\", transport);\n                clearInterval(checkIntervalTimer);\n                checkIntervalTimer = setInterval(check, 100);\n            }\n            else if (\"upgrade\" === packet.type && this.readyState !== \"closed\") {\n                debug(\"got upgrade packet - upgrading\");\n                cleanup();\n                this.transport.discard();\n                this.upgraded = true;\n                this.clearTransport();\n                this.setTransport(transport);\n                this.emit(\"upgrade\", transport);\n                this.flush();\n                if (this.readyState === \"closing\") {\n                    transport.close(() => {\n                        this.onClose(\"forced close\");\n                    });\n                }\n            }\n            else {\n                cleanup();\n                transport.close();\n            }\n        };\n        // we force a polling cycle to ensure a fast upgrade\n        const check = () => {\n            if (\"polling\" === this.transport.name && this.transport.writable) {\n                debug(\"writing a noop packet to polling for fast upgrade\");\n                this.transport.send([{ type: \"noop\" }]);\n            }\n        };\n        const cleanup = () => {\n            this.upgrading = false;\n            clearInterval(checkIntervalTimer);\n            (0, timers_1.clearTimeout)(upgradeTimeoutTimer);\n            transport.removeListener(\"packet\", onPacket);\n            transport.removeListener(\"close\", onTransportClose);\n            transport.removeListener(\"error\", onError);\n            this.removeListener(\"close\", onClose);\n        };\n        const onError = (err) => {\n            debug(\"client did not complete upgrade - %s\", err);\n            cleanup();\n            transport.close();\n            transport = null;\n        };\n        const onTransportClose = () => {\n            onError(\"transport closed\");\n        };\n        const onClose = () => {\n            onError(\"socket closed\");\n        };\n        transport.on(\"packet\", onPacket);\n        transport.once(\"close\", onTransportClose);\n        transport.once(\"error\", onError);\n        this.once(\"close\", onClose);\n    }\n    /**\n     * Clears listeners and timers associated with current transport.\n     *\n     * @private\n     */\n    clearTransport() {\n        let cleanup;\n        const toCleanUp = this.cleanupFn.length;\n        for (let i = 0; i < toCleanUp; i++) {\n            cleanup = this.cleanupFn.shift();\n            cleanup();\n        }\n        // silence further transport errors and prevent uncaught exceptions\n        this.transport.on(\"error\", function () {\n            debug(\"error triggered by discarded transport\");\n        });\n        // ensure transport won't stay open\n        this.transport.close();\n        (0, timers_1.clearTimeout)(this.pingTimeoutTimer);\n    }\n    /**\n     * Called upon transport considered closed.\n     * Possible reasons: `ping timeout`, `client error`, `parse error`,\n     * `transport error`, `server close`, `transport close`\n     */\n    onClose(reason, description) {\n        if (\"closed\" !== this.readyState) {\n            this.readyState = \"closed\";\n            // clear timers\n            (0, timers_1.clearTimeout)(this.pingIntervalTimer);\n            (0, timers_1.clearTimeout)(this.pingTimeoutTimer);\n            // clean writeBuffer in next tick, so developers can still\n            // grab the writeBuffer on 'close' event\n            process.nextTick(() => {\n                this.writeBuffer = [];\n            });\n            this.packetsFn = [];\n            this.sentCallbackFn = [];\n            this.clearTransport();\n            this.emit(\"close\", reason, description);\n        }\n    }\n    /**\n     * Sends a message packet.\n     *\n     * @param {Object} data\n     * @param {Object} options\n     * @param {Function} callback\n     * @return {Socket} for chaining\n     */\n    send(data, options, callback) {\n        this.sendPacket(\"message\", data, options, callback);\n        return this;\n    }\n    /**\n     * Alias of {@link send}.\n     *\n     * @param data\n     * @param options\n     * @param callback\n     */\n    write(data, options, callback) {\n        this.sendPacket(\"message\", data, options, callback);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type - packet type\n     * @param {String} data\n     * @param {Object} options\n     * @param {Function} callback\n     *\n     * @private\n     */\n    sendPacket(type, data, options = {}, callback) {\n        if (\"function\" === typeof options) {\n            callback = options;\n            options = {};\n        }\n        if (\"closing\" !== this.readyState && \"closed\" !== this.readyState) {\n            debug('sending packet \"%s\" (%s)', type, data);\n            // compression is enabled by default\n            options.compress = options.compress !== false;\n            const packet = {\n                type,\n                options: options,\n            };\n            if (data)\n                packet.data = data;\n            // exports packetCreate event\n            this.emit(\"packetCreate\", packet);\n            this.writeBuffer.push(packet);\n            // add send callback to object, if defined\n            if (\"function\" === typeof callback)\n                this.packetsFn.push(callback);\n            this.flush();\n        }\n    }\n    /**\n     * Attempts to flush the packets buffer.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            this.writeBuffer.length) {\n            debug(\"flushing buffer to transport\");\n            this.emit(\"flush\", this.writeBuffer);\n            this.server.emit(\"flush\", this, this.writeBuffer);\n            const wbuf = this.writeBuffer;\n            this.writeBuffer = [];\n            if (this.packetsFn.length) {\n                this.sentCallbackFn.push(this.packetsFn);\n                this.packetsFn = [];\n            }\n            else {\n                this.sentCallbackFn.push(null);\n            }\n            this.transport.send(wbuf);\n            this.emit(\"drain\");\n            this.server.emit(\"drain\", this);\n        }\n    }\n    /**\n     * Get available upgrades for this socket.\n     *\n     * @private\n     */\n    getAvailableUpgrades() {\n        const availableUpgrades = [];\n        const allUpgrades = this.server.upgrades(this.transport.name);\n        for (let i = 0; i < allUpgrades.length; ++i) {\n            const upg = allUpgrades[i];\n            if (this.server.opts.transports.indexOf(upg) !== -1) {\n                availableUpgrades.push(upg);\n            }\n        }\n        return availableUpgrades;\n    }\n    /**\n     * Closes the socket and underlying transport.\n     *\n     * @param {Boolean} discard - optional, discard the transport\n     * @return {Socket} for chaining\n     */\n    close(discard) {\n        if (discard &&\n            (this.readyState === \"open\" || this.readyState === \"closing\")) {\n            return this.closeTransport(discard);\n        }\n        if (\"open\" !== this.readyState)\n            return;\n        this.readyState = \"closing\";\n        if (this.writeBuffer.length) {\n            debug(\"there are %d remaining packets in the buffer, waiting for the 'drain' event\", this.writeBuffer.length);\n            this.once(\"drain\", () => {\n                debug(\"all packets have been sent, closing the transport\");\n                this.closeTransport(discard);\n            });\n            return;\n        }\n        debug(\"the buffer is empty, closing the transport right away\");\n        this.closeTransport(discard);\n    }\n    /**\n     * Closes the underlying transport.\n     *\n     * @param {Boolean} discard\n     * @private\n     */\n    closeTransport(discard) {\n        debug(\"closing the transport (discard? %s)\", !!discard);\n        if (discard)\n            this.transport.discard();\n        this.transport.close(this.onClose.bind(this, \"forced close\"));\n    }\n}\nexports.Socket = Socket;\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1742, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/server.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Server = exports.BaseServer = void 0;\nconst qs = require(\"querystring\");\nconst url_1 = require(\"url\");\nconst base64id = require(\"base64id\");\nconst transports_1 = require(\"./transports\");\nconst events_1 = require(\"events\");\nconst socket_1 = require(\"./socket\");\nconst debug_1 = require(\"debug\");\nconst cookie_1 = require(\"cookie\");\nconst ws_1 = require(\"ws\");\nconst webtransport_1 = require(\"./transports/webtransport\");\nconst engine_io_parser_1 = require(\"engine.io-parser\");\nconst debug = (0, debug_1.default)(\"engine\");\nconst kResponseHeaders = Symbol(\"responseHeaders\");\nfunction parseSessionId(data) {\n    try {\n        const parsed = JSON.parse(data);\n        if (typeof parsed.sid === \"string\") {\n            return parsed.sid;\n        }\n    }\n    catch (e) { }\n}\nclass BaseServer extends events_1.EventEmitter {\n    /**\n     * Server constructor.\n     *\n     * @param {Object} opts - options\n     */\n    constructor(opts = {}) {\n        super();\n        this.middlewares = [];\n        this.clients = {};\n        this.clientsCount = 0;\n        this.opts = Object.assign({\n            wsEngine: ws_1.Server,\n            pingTimeout: 20000,\n            pingInterval: 25000,\n            upgradeTimeout: 10000,\n            maxHttpBufferSize: 1e6,\n            transports: [\"polling\", \"websocket\"], // WebTransport is disabled by default\n            allowUpgrades: true,\n            httpCompression: {\n                threshold: 1024,\n            },\n            cors: false,\n            allowEIO3: false,\n        }, opts);\n        if (opts.cookie) {\n            this.opts.cookie = Object.assign({\n                name: \"io\",\n                path: \"/\",\n                // @ts-ignore\n                httpOnly: opts.cookie.path !== false,\n                sameSite: \"lax\",\n            }, opts.cookie);\n        }\n        if (this.opts.cors) {\n            this.use(require(\"cors\")(this.opts.cors));\n        }\n        if (opts.perMessageDeflate) {\n            this.opts.perMessageDeflate = Object.assign({\n                threshold: 1024,\n            }, opts.perMessageDeflate);\n        }\n        this.init();\n    }\n    /**\n     * Compute the pathname of the requests that are handled by the server\n     * @param options\n     * @protected\n     */\n    _computePath(options) {\n        let path = (options.path || \"/engine.io\").replace(/\\/$/, \"\");\n        if (options.addTrailingSlash !== false) {\n            // normalize path\n            path += \"/\";\n        }\n        return path;\n    }\n    /**\n     * Returns a list of available transports for upgrade given a certain transport.\n     *\n     * @return {Array}\n     */\n    upgrades(transport) {\n        if (!this.opts.allowUpgrades)\n            return [];\n        return transports_1.default[transport].upgradesTo || [];\n    }\n    /**\n     * Verifies a request.\n     *\n     * @param {EngineRequest} req\n     * @param upgrade - whether it's an upgrade request\n     * @param fn\n     * @protected\n     */\n    verify(req, upgrade, fn) {\n        // transport check\n        const transport = req._query.transport;\n        // WebTransport does not go through the verify() method, see the onWebTransportSession() method\n        if (!~this.opts.transports.indexOf(transport) ||\n            transport === \"webtransport\") {\n            debug('unknown transport \"%s\"', transport);\n            return fn(Server.errors.UNKNOWN_TRANSPORT, { transport });\n        }\n        // 'Origin' header check\n        const isOriginInvalid = checkInvalidHeaderChar(req.headers.origin);\n        if (isOriginInvalid) {\n            const origin = req.headers.origin;\n            req.headers.origin = null;\n            debug(\"origin header invalid\");\n            return fn(Server.errors.BAD_REQUEST, {\n                name: \"INVALID_ORIGIN\",\n                origin,\n            });\n        }\n        // sid check\n        const sid = req._query.sid;\n        if (sid) {\n            if (!this.clients.hasOwnProperty(sid)) {\n                debug('unknown sid \"%s\"', sid);\n                return fn(Server.errors.UNKNOWN_SID, {\n                    sid,\n                });\n            }\n            const previousTransport = this.clients[sid].transport.name;\n            if (!upgrade && previousTransport !== transport) {\n                debug(\"bad request: unexpected transport without upgrade\");\n                return fn(Server.errors.BAD_REQUEST, {\n                    name: \"TRANSPORT_MISMATCH\",\n                    transport,\n                    previousTransport,\n                });\n            }\n        }\n        else {\n            // handshake is GET only\n            if (\"GET\" !== req.method) {\n                return fn(Server.errors.BAD_HANDSHAKE_METHOD, {\n                    method: req.method,\n                });\n            }\n            if (transport === \"websocket\" && !upgrade) {\n                debug(\"invalid transport upgrade\");\n                return fn(Server.errors.BAD_REQUEST, {\n                    name: \"TRANSPORT_HANDSHAKE_ERROR\",\n                });\n            }\n            if (!this.opts.allowRequest)\n                return fn();\n            return this.opts.allowRequest(req, (message, success) => {\n                if (!success) {\n                    return fn(Server.errors.FORBIDDEN, {\n                        message,\n                    });\n                }\n                fn();\n            });\n        }\n        fn();\n    }\n    /**\n     * Adds a new middleware.\n     *\n     * @example\n     * import helmet from \"helmet\";\n     *\n     * engine.use(helmet());\n     *\n     * @param fn\n     */\n    use(fn) {\n        this.middlewares.push(fn);\n    }\n    /**\n     * Apply the middlewares to the request.\n     *\n     * @param req\n     * @param res\n     * @param callback\n     * @protected\n     */\n    _applyMiddlewares(req, res, callback) {\n        if (this.middlewares.length === 0) {\n            debug(\"no middleware to apply, skipping\");\n            return callback();\n        }\n        const apply = (i) => {\n            debug(\"applying middleware nÂ°%d\", i + 1);\n            this.middlewares[i](req, res, (err) => {\n                if (err) {\n                    return callback(err);\n                }\n                if (i + 1 < this.middlewares.length) {\n                    apply(i + 1);\n                }\n                else {\n                    callback();\n                }\n            });\n        };\n        apply(0);\n    }\n    /**\n     * Closes all clients.\n     */\n    close() {\n        debug(\"closing all open clients\");\n        for (let i in this.clients) {\n            if (this.clients.hasOwnProperty(i)) {\n                this.clients[i].close(true);\n            }\n        }\n        this.cleanup();\n        return this;\n    }\n    /**\n     * generate a socket id.\n     * Overwrite this method to generate your custom socket id\n     *\n     * @param {IncomingMessage} req - the request object\n     */\n    generateId(req) {\n        return base64id.generateId();\n    }\n    /**\n     * Handshakes a new client.\n     *\n     * @param {String} transportName\n     * @param {Object} req - the request object\n     * @param {Function} closeConnection\n     *\n     * @protected\n     */\n    async handshake(transportName, req, closeConnection) {\n        const protocol = req._query.EIO === \"4\" ? 4 : 3; // 3rd revision by default\n        if (protocol === 3 && !this.opts.allowEIO3) {\n            debug(\"unsupported protocol version\");\n            this.emit(\"connection_error\", {\n                req,\n                code: Server.errors.UNSUPPORTED_PROTOCOL_VERSION,\n                message: Server.errorMessages[Server.errors.UNSUPPORTED_PROTOCOL_VERSION],\n                context: {\n                    protocol,\n                },\n            });\n            closeConnection(Server.errors.UNSUPPORTED_PROTOCOL_VERSION);\n            return;\n        }\n        let id;\n        try {\n            id = await this.generateId(req);\n        }\n        catch (e) {\n            debug(\"error while generating an id\");\n            this.emit(\"connection_error\", {\n                req,\n                code: Server.errors.BAD_REQUEST,\n                message: Server.errorMessages[Server.errors.BAD_REQUEST],\n                context: {\n                    name: \"ID_GENERATION_ERROR\",\n                    error: e,\n                },\n            });\n            closeConnection(Server.errors.BAD_REQUEST);\n            return;\n        }\n        debug('handshaking client \"%s\"', id);\n        try {\n            var transport = this.createTransport(transportName, req);\n            if (\"polling\" === transportName) {\n                transport.maxHttpBufferSize = this.opts.maxHttpBufferSize;\n                transport.httpCompression = this.opts.httpCompression;\n            }\n            else if (\"websocket\" === transportName) {\n                transport.perMessageDeflate = this.opts.perMessageDeflate;\n            }\n        }\n        catch (e) {\n            debug('error handshaking to transport \"%s\"', transportName);\n            this.emit(\"connection_error\", {\n                req,\n                code: Server.errors.BAD_REQUEST,\n                message: Server.errorMessages[Server.errors.BAD_REQUEST],\n                context: {\n                    name: \"TRANSPORT_HANDSHAKE_ERROR\",\n                    error: e,\n                },\n            });\n            closeConnection(Server.errors.BAD_REQUEST);\n            return;\n        }\n        const socket = new socket_1.Socket(id, this, transport, req, protocol);\n        transport.on(\"headers\", (headers, req) => {\n            const isInitialRequest = !req._query.sid;\n            if (isInitialRequest) {\n                if (this.opts.cookie) {\n                    headers[\"Set-Cookie\"] = [\n                        // @ts-ignore\n                        (0, cookie_1.serialize)(this.opts.cookie.name, id, this.opts.cookie),\n                    ];\n                }\n                this.emit(\"initial_headers\", headers, req);\n            }\n            this.emit(\"headers\", headers, req);\n        });\n        transport.onRequest(req);\n        this.clients[id] = socket;\n        this.clientsCount++;\n        socket.once(\"close\", () => {\n            delete this.clients[id];\n            this.clientsCount--;\n        });\n        this.emit(\"connection\", socket);\n        return transport;\n    }\n    async onWebTransportSession(session) {\n        const timeout = setTimeout(() => {\n            debug(\"the client failed to establish a bidirectional stream in the given period\");\n            session.close();\n        }, this.opts.upgradeTimeout);\n        const streamReader = session.incomingBidirectionalStreams.getReader();\n        const result = await streamReader.read();\n        if (result.done) {\n            debug(\"session is closed\");\n            return;\n        }\n        const stream = result.value;\n        const transformStream = (0, engine_io_parser_1.createPacketDecoderStream)(this.opts.maxHttpBufferSize, \"nodebuffer\");\n        const reader = stream.readable.pipeThrough(transformStream).getReader();\n        // reading the first packet of the stream\n        const { value, done } = await reader.read();\n        if (done) {\n            debug(\"stream is closed\");\n            return;\n        }\n        clearTimeout(timeout);\n        if (value.type !== \"open\") {\n            debug(\"invalid WebTransport handshake\");\n            return session.close();\n        }\n        if (value.data === undefined) {\n            const transport = new webtransport_1.WebTransport(session, stream, reader);\n            // note: we cannot use \"this.generateId()\", because there is no \"req\" argument\n            const id = base64id.generateId();\n            debug('handshaking client \"%s\" (WebTransport)', id);\n            const socket = new socket_1.Socket(id, this, transport, null, 4);\n            this.clients[id] = socket;\n            this.clientsCount++;\n            socket.once(\"close\", () => {\n                delete this.clients[id];\n                this.clientsCount--;\n            });\n            this.emit(\"connection\", socket);\n            return;\n        }\n        const sid = parseSessionId(value.data);\n        if (!sid) {\n            debug(\"invalid WebTransport handshake\");\n            return session.close();\n        }\n        const client = this.clients[sid];\n        if (!client) {\n            debug(\"upgrade attempt for closed client\");\n            session.close();\n        }\n        else if (client.upgrading) {\n            debug(\"transport has already been trying to upgrade\");\n            session.close();\n        }\n        else if (client.upgraded) {\n            debug(\"transport had already been upgraded\");\n            session.close();\n        }\n        else {\n            debug(\"upgrading existing transport\");\n            const transport = new webtransport_1.WebTransport(session, stream, reader);\n            client._maybeUpgrade(transport);\n        }\n    }\n}\nexports.BaseServer = BaseServer;\n/**\n * Protocol errors mappings.\n */\nBaseServer.errors = {\n    UNKNOWN_TRANSPORT: 0,\n    UNKNOWN_SID: 1,\n    BAD_HANDSHAKE_METHOD: 2,\n    BAD_REQUEST: 3,\n    FORBIDDEN: 4,\n    UNSUPPORTED_PROTOCOL_VERSION: 5,\n};\nBaseServer.errorMessages = {\n    0: \"Transport unknown\",\n    1: \"Session ID unknown\",\n    2: \"Bad handshake method\",\n    3: \"Bad request\",\n    4: \"Forbidden\",\n    5: \"Unsupported protocol version\",\n};\n/**\n * Exposes a subset of the http.ServerResponse interface, in order to be able to apply the middlewares to an upgrade\n * request.\n *\n * @see https://nodejs.org/api/http.html#class-httpserverresponse\n */\nclass WebSocketResponse {\n    constructor(req, socket) {\n        this.req = req;\n        this.socket = socket;\n        // temporarily store the response headers on the req object (see the \"headers\" event)\n        req[kResponseHeaders] = {};\n    }\n    setHeader(name, value) {\n        this.req[kResponseHeaders][name] = value;\n    }\n    getHeader(name) {\n        return this.req[kResponseHeaders][name];\n    }\n    removeHeader(name) {\n        delete this.req[kResponseHeaders][name];\n    }\n    write() { }\n    writeHead() { }\n    end() {\n        // we could return a proper error code, but the WebSocket client will emit an \"error\" event anyway.\n        this.socket.destroy();\n    }\n}\n/**\n * An Engine.IO server based on Node.js built-in HTTP server and the `ws` package for WebSocket connections.\n */\nclass Server extends BaseServer {\n    /**\n     * Initialize websocket server\n     *\n     * @protected\n     */\n    init() {\n        if (!~this.opts.transports.indexOf(\"websocket\"))\n            return;\n        if (this.ws)\n            this.ws.close();\n        this.ws = new this.opts.wsEngine({\n            noServer: true,\n            clientTracking: false,\n            perMessageDeflate: this.opts.perMessageDeflate,\n            maxPayload: this.opts.maxHttpBufferSize,\n        });\n        if (typeof this.ws.on === \"function\") {\n            this.ws.on(\"headers\", (headersArray, req) => {\n                // note: 'ws' uses an array of headers, while Engine.IO uses an object (response.writeHead() accepts both formats)\n                // we could also try to parse the array and then sync the values, but that will be error-prone\n                const additionalHeaders = req[kResponseHeaders] || {};\n                delete req[kResponseHeaders];\n                const isInitialRequest = !req._query.sid;\n                if (isInitialRequest) {\n                    this.emit(\"initial_headers\", additionalHeaders, req);\n                }\n                this.emit(\"headers\", additionalHeaders, req);\n                debug(\"writing headers: %j\", additionalHeaders);\n                Object.keys(additionalHeaders).forEach((key) => {\n                    headersArray.push(`${key}: ${additionalHeaders[key]}`);\n                });\n            });\n        }\n    }\n    cleanup() {\n        if (this.ws) {\n            debug(\"closing webSocketServer\");\n            this.ws.close();\n            // don't delete this.ws because it can be used again if the http server starts listening again\n        }\n    }\n    /**\n     * Prepares a request by processing the query string.\n     *\n     * @private\n     */\n    prepare(req) {\n        // try to leverage pre-existing `req._query` (e.g: from connect)\n        if (!req._query) {\n            req._query = (~req.url.indexOf(\"?\") ? qs.parse((0, url_1.parse)(req.url).query) : {});\n        }\n    }\n    createTransport(transportName, req) {\n        return new transports_1.default[transportName](req);\n    }\n    /**\n     * Handles an Engine.IO HTTP request.\n     *\n     * @param {EngineRequest} req\n     * @param {ServerResponse} res\n     */\n    handleRequest(req, res) {\n        debug('handling \"%s\" http request \"%s\"', req.method, req.url);\n        this.prepare(req);\n        req.res = res;\n        const callback = (errorCode, errorContext) => {\n            if (errorCode !== undefined) {\n                this.emit(\"connection_error\", {\n                    req,\n                    code: errorCode,\n                    message: Server.errorMessages[errorCode],\n                    context: errorContext,\n                });\n                abortRequest(res, errorCode, errorContext);\n                return;\n            }\n            if (req._query.sid) {\n                debug(\"setting new request for existing client\");\n                this.clients[req._query.sid].transport.onRequest(req);\n            }\n            else {\n                const closeConnection = (errorCode, errorContext) => abortRequest(res, errorCode, errorContext);\n                this.handshake(req._query.transport, req, closeConnection);\n            }\n        };\n        this._applyMiddlewares(req, res, (err) => {\n            if (err) {\n                callback(Server.errors.BAD_REQUEST, { name: \"MIDDLEWARE_FAILURE\" });\n            }\n            else {\n                this.verify(req, false, callback);\n            }\n        });\n    }\n    /**\n     * Handles an Engine.IO HTTP Upgrade.\n     */\n    handleUpgrade(req, socket, upgradeHead) {\n        this.prepare(req);\n        const res = new WebSocketResponse(req, socket);\n        const callback = (errorCode, errorContext) => {\n            if (errorCode !== undefined) {\n                this.emit(\"connection_error\", {\n                    req,\n                    code: errorCode,\n                    message: Server.errorMessages[errorCode],\n                    context: errorContext,\n                });\n                abortUpgrade(socket, errorCode, errorContext);\n                return;\n            }\n            const head = Buffer.from(upgradeHead);\n            upgradeHead = null;\n            // some middlewares (like express-session) wait for the writeHead() call to flush their headers\n            // see https://github.com/expressjs/session/blob/1010fadc2f071ddf2add94235d72224cf65159c6/index.js#L220-L244\n            res.writeHead();\n            // delegate to ws\n            this.ws.handleUpgrade(req, socket, head, (websocket) => {\n                this.onWebSocket(req, socket, websocket);\n            });\n        };\n        this._applyMiddlewares(req, res, (err) => {\n            if (err) {\n                callback(Server.errors.BAD_REQUEST, { name: \"MIDDLEWARE_FAILURE\" });\n            }\n            else {\n                this.verify(req, true, callback);\n            }\n        });\n    }\n    /**\n     * Called upon a ws.io connection.\n     *\n     * @param {ws.Socket} websocket\n     * @private\n     */\n    onWebSocket(req, socket, websocket) {\n        websocket.on(\"error\", onUpgradeError);\n        if (transports_1.default[req._query.transport] !== undefined &&\n            !transports_1.default[req._query.transport].prototype.handlesUpgrades) {\n            debug(\"transport doesnt handle upgraded requests\");\n            websocket.close();\n            return;\n        }\n        // get client id\n        const id = req._query.sid;\n        // keep a reference to the ws.Socket\n        req.websocket = websocket;\n        if (id) {\n            const client = this.clients[id];\n            if (!client) {\n                debug(\"upgrade attempt for closed client\");\n                websocket.close();\n            }\n            else if (client.upgrading) {\n                debug(\"transport has already been trying to upgrade\");\n                websocket.close();\n            }\n            else if (client.upgraded) {\n                debug(\"transport had already been upgraded\");\n                websocket.close();\n            }\n            else {\n                debug(\"upgrading existing transport\");\n                // transport error handling takes over\n                websocket.removeListener(\"error\", onUpgradeError);\n                const transport = this.createTransport(req._query.transport, req);\n                transport.perMessageDeflate = this.opts.perMessageDeflate;\n                client._maybeUpgrade(transport);\n            }\n        }\n        else {\n            const closeConnection = (errorCode, errorContext) => abortUpgrade(socket, errorCode, errorContext);\n            this.handshake(req._query.transport, req, closeConnection);\n        }\n        function onUpgradeError() {\n            debug(\"websocket error before upgrade\");\n            // websocket.close() not needed\n        }\n    }\n    /**\n     * Captures upgrade requests for a http.Server.\n     *\n     * @param {http.Server} server\n     * @param {Object} options\n     */\n    attach(server, options = {}) {\n        const path = this._computePath(options);\n        const destroyUpgradeTimeout = options.destroyUpgradeTimeout || 1000;\n        function check(req) {\n            // TODO use `path === new URL(...).pathname` in the next major release (ref: https://nodejs.org/api/url.html)\n            return path === req.url.slice(0, path.length);\n        }\n        // cache and clean up listeners\n        const listeners = server.listeners(\"request\").slice(0);\n        server.removeAllListeners(\"request\");\n        server.on(\"close\", this.close.bind(this));\n        server.on(\"listening\", this.init.bind(this));\n        // add request handler\n        server.on(\"request\", (req, res) => {\n            if (check(req)) {\n                debug('intercepting request for path \"%s\"', path);\n                this.handleRequest(req, res);\n            }\n            else {\n                let i = 0;\n                const l = listeners.length;\n                for (; i < l; i++) {\n                    listeners[i].call(server, req, res);\n                }\n            }\n        });\n        if (~this.opts.transports.indexOf(\"websocket\")) {\n            server.on(\"upgrade\", (req, socket, head) => {\n                if (check(req)) {\n                    this.handleUpgrade(req, socket, head);\n                }\n                else if (false !== options.destroyUpgrade) {\n                    // default node behavior is to disconnect when no handlers\n                    // but by adding a handler, we prevent that\n                    // and if no eio thing handles the upgrade\n                    // then the socket needs to die!\n                    setTimeout(function () {\n                        // @ts-ignore\n                        if (socket.writable && socket.bytesWritten <= 0) {\n                            socket.on(\"error\", (e) => {\n                                debug(\"error while destroying upgrade: %s\", e.message);\n                            });\n                            return socket.end();\n                        }\n                    }, destroyUpgradeTimeout);\n                }\n            });\n        }\n    }\n}\nexports.Server = Server;\n/**\n * Close the HTTP long-polling request\n *\n * @param res - the response object\n * @param errorCode - the error code\n * @param errorContext - additional error context\n *\n * @private\n */\nfunction abortRequest(res, errorCode, errorContext) {\n    const statusCode = errorCode === Server.errors.FORBIDDEN ? 403 : 400;\n    const message = errorContext && errorContext.message\n        ? errorContext.message\n        : Server.errorMessages[errorCode];\n    res.writeHead(statusCode, { \"Content-Type\": \"application/json\" });\n    res.end(JSON.stringify({\n        code: errorCode,\n        message,\n    }));\n}\n/**\n * Close the WebSocket connection\n *\n * @param {net.Socket} socket\n * @param {string} errorCode - the error code\n * @param {object} errorContext - additional error context\n */\nfunction abortUpgrade(socket, errorCode, errorContext = {}) {\n    socket.on(\"error\", () => {\n        debug(\"ignoring error from closed connection\");\n    });\n    if (socket.writable) {\n        const message = errorContext.message || Server.errorMessages[errorCode];\n        const length = Buffer.byteLength(message);\n        socket.write(\"HTTP/1.1 400 Bad Request\\r\\n\" +\n            \"Connection: close\\r\\n\" +\n            \"Content-type: text/html\\r\\n\" +\n            \"Content-Length: \" +\n            length +\n            \"\\r\\n\" +\n            \"\\r\\n\" +\n            message);\n    }\n    socket.destroy();\n}\n/* eslint-disable */\n/**\n * From https://github.com/nodejs/node/blob/v8.4.0/lib/_http_common.js#L303-L354\n *\n * True if val contains an invalid field-vchar\n *  field-value    = *( field-content / obs-fold )\n *  field-content  = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n *  field-vchar    = VCHAR / obs-text\n *\n * checkInvalidHeaderChar() is currently designed to be inlinable by v8,\n * so take care when making changes to the implementation so that the source\n * code size does not exceed v8's default max_inlined_source_size setting.\n **/\n// prettier-ignore\nconst validHdrChars = [\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, // 0 - 15\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 32 - 47\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 48 - 63\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 80 - 95\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, // 112 - 127\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 128 ...\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\n    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 // ... 255\n];\nfunction checkInvalidHeaderChar(val) {\n    val += \"\";\n    if (val.length < 1)\n        return false;\n    if (!validHdrChars[val.charCodeAt(0)]) {\n        debug('invalid header, index 0, char \"%s\"', val.charCodeAt(0));\n        return true;\n    }\n    if (val.length < 2)\n        return false;\n    if (!validHdrChars[val.charCodeAt(1)]) {\n        debug('invalid header, index 1, char \"%s\"', val.charCodeAt(1));\n        return true;\n    }\n    if (val.length < 3)\n        return false;\n    if (!validHdrChars[val.charCodeAt(2)]) {\n        debug('invalid header, index 2, char \"%s\"', val.charCodeAt(2));\n        return true;\n    }\n    if (val.length < 4)\n        return false;\n    if (!validHdrChars[val.charCodeAt(3)]) {\n        debug('invalid header, index 3, char \"%s\"', val.charCodeAt(3));\n        return true;\n    }\n    for (let i = 4; i < val.length; ++i) {\n        if (!validHdrChars[val.charCodeAt(i)]) {\n            debug('invalid header, index \"%i\", char \"%s\"', i, val.charCodeAt(i));\n            return true;\n        }\n    }\n    return false;\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2729, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/transports-uws/polling.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Polling = void 0;\nconst transport_1 = require(\"../transport\");\nconst zlib_1 = require(\"zlib\");\nconst accepts = require(\"accepts\");\nconst debug_1 = require(\"debug\");\nconst debug = (0, debug_1.default)(\"engine:polling\");\nconst compressionMethods = {\n    gzip: zlib_1.createGzip,\n    deflate: zlib_1.createDeflate,\n};\nclass Polling extends transport_1.Transport {\n    /**\n     * HTTP polling constructor.\n     */\n    constructor(req) {\n        super(req);\n        this.closeTimeout = 30 * 1000;\n    }\n    /**\n     * Transport name\n     */\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Overrides onRequest.\n     *\n     * @param req\n     *\n     * @private\n     */\n    onRequest(req) {\n        const res = req.res;\n        // remove the reference to the ServerResponse object (as the first request of the session is kept in memory by default)\n        req.res = null;\n        if (req.getMethod() === \"get\") {\n            this.onPollRequest(req, res);\n        }\n        else if (req.getMethod() === \"post\") {\n            this.onDataRequest(req, res);\n        }\n        else {\n            res.writeStatus(\"500 Internal Server Error\");\n            res.end();\n        }\n    }\n    /**\n     * The client sends a request awaiting for us to send data.\n     *\n     * @private\n     */\n    onPollRequest(req, res) {\n        if (this.req) {\n            debug(\"request overlap\");\n            // assert: this.res, '.req and .res should be (un)set together'\n            this.onError(\"overlap from client\");\n            res.writeStatus(\"500 Internal Server Error\");\n            res.end();\n            return;\n        }\n        debug(\"setting request\");\n        this.req = req;\n        this.res = res;\n        const onClose = () => {\n            this.writable = false;\n            this.onError(\"poll connection closed prematurely\");\n        };\n        const cleanup = () => {\n            this.req = this.res = null;\n        };\n        req.cleanup = cleanup;\n        res.onAborted(onClose);\n        this.writable = true;\n        this.emit(\"ready\");\n        // if we're still writable but had a pending close, trigger an empty send\n        if (this.writable && this.shouldClose) {\n            debug(\"triggering empty send to append close packet\");\n            this.send([{ type: \"noop\" }]);\n        }\n    }\n    /**\n     * The client sends a request with data.\n     *\n     * @private\n     */\n    onDataRequest(req, res) {\n        if (this.dataReq) {\n            // assert: this.dataRes, '.dataReq and .dataRes should be (un)set together'\n            this.onError(\"data request overlap from client\");\n            res.writeStatus(\"500 Internal Server Error\");\n            res.end();\n            return;\n        }\n        const expectedContentLength = Number(req.headers[\"content-length\"]);\n        if (!expectedContentLength) {\n            this.onError(\"content-length header required\");\n            res.writeStatus(\"411 Length Required\").end();\n            return;\n        }\n        if (expectedContentLength > this.maxHttpBufferSize) {\n            this.onError(\"payload too large\");\n            res.writeStatus(\"413 Payload Too Large\").end();\n            return;\n        }\n        const isBinary = \"application/octet-stream\" === req.headers[\"content-type\"];\n        if (isBinary && this.protocol === 4) {\n            return this.onError(\"invalid content\");\n        }\n        this.dataReq = req;\n        this.dataRes = res;\n        let buffer;\n        let offset = 0;\n        const headers = {\n            // text/html is required instead of text/plain to avoid an\n            // unwanted download dialog on certain user-agents (GH-43)\n            \"Content-Type\": \"text/html\",\n        };\n        this.headers(req, headers);\n        for (let key in headers) {\n            res.writeHeader(key, String(headers[key]));\n        }\n        const onEnd = (buffer) => {\n            this.onData(buffer.toString());\n            this.onDataRequestCleanup();\n            res.cork(() => {\n                res.end(\"ok\");\n            });\n        };\n        res.onAborted(() => {\n            this.onDataRequestCleanup();\n            this.onError(\"data request connection closed prematurely\");\n        });\n        res.onData((arrayBuffer, isLast) => {\n            const totalLength = offset + arrayBuffer.byteLength;\n            if (totalLength > expectedContentLength) {\n                this.onError(\"content-length mismatch\");\n                res.close(); // calls onAborted\n                return;\n            }\n            if (!buffer) {\n                if (isLast) {\n                    onEnd(Buffer.from(arrayBuffer));\n                    return;\n                }\n                buffer = Buffer.allocUnsafe(expectedContentLength);\n            }\n            Buffer.from(arrayBuffer).copy(buffer, offset);\n            if (isLast) {\n                if (totalLength != expectedContentLength) {\n                    this.onError(\"content-length mismatch\");\n                    res.writeStatus(\"400 Content-Length Mismatch\").end();\n                    this.onDataRequestCleanup();\n                    return;\n                }\n                onEnd(buffer);\n                return;\n            }\n            offset = totalLength;\n        });\n    }\n    /**\n     * Cleanup request.\n     *\n     * @private\n     */\n    onDataRequestCleanup() {\n        this.dataReq = this.dataRes = null;\n    }\n    /**\n     * Processes the incoming data payload.\n     *\n     * @param {String} encoded payload\n     * @private\n     */\n    onData(data) {\n        debug('received \"%s\"', data);\n        const callback = (packet) => {\n            if (\"close\" === packet.type) {\n                debug(\"got xhr close packet\");\n                this.onClose();\n                return false;\n            }\n            this.onPacket(packet);\n        };\n        if (this.protocol === 3) {\n            this.parser.decodePayload(data, callback);\n        }\n        else {\n            this.parser.decodePayload(data).forEach(callback);\n        }\n    }\n    /**\n     * Overrides onClose.\n     *\n     * @private\n     */\n    onClose() {\n        if (this.writable) {\n            // close pending poll request\n            this.send([{ type: \"noop\" }]);\n        }\n        super.onClose();\n    }\n    /**\n     * Writes a packet payload.\n     *\n     * @param {Object} packet\n     * @private\n     */\n    send(packets) {\n        this.writable = false;\n        if (this.shouldClose) {\n            debug(\"appending close packet to payload\");\n            packets.push({ type: \"close\" });\n            this.shouldClose();\n            this.shouldClose = null;\n        }\n        const doWrite = (data) => {\n            const compress = packets.some((packet) => {\n                return packet.options && packet.options.compress;\n            });\n            this.write(data, { compress });\n        };\n        if (this.protocol === 3) {\n            this.parser.encodePayload(packets, this.supportsBinary, doWrite);\n        }\n        else {\n            this.parser.encodePayload(packets, doWrite);\n        }\n    }\n    /**\n     * Writes data as response to poll request.\n     *\n     * @param {String} data\n     * @param {Object} options\n     * @private\n     */\n    write(data, options) {\n        debug('writing \"%s\"', data);\n        this.doWrite(data, options, () => {\n            this.req.cleanup();\n            this.emit(\"drain\");\n        });\n    }\n    /**\n     * Performs the write.\n     *\n     * @private\n     */\n    doWrite(data, options, callback) {\n        // explicit UTF-8 is required for pages not served under utf\n        const isString = typeof data === \"string\";\n        const contentType = isString\n            ? \"text/plain; charset=UTF-8\"\n            : \"application/octet-stream\";\n        const headers = {\n            \"Content-Type\": contentType,\n        };\n        const respond = (data) => {\n            this.headers(this.req, headers);\n            this.res.cork(() => {\n                Object.keys(headers).forEach((key) => {\n                    this.res.writeHeader(key, String(headers[key]));\n                });\n                this.res.end(data);\n            });\n            callback();\n        };\n        if (!this.httpCompression || !options.compress) {\n            respond(data);\n            return;\n        }\n        const len = isString ? Buffer.byteLength(data) : data.length;\n        if (len < this.httpCompression.threshold) {\n            respond(data);\n            return;\n        }\n        const encoding = accepts(this.req).encodings([\"gzip\", \"deflate\"]);\n        if (!encoding) {\n            respond(data);\n            return;\n        }\n        this.compress(data, encoding, (err, data) => {\n            if (err) {\n                this.res.writeStatus(\"500 Internal Server Error\");\n                this.res.end();\n                callback(err);\n                return;\n            }\n            headers[\"Content-Encoding\"] = encoding;\n            respond(data);\n        });\n    }\n    /**\n     * Compresses data.\n     *\n     * @private\n     */\n    compress(data, encoding, callback) {\n        debug(\"compressing\");\n        const buffers = [];\n        let nread = 0;\n        compressionMethods[encoding](this.httpCompression)\n            .on(\"error\", callback)\n            .on(\"data\", function (chunk) {\n            buffers.push(chunk);\n            nread += chunk.length;\n        })\n            .on(\"end\", function () {\n            callback(null, Buffer.concat(buffers, nread));\n        })\n            .end(data);\n    }\n    /**\n     * Closes the transport.\n     *\n     * @private\n     */\n    doClose(fn) {\n        debug(\"closing\");\n        let closeTimeoutTimer;\n        const onClose = () => {\n            clearTimeout(closeTimeoutTimer);\n            fn();\n            this.onClose();\n        };\n        if (this.writable) {\n            debug(\"transport writable - closing right away\");\n            this.send([{ type: \"close\" }]);\n            onClose();\n        }\n        else if (this.discarded) {\n            debug(\"transport discarded - closing right away\");\n            onClose();\n        }\n        else {\n            debug(\"transport not writable - buffering orderly close\");\n            this.shouldClose = onClose;\n            closeTimeoutTimer = setTimeout(onClose, this.closeTimeout);\n        }\n    }\n    /**\n     * Returns headers for a response.\n     *\n     * @param req - request\n     * @param {Object} extra headers\n     * @private\n     */\n    headers(req, headers) {\n        headers = headers || {};\n        // prevent XSS warnings on IE\n        // https://github.com/LearnBoost/socket.io/pull/1333\n        const ua = req.headers[\"user-agent\"];\n        if (ua && (~ua.indexOf(\";MSIE\") || ~ua.indexOf(\"Trident/\"))) {\n            headers[\"X-XSS-Protection\"] = \"0\";\n        }\n        headers[\"cache-control\"] = \"no-store\";\n        this.emit(\"headers\", headers, req);\n        return headers;\n    }\n}\nexports.Polling = Polling;\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3093, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/transports-uws/websocket.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebSocket = void 0;\nconst transport_1 = require(\"../transport\");\nconst debug_1 = require(\"debug\");\nconst debug = (0, debug_1.default)(\"engine:ws\");\nclass WebSocket extends transport_1.Transport {\n    /**\n     * WebSocket transport\n     *\n     * @param req\n     */\n    constructor(req) {\n        super(req);\n        this.writable = false;\n        this.perMessageDeflate = null;\n    }\n    /**\n     * Transport name\n     */\n    get name() {\n        return \"websocket\";\n    }\n    /**\n     * Advertise upgrade support.\n     */\n    get handlesUpgrades() {\n        return true;\n    }\n    /**\n     * Writes a packet payload.\n     *\n     * @param {Array} packets\n     * @private\n     */\n    send(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const isLast = i + 1 === packets.length;\n            const send = (data) => {\n                const isBinary = typeof data !== \"string\";\n                const compress = this.perMessageDeflate &&\n                    Buffer.byteLength(data) > this.perMessageDeflate.threshold;\n                debug('writing \"%s\"', data);\n                this.socket.send(data, isBinary, compress);\n                if (isLast) {\n                    this.emit(\"drain\");\n                    this.writable = true;\n                    this.emit(\"ready\");\n                }\n            };\n            if (packet.options && typeof packet.options.wsPreEncoded === \"string\") {\n                send(packet.options.wsPreEncoded);\n            }\n            else {\n                this.parser.encodePacket(packet, this.supportsBinary, send);\n            }\n        }\n    }\n    /**\n     * Closes the transport.\n     *\n     * @private\n     */\n    doClose(fn) {\n        debug(\"closing\");\n        fn && fn();\n        // call fn first since socket.end() immediately emits a \"close\" event\n        this.socket.end();\n    }\n}\nexports.WebSocket = WebSocket;\n"],"names":[],"mappings":"AA2CoB;AA3CpB;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,SAAS,GAAG,KAAK;AACzB,MAAM;AACN,MAAM;AACN,MAAM,QAAQ,CAAC,GAAG,QAAQ,OAAO,EAAE;AACnC,MAAM,kBAAkB,YAAY,SAAS;IAWzC;;KAEC,GACD,IAAI,OAAO;QACP,OAAO;IACX;IACA;;KAEC,GACD,IAAI,kBAAkB;QAClB,OAAO;IACX;IACA;;;;;KAKC,GACD,KAAK,OAAO,EAAE;QACV,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;YACrC,MAAM,SAAS,OAAO,CAAC,EAAE;YACzB,MAAM,SAAS,IAAI,MAAM,QAAQ,MAAM;YACvC,MAAM,OAAO,CAAC;gBACV,MAAM,WAAW,OAAO,SAAS;gBACjC,MAAM,WAAW,IAAI,CAAC,iBAAiB,IACnC,wKAAM,CAAC,UAAU,CAAC,QAAQ,IAAI,CAAC,iBAAiB,CAAC,SAAS;gBAC9D,MAAM,gBAAgB;gBACtB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,UAAU;gBACjC,IAAI,QAAQ;oBACR,IAAI,CAAC,IAAI,CAAC;oBACV,IAAI,CAAC,QAAQ,GAAG;oBAChB,IAAI,CAAC,IAAI,CAAC;gBACd;YACJ;YACA,IAAI,OAAO,OAAO,IAAI,OAAO,OAAO,OAAO,CAAC,YAAY,KAAK,UAAU;gBACnE,KAAK,OAAO,OAAO,CAAC,YAAY;YACpC,OACK;gBACD,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,IAAI,CAAC,cAAc,EAAE;YAC1D;QACJ;IACJ;IACA;;;;KAIC,GACD,QAAQ,EAAE,EAAE;QACR,MAAM;QACN,MAAM;QACN,qEAAqE;QACrE,IAAI,CAAC,MAAM,CAAC,GAAG;IACnB;IA/DA;;;;KAIC,GACD,YAAY,GAAG,CAAE;QACb,KAAK,CAAC;QACN,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,iBAAiB,GAAG;IAC7B;AAuDJ;AACA,QAAQ,SAAS,GAAG","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/transports-uws/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst polling_1 = require(\"./polling\");\nconst websocket_1 = require(\"./websocket\");\nexports.default = {\n    polling: polling_1.Polling,\n    websocket: websocket_1.WebSocket,\n};\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,MAAM;AACN,MAAM;AACN,QAAQ,OAAO,GAAG;IACd,SAAS,UAAU,OAAO;IAC1B,WAAW,YAAY,SAAS;AACpC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3179, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/userver.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uServer = void 0;\nconst debug_1 = require(\"debug\");\nconst server_1 = require(\"./server\");\nconst transports_uws_1 = require(\"./transports-uws\");\nconst debug = (0, debug_1.default)(\"engine:uws\");\n/**\n * An Engine.IO server based on the `uWebSockets.js` package.\n */\n// TODO export it into its own package\nclass uServer extends server_1.BaseServer {\n    init() { }\n    cleanup() { }\n    /**\n     * Prepares a request by processing the query string.\n     *\n     * @private\n     */\n    prepare(req, res) {\n        req.method = req.getMethod().toUpperCase();\n        req.url = req.getUrl();\n        const params = new URLSearchParams(req.getQuery());\n        req._query = Object.fromEntries(params.entries());\n        req.headers = {};\n        req.forEach((key, value) => {\n            req.headers[key] = value;\n        });\n        req.connection = {\n            remoteAddress: Buffer.from(res.getRemoteAddressAsText()).toString(),\n        };\n        res.onAborted(() => {\n            debug(\"response has been aborted\");\n        });\n    }\n    createTransport(transportName, req) {\n        return new transports_uws_1.default[transportName](req);\n    }\n    /**\n     * Attach the engine to a ÂµWebSockets.js server\n     * @param app\n     * @param options\n     */\n    attach(app /* : TemplatedApp */, options = {}) {\n        const path = this._computePath(options);\n        app\n            .any(path, this.handleRequest.bind(this))\n            //\n            .ws(path, {\n            compression: options.compression,\n            idleTimeout: options.idleTimeout,\n            maxBackpressure: options.maxBackpressure,\n            maxPayloadLength: this.opts.maxHttpBufferSize,\n            upgrade: this.handleUpgrade.bind(this),\n            open: (ws) => {\n                const transport = ws.getUserData().transport;\n                transport.socket = ws;\n                transport.writable = true;\n                transport.emit(\"ready\");\n            },\n            message: (ws, message, isBinary) => {\n                ws.getUserData().transport.onData(isBinary ? message : Buffer.from(message).toString());\n            },\n            close: (ws, code, message) => {\n                ws.getUserData().transport.onClose(code, message);\n            },\n        });\n    }\n    _applyMiddlewares(req, res, callback) {\n        if (this.middlewares.length === 0) {\n            return callback();\n        }\n        // needed to buffer headers until the status is computed\n        req.res = new ResponseWrapper(res);\n        super._applyMiddlewares(req, req.res, (err) => {\n            // some middlewares (like express-session) wait for the writeHead() call to flush their headers\n            // see https://github.com/expressjs/session/blob/1010fadc2f071ddf2add94235d72224cf65159c6/index.js#L220-L244\n            req.res.writeHead();\n            callback(err);\n        });\n    }\n    handleRequest(res, req) {\n        debug('handling \"%s\" http request \"%s\"', req.getMethod(), req.getUrl());\n        this.prepare(req, res);\n        req.res = res;\n        const callback = (errorCode, errorContext) => {\n            if (errorCode !== undefined) {\n                this.emit(\"connection_error\", {\n                    req,\n                    code: errorCode,\n                    message: server_1.Server.errorMessages[errorCode],\n                    context: errorContext,\n                });\n                this.abortRequest(req.res, errorCode, errorContext);\n                return;\n            }\n            if (req._query.sid) {\n                debug(\"setting new request for existing client\");\n                // @ts-ignore\n                this.clients[req._query.sid].transport.onRequest(req);\n            }\n            else {\n                const closeConnection = (errorCode, errorContext) => this.abortRequest(res, errorCode, errorContext);\n                this.handshake(req._query.transport, req, closeConnection);\n            }\n        };\n        this._applyMiddlewares(req, res, (err) => {\n            if (err) {\n                callback(server_1.Server.errors.BAD_REQUEST, { name: \"MIDDLEWARE_FAILURE\" });\n            }\n            else {\n                this.verify(req, false, callback);\n            }\n        });\n    }\n    handleUpgrade(res, req, context) {\n        debug(\"on upgrade\");\n        this.prepare(req, res);\n        req.res = res;\n        const callback = async (errorCode, errorContext) => {\n            if (errorCode !== undefined) {\n                this.emit(\"connection_error\", {\n                    req,\n                    code: errorCode,\n                    message: server_1.Server.errorMessages[errorCode],\n                    context: errorContext,\n                });\n                this.abortRequest(res, errorCode, errorContext);\n                return;\n            }\n            const id = req._query.sid;\n            let transport;\n            if (id) {\n                const client = this.clients[id];\n                if (!client) {\n                    debug(\"upgrade attempt for closed client\");\n                    return res.close();\n                }\n                else if (client.upgrading) {\n                    debug(\"transport has already been trying to upgrade\");\n                    return res.close();\n                }\n                else if (client.upgraded) {\n                    debug(\"transport had already been upgraded\");\n                    return res.close();\n                }\n                else {\n                    debug(\"upgrading existing transport\");\n                    transport = this.createTransport(req._query.transport, req);\n                    client._maybeUpgrade(transport);\n                }\n            }\n            else {\n                transport = await this.handshake(req._query.transport, req, (errorCode, errorContext) => this.abortRequest(res, errorCode, errorContext));\n                if (!transport) {\n                    return;\n                }\n            }\n            // calling writeStatus() triggers the flushing of any header added in a middleware\n            req.res.writeStatus(\"101 Switching Protocols\");\n            res.upgrade({\n                transport,\n            }, req.getHeader(\"sec-websocket-key\"), req.getHeader(\"sec-websocket-protocol\"), req.getHeader(\"sec-websocket-extensions\"), context);\n        };\n        this._applyMiddlewares(req, res, (err) => {\n            if (err) {\n                callback(server_1.Server.errors.BAD_REQUEST, { name: \"MIDDLEWARE_FAILURE\" });\n            }\n            else {\n                this.verify(req, true, callback);\n            }\n        });\n    }\n    abortRequest(res, errorCode, errorContext) {\n        const statusCode = errorCode === server_1.Server.errors.FORBIDDEN\n            ? \"403 Forbidden\"\n            : \"400 Bad Request\";\n        const message = errorContext && errorContext.message\n            ? errorContext.message\n            : server_1.Server.errorMessages[errorCode];\n        res.writeStatus(statusCode);\n        res.writeHeader(\"Content-Type\", \"application/json\");\n        res.end(JSON.stringify({\n            code: errorCode,\n            message,\n        }));\n    }\n}\nexports.uServer = uServer;\nclass ResponseWrapper {\n    constructor(res) {\n        this.res = res;\n        this.statusWritten = false;\n        this.headers = [];\n        this.isAborted = false;\n    }\n    set statusCode(status) {\n        if (!status) {\n            return;\n        }\n        // FIXME: handle all status codes?\n        this.writeStatus(status === 200 ? \"200 OK\" : \"204 No Content\");\n    }\n    writeHead(status) {\n        this.statusCode = status;\n    }\n    setHeader(key, value) {\n        if (Array.isArray(value)) {\n            value.forEach((val) => {\n                this.writeHeader(key, val);\n            });\n        }\n        else {\n            this.writeHeader(key, value);\n        }\n    }\n    removeHeader() {\n        // FIXME: not implemented\n    }\n    // needed by vary: https://github.com/jshttp/vary/blob/5d725d059b3871025cf753e9dfa08924d0bcfa8f/index.js#L134\n    getHeader() { }\n    writeStatus(status) {\n        if (this.isAborted)\n            return;\n        this.res.writeStatus(status);\n        this.statusWritten = true;\n        this.writeBufferedHeaders();\n        return this;\n    }\n    writeHeader(key, value) {\n        if (this.isAborted)\n            return;\n        if (key === \"Content-Length\") {\n            // the content length is automatically added by uWebSockets.js\n            return;\n        }\n        if (this.statusWritten) {\n            this.res.writeHeader(key, value);\n        }\n        else {\n            this.headers.push([key, value]);\n        }\n    }\n    writeBufferedHeaders() {\n        this.headers.forEach(([key, value]) => {\n            this.res.writeHeader(key, value);\n        });\n    }\n    end(data) {\n        if (this.isAborted)\n            return;\n        this.res.cork(() => {\n            if (!this.statusWritten) {\n                // status will be inferred as \"200 OK\"\n                this.writeBufferedHeaders();\n            }\n            this.res.end(data);\n        });\n    }\n    onData(fn) {\n        if (this.isAborted)\n            return;\n        this.res.onData(fn);\n    }\n    onAborted(fn) {\n        if (this.isAborted)\n            return;\n        this.res.onAborted(() => {\n            // Any attempt to use the UWS response object after abort will throw!\n            this.isAborted = true;\n            fn();\n        });\n    }\n    cork(fn) {\n        if (this.isAborted)\n            return;\n        this.res.cork(fn);\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3450, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/node_modules/engine.io/build/engine.io.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.protocol = exports.Transport = exports.Socket = exports.uServer = exports.parser = exports.transports = exports.Server = void 0;\nexports.listen = listen;\nexports.attach = attach;\nconst http_1 = require(\"http\");\nconst server_1 = require(\"./server\");\nObject.defineProperty(exports, \"Server\", { enumerable: true, get: function () { return server_1.Server; } });\nconst index_1 = require(\"./transports/index\");\nexports.transports = index_1.default;\nconst parser = require(\"engine.io-parser\");\nexports.parser = parser;\nvar userver_1 = require(\"./userver\");\nObject.defineProperty(exports, \"uServer\", { enumerable: true, get: function () { return userver_1.uServer; } });\nvar socket_1 = require(\"./socket\");\nObject.defineProperty(exports, \"Socket\", { enumerable: true, get: function () { return socket_1.Socket; } });\nvar transport_1 = require(\"./transport\");\nObject.defineProperty(exports, \"Transport\", { enumerable: true, get: function () { return transport_1.Transport; } });\nexports.protocol = parser.protocol;\n/**\n * Creates an http.Server exclusively used for WS upgrades.\n *\n * @param {Number} port\n * @param {Function} callback\n * @param {Object} options\n * @return {Server} websocket.io server\n */\nfunction listen(port, options, fn) {\n    if (\"function\" === typeof options) {\n        fn = options;\n        options = {};\n    }\n    const server = (0, http_1.createServer)(function (req, res) {\n        res.writeHead(501);\n        res.end(\"Not Implemented\");\n    });\n    // create engine server\n    const engine = attach(server, options);\n    engine.httpServer = server;\n    server.listen(port, fn);\n    return engine;\n}\n/**\n * Captures upgrade requests for a http.Server.\n *\n * @param {http.Server} server\n * @param {Object} options\n * @return {Server} engine server\n */\nfunction attach(server, options) {\n    const engine = new server_1.Server(options);\n    engine.attach(server, options);\n    return engine;\n}\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,QAAQ,GAAG,QAAQ,SAAS,GAAG,QAAQ,MAAM,GAAG,QAAQ,OAAO,GAAG,QAAQ,MAAM,GAAG,QAAQ,UAAU,GAAG,QAAQ,MAAM,GAAG,KAAK;AACtI,QAAQ,MAAM,GAAG;AACjB,QAAQ,MAAM,GAAG;AACjB,MAAM;AACN,MAAM;AACN,OAAO,cAAc,CAAC,SAAS,UAAU;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,SAAS,MAAM;IAAE;AAAE;AAC1G,MAAM;AACN,QAAQ,UAAU,GAAG,QAAQ,OAAO;AACpC,MAAM;AACN,QAAQ,MAAM,GAAG;AACjB,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,WAAW;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,UAAU,OAAO;IAAE;AAAE;AAC7G,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,UAAU;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,SAAS,MAAM;IAAE;AAAE;AAC1G,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,aAAa;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,YAAY,SAAS;IAAE;AAAE;AACnH,QAAQ,QAAQ,GAAG,OAAO,QAAQ;AAClC;;;;;;;CAOC,GACD,SAAS,OAAO,IAAI,EAAE,OAAO,EAAE,EAAE;IAC7B,IAAI,eAAe,OAAO,SAAS;QAC/B,KAAK;QACL,UAAU,CAAC;IACf;IACA,MAAM,SAAS,CAAC,GAAG,OAAO,YAAY,EAAE,SAAU,GAAG,EAAE,GAAG;QACtD,IAAI,SAAS,CAAC;QACd,IAAI,GAAG,CAAC;IACZ;IACA,uBAAuB;IACvB,MAAM,SAAS,OAAO,QAAQ;IAC9B,OAAO,UAAU,GAAG;IACpB,OAAO,MAAM,CAAC,MAAM;IACpB,OAAO;AACX;AACA;;;;;;CAMC,GACD,SAAS,OAAO,MAAM,EAAE,OAAO;IAC3B,MAAM,SAAS,IAAI,SAAS,MAAM,CAAC;IACnC,OAAO,MAAM,CAAC,QAAQ;IACtB,OAAO;AACX","ignoreList":[0],"debugId":null}}]
}