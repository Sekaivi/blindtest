{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/src/components/blindtestOptions/Search.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function Search({ type }) {\r\n    const [query, setQuery] = useState(\"\");\r\n    const [limit, setLimit] = useState(25)\r\n    const router = useRouter();\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!query.trim()) return;\r\n        try {\r\n            let searchQuery;\r\n\r\n            // If user pasted a Deezer link:\r\n            if (query.includes(\"deezer.com\")) {\r\n                const res = await fetch(\"/api/resolve\", {\r\n                    method: \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify({ link: query }),\r\n                });\r\n\r\n                const data = await res.json();\r\n                if (data.error) throw new Error(data.error);\r\n                searchQuery = data.id;\r\n            } else {\r\n                searchQuery = query;\r\n            }\r\n            router.push(`/jeu/${type}/${encodeURIComponent(searchQuery)}?limit=${limit}`);\r\n        } catch (err) {\r\n            console.error(\"Erreur pendant la recherche :\", err);\r\n        }\r\n    }\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"flex items-end\">\r\n            <input type=\"text\" value={query} onChange={(e) => setQuery(e.target.value)}\r\n                placeholder=\"Rechercher\" className=\"border p-2 rounded-l\" />\r\n            <div className=\"flex flex-col gap-2\">\r\n                <label>Nombre de musique chargées</label>\r\n                <input type=\"number\" value={limit} onChange={(e) => setLimit(e.target.value)}\r\n                    placeholder=\"Limite\" className=\"border p-2 rounded-l\" />\r\n            </div>\r\n            <button type=\"submit\" className=\"bg-white text-black px-4 py-2 rounded-r\">\r\n                Créer mon blindtest :D\r\n            </button>\r\n        </form>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAIe,SAAS,OAAO,KAAQ;QAAR,EAAE,IAAI,EAAE,GAAR;;IAC3B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,MAAM,IAAI,IAAI;QACnB,IAAI;YACA,IAAI;YAEJ,gCAAgC;YAChC,IAAI,MAAM,QAAQ,CAAC,eAAe;gBAC9B,MAAM,MAAM,MAAM,MAAM,gBAAgB;oBACpC,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE,MAAM;oBAAM;gBACvC;gBAEA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,KAAK,KAAK,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK;gBAC1C,cAAc,KAAK,EAAE;YACzB,OAAO;gBACH,cAAc;YAClB;YACA,OAAO,IAAI,CAAC,AAAC,QAAe,OAAR,MAAK,KAA4C,OAAzC,mBAAmB,cAAa,WAAe,OAAN;QACzE,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,iCAAiC;QACnD;IACJ;IACA,qBACI,6LAAC;QAAK,UAAU;QAAc,WAAU;;0BACpC,6LAAC;gBAAM,MAAK;gBAAO,OAAO;gBAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACrE,aAAY;gBAAa,WAAU;;;;;;0BACvC,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;kCAAM;;;;;;kCACP,6LAAC;wBAAM,MAAK;wBAAS,OAAO;wBAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACvE,aAAY;wBAAS,WAAU;;;;;;;;;;;;0BAEvC,6LAAC;gBAAO,MAAK;gBAAS,WAAU;0BAA0C;;;;;;;;;;;;AAKtF;GA3CwB;;QAGL,kJAAS;;;KAHJ","debugId":null}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/src/components/Loading.jsx"],"sourcesContent":["'use client';\r\nimport React from 'react'\r\nimport { motion, useReducedMotion } from 'framer-motion'\r\n\r\n    export default function BlindtestLoader({ size = 50, color = 'bg-(--accent)', speed = 2 }) {\r\n    const shouldReduce = useReducedMotion()\r\n    const baseHeight = size * 0.4 // hauteur mini (40% de la taille)\r\n    const fullHeight = size // hauteur max\r\n    const barWidth = size / 3\r\n    const barStyle = {\r\n        width: `${barWidth}px`,\r\n        borderRadius: '6px',\r\n    }\r\n\r\n    const variants = {\r\n        animate: (i) => ({\r\n            height: [baseHeight, fullHeight, baseHeight, baseHeight],\r\n            transition: {\r\n                duration: speed,\r\n                repeat: Infinity,\r\n                ease: 'easeInOut',\r\n                delay: i * (speed / 4),\r\n                times: [0, 0.3, 0.6, 1],\r\n            },\r\n        }),\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center p-4 px-20\r\n        bg-[var(--middleground)] shadow-md border border-solid border-[var(--foreground)] rounded-[10px]\">\r\n            <div className=\"mb-3 text-center\">\r\n                <span className=\"sr-only\">Chargement de votre blindtest</span>\r\n                <h3 className=\"text-xl font-medium text-(--text) zalando-sans-expanded-regular\">\r\n                    Chargement de votre blindtest\r\n                </h3>\r\n            </div>\r\n\r\n            <div\r\n                role=\"status\"\r\n                aria-live=\"polite\"\r\n                aria-label=\"Chargement de votre blindtest\"\r\n                className=\"flex items-center gap-2 h-16 justify-center\"\r\n            >\r\n                {[0, 1, 2].map((i) =>\r\n                    shouldReduce ? (\r\n                        <div\r\n                            key={i}\r\n                            style={{ ...barStyle, height: `${baseHeight}px` }}\r\n                            className={`${color}`}\r\n                        />\r\n                    ) : (\r\n                        <motion.div\r\n                            key={i}\r\n                            custom={i}\r\n                            variants={variants}\r\n                            animate=\"animate\"\r\n                            style={barStyle}\r\n                            className={`${color} origin-bottom`}\r\n                        />\r\n                    )\r\n                )}\r\n            </div>\r\n\r\n            <p className=\"mt-2 text-md text-gray-500\">Veuillez patienter...</p>\r\n        </div>\r\n    )\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;;;AAFA;;;AAImB,SAAS,gBAAgB,KAAiD;QAAjD,EAAE,OAAO,EAAE,EAAE,QAAQ,eAAe,EAAE,QAAQ,CAAC,EAAE,GAAjD;;IACxC,MAAM,eAAe,IAAA,gOAAgB;IACrC,MAAM,aAAa,OAAO,IAAI,kCAAkC;;IAChE,MAAM,aAAa,KAAK,cAAc;;IACtC,MAAM,WAAW,OAAO;IACxB,MAAM,WAAW;QACb,OAAO,AAAC,GAAW,OAAT,UAAS;QACnB,cAAc;IAClB;IAEA,MAAM,WAAW;QACb,SAAS,CAAC,IAAM,CAAC;gBACb,QAAQ;oBAAC;oBAAY;oBAAY;oBAAY;iBAAW;gBACxD,YAAY;oBACR,UAAU;oBACV,QAAQ;oBACR,MAAM;oBACN,OAAO,IAAI,CAAC,QAAQ,CAAC;oBACrB,OAAO;wBAAC;wBAAG;wBAAK;wBAAK;qBAAE;gBAC3B;YACJ,CAAC;IACL;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAK,WAAU;kCAAU;;;;;;kCAC1B,6LAAC;wBAAG,WAAU;kCAAkE;;;;;;;;;;;;0BAKpF,6LAAC;gBACG,MAAK;gBACL,aAAU;gBACV,cAAW;gBACX,WAAU;0BAET;oBAAC;oBAAG;oBAAG;iBAAE,CAAC,GAAG,CAAC,CAAC,IACZ,6BACI,6LAAC;wBAEG,OAAO;4BAAE,GAAG,QAAQ;4BAAE,QAAQ,AAAC,GAAa,OAAX,YAAW;wBAAI;wBAChD,WAAW,AAAC,GAAQ,OAAN;uBAFT;;;;6CAKT,6LAAC,uMAAM,CAAC,GAAG;wBAEP,QAAQ;wBACR,UAAU;wBACV,SAAQ;wBACR,OAAO;wBACP,WAAW,AAAC,GAAQ,OAAN,OAAM;uBALf;;;;;;;;;;0BAWrB,6LAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAGtD;GA9D4B;;QACH,gOAAgB;;;KADb","debugId":null}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/src/components/TrackAudio.js"],"sourcesContent":["\"use client\";\r\nimport React, { forwardRef, useEffect, useState } from \"react\";\r\nimport { Play, Pause } from \"lucide-react\";\r\n\r\nconst TrackAudio = forwardRef(({ track, visible }, ref) => {\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [audioProgress, setAudioProgress] = useState(0); // 0..100\r\n    const [duration, setDuration] = useState(0);\r\n\r\n    // Sync src quand track change (sécurise si parent ne set pas src)\r\n    useEffect(() => {\r\n        if (!ref?.current) return;\r\n        const audio = ref.current;\r\n        if (track?.preview) {\r\n            if (audio.src !== track.preview) audio.src = track.preview;\r\n        }\r\n        // ne pas autoplay ici ; le parent contrôle play()\r\n    }, [track, ref]);\r\n\r\n    // Events : timeupdate, loadedmetadata, play/pause\r\n    useEffect(() => {\r\n        if (!ref?.current) return;\r\n        const audio = ref.current;\r\n\r\n        const onTimeUpdate = () => {\r\n            if (!audio.duration || isNaN(audio.duration)) {\r\n                setAudioProgress(0);\r\n                return;\r\n            }\r\n            const pct = (audio.currentTime / audio.duration) * 100;\r\n            setAudioProgress(pct);\r\n        };\r\n\r\n        const onLoaded = () => {\r\n            setDuration(audio.duration || 0);\r\n            onTimeUpdate();\r\n        };\r\n\r\n        const onPlay = () => setIsPlaying(true);\r\n        const onPause = () => setIsPlaying(false);\r\n\r\n        audio.addEventListener(\"timeupdate\", onTimeUpdate);\r\n        audio.addEventListener(\"loadedmetadata\", onLoaded);\r\n        audio.addEventListener(\"play\", onPlay);\r\n        audio.addEventListener(\"pause\", onPause);\r\n\r\n        // cleanup\r\n        return () => {\r\n            audio.removeEventListener(\"timeupdate\", onTimeUpdate);\r\n            audio.removeEventListener(\"loadedmetadata\", onLoaded);\r\n            audio.removeEventListener(\"play\", onPlay);\r\n            audio.removeEventListener(\"pause\", onPause);\r\n        };\r\n    }, [ref]);\r\n\r\n    const togglePlay = () => {\r\n        if (!ref?.current) return;\r\n        const audio = ref.current;\r\n        if (audio.paused) {\r\n            audio.play();\r\n        } else {\r\n            audio.pause();\r\n        }\r\n        // isPlaying sera mis à jour par les handlers play/pause ci-dessus\r\n    };\r\n\r\n    const handleSeek = (e) => {\r\n        if (!ref?.current || !duration) return;\r\n        const val = Number(e.target.value); // 0..100\r\n        const newTime = (val / 100) * duration;\r\n        ref.current.currentTime = newTime;\r\n        setAudioProgress(val);\r\n    };\r\n\r\n    // On affiche l'élément audio quoi qu'il arrive (pour que la lecture continue)\r\n    // mais l'UI (bouton + barre) n'apparaît que si visible === true\r\n    return (\r\n        <div className=\"w-full mx-4\">\r\n            {/* Element audio réel : toujours présent */}\r\n            <audio ref={ref}>\r\n                <source src={track?.preview} type=\"audio/mpeg\" />\r\n            </audio>\r\n\r\n            {/* UI visible seulement après show answer / game over */}\r\n            {visible && (\r\n                <div className=\"w-full flex flex-col gap-2 p-3 bg-(--background) rounded-lg border border-(--foreground) shadow-sm\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        {/* Play/Pause */}\r\n                        <button\r\n                            onClick={togglePlay}\r\n                            aria-label={isPlaying ? \"Pause\" : \"Play\"}\r\n                            className=\"hover:scale-[110%] transition cursor-pointer\"\r\n                        >\r\n                            {isPlaying ? <Pause size={22} color=\"var(--gray)\" fill=\"var(--gray)\" strokeWidth=\"1px\" /> : <Play size={22} color=\"var(--gray)\" fill=\"var(--gray)\" strokeWidth=\"1px\" />}\r\n                        </button>\r\n\r\n                        {/* Barre de lecture stylée + draggable */}\r\n                        <div className=\"relative w-full select-none\">\r\n\r\n                            {/* --- BARRE VISUELLE --- */}\r\n                            <div className=\"relative h-3 rounded bg-purple-300 overflow-hidden\">\r\n                                <div\r\n                                    className={`absolute h-3 rounded transition-all duration-300 bg-(--accent)`}\r\n                                    style={{ width: `${audioProgress}%` }}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* --- INPUT RANGE INVISIBLE MAIS INTERACTIF --- */}\r\n                            <input\r\n                                type=\"range\"\r\n                                min=\"0\"\r\n                                max=\"100\"\r\n                                value={Math.max(0, Math.min(100, audioProgress))}\r\n                                onChange={handleSeek}\r\n                                className=\"absolute top-0 left-0 w-full h-3 opacity-0 cursor-pointer\"\r\n                                style={{ WebkitAppearance: \"none\" }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Times */}\r\n                    <div className=\"flex justify-between text-xs text-(--gray)\">\r\n            <span>\r\n              {ref.current ? formatTime(ref.current.currentTime) : \"00:00\"}\r\n            </span>\r\n                        <span>{formatTime(duration)}</span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\n// utilitaire local pour formatage hh:mm:ss -> mm:ss\r\nfunction formatTime(sec) {\r\n    if (!sec || isNaN(sec)) return \"00:00\";\r\n    const s = Math.floor(sec);\r\n    const m = Math.floor(s / 60);\r\n    const ss = s % 60;\r\n    return `${String(m).padStart(2, \"0\")}:${String(ss).padStart(2, \"0\")}`;\r\n}\r\n\r\nexport default TrackAudio;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/R505%20-%20Dev%20front/app-react/blindtest_next/src/app/jeu/vs/VSMode.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\nimport BlindtestLoader from \"@/components/Loading\";\r\nimport TrackAudio from '@/components/TrackAudio';\r\nimport { createServerSearchParamsForServerPage } from \"next/dist/server/request/search-params\";\r\nimport { ConstructionIcon } from \"lucide-react\";\r\n\r\nexport default function VSMode() {\r\n\r\n    // CLASSEMENT EN FIN DE PARTIE !!!\r\n\r\n    // state machine\r\n    const GAME_STATE = {\r\n        PAUSED: 'paused',\r\n        PLAYING: \"playing\",\r\n        SHOW_ANSWER: \"show_answer\",\r\n        GAME_OVER: \"game_over\",\r\n        WAITING: \"waiting\",\r\n    };\r\n    const [isConnected, setIsConnected] = useState(false);\r\n    const [pseudo, setPseudo] = useState(\"\");\r\n    const [players, setPlayers] = useState({});\r\n    const [roomCode, setRoomCode] = useState('');\r\n    const [gameState, setGameState] = useState(false); // à mettre à jour en fonction du serveur uniquement\r\n    const [songs, setSongs] = useState([]);\r\n    const [currentSong, setCurrentSong] = useState(0);\r\n    // POUR LE CHAT D'UNE ROOM !!\r\n    const [message, setMessages] = useState([]);\r\n    // pour garder une ref sur les inputs de reponse\r\n    const titleAnswerRef = useRef(null);\r\n    const artistAnswerRef = useRef(null);\r\n     const socketRef = useRef(null);\r\n    const playersRef = useRef(players);\r\n\r\n    // variables pour l'interface ?\r\n    const [points, setPoints] = useState(0);\r\n    const [pointsPopup, setPointsPopup] = useState(null);\r\n    const audioRef = useRef(null); // controler l'audio !\r\n\r\n    // POUR LES REPONSES !!\r\n    const [answers, setAnswers] = useState([]);\r\n    const [answerMessage, setAnswerMessage] = useState(\"\");\r\n    const [answerMessageColor, setAnswerMessageColor] = useState('');\r\n    const [titleBox, setTitleBox] = useState('');\r\n    const [artistBox, setArtistBox] = useState('');\r\n\r\n    // uniquement pour la fin pour la visualisation\r\n    const nextSong = () => {\r\n        if (currentSong < songs.length - 1) {\r\n            setCurrentSong(prev => prev + 1)\r\n        }\r\n    };\r\n\r\n    const prevSong = () => {\r\n        if (currentSong > 0) {\r\n            setCurrentSong(prev => prev - 1)\r\n        }\r\n    };\r\n\r\n    const updatePlayerProperty = (playerId, key, newValue) => {\r\n        setPlayers(prevPlayers => {\r\n            const updatedPlayers = { ...prevPlayers };\r\n\r\n            if (updatedPlayers[playerId]) {\r\n                updatedPlayers[playerId] = {\r\n                    ...updatedPlayers[playerId],\r\n                    [key]: newValue\r\n                };\r\n            }\r\n            return updatedPlayers;\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (audioRef.current) {\r\n            audioRef.current.pause();\r\n            audioRef.current.currentTime = 0;\r\n            audioRef.current.src = songs[currentSong].preview;\r\n        }\r\n    }, [currentSong]);\r\n\r\n    useEffect(() => {\r\n        playersRef.current = players;\r\n    }, [players]);\r\n\r\n    useEffect(() => {\r\n        console.log(gameState);\r\n    }, [gameState]);\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(\"Toutes les réponses :\", answers);\r\n    }, [answers]);\r\n\r\n\r\n    // sockets communication ^^\r\n    useEffect(() => {\r\n        const socket = io(\"http://localhost:3001\", {\r\n            path: \"/socket.io\",\r\n            transports: [\"websocket\"],\r\n        });\r\n\r\n        socketRef.current = socket;\r\n\r\n        socket.on('connect', () => {\r\n            socket.emit('message', 'hallo');\r\n            setIsConnected(true);\r\n        });\r\n\r\n        socket.on('roomCreated', async (roomCode) => {\r\n            setRoomCode(roomCode);\r\n            // ajouter des parametres lors de la creation d'une room pour permettre plus de choses ?\r\n            try {\r\n                const tracks = await fetchTracks(\"search\", \"disney\");\r\n                setSongs(tracks);\r\n                socket.emit('setTrackList', tracks);\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        });\r\n\r\n        socket.on('roomJoined', (roomCode) => {\r\n            setRoomCode(roomCode);\r\n        });\r\n\r\n        socket.on('roomError', (error) => {\r\n            console.log(error);\r\n        });\r\n\r\n        // mise à jour des JOUEURS\r\n        socket.on(\"currentPlayers\", (serverPlayers) => {\r\n            setPlayers(serverPlayers);\r\n            playersRef.current = serverPlayers;\r\n        });\r\n\r\n        socket.on(\"playerHasAnswered\", (data) => {\r\n            const [playerId, answerState] = data;\r\n            updatePlayerProperty(playerId, 'answered', answerState);\r\n        });\r\n\r\n        socket.on('setGameState', (serverGameState) => {\r\n            const currentPlayers = playersRef.current;\r\n            setGameState(serverGameState);\r\n            console.log('Game state update from server: ' + serverGameState);\r\n            if (serverGameState === GAME_STATE.PLAYING) {\r\n                handleStart();\r\n            }\r\n            if (serverGameState === GAME_STATE.SHOW_ANSWER || serverGameState === GAME_STATE.GAME_OVER) {\r\n                handleReset();\r\n            }\r\n\r\n            if (currentPlayers[socket.id].roomLeader) {\r\n                if (serverGameState === GAME_STATE.SHOW_ANSWER) {\r\n                    setGameStateMessage(['Passer à la suite', nextSongBlindtest]);\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        socket.on('setTrackList', (tracks) => {\r\n            setSongs(tracks);\r\n        });\r\n\r\n        // quand le chef de room valide le fait que tout le monde a bien repondu ou bien que le serveur le fait ?\r\n        // ils ne sont pas encore en train de jouer ! Ils sont juste passés à la suitee\r\n        socket.on('nextSongInBlindtest', () => {\r\n            const currentPlayers = playersRef.current;\r\n            titleAnswerRef.current.value = \"\";\r\n            artistAnswerRef.current.value = \"\";\r\n            setAnswerMessage('');\r\n            if (currentPlayers[socket.id].roomLeader) {\r\n                setGameStateMessage(['Lancer la musique', setServerPlaying]);\r\n            }\r\n        });\r\n\r\n        socket.on('playerAnswerResult', ({ correctTitle, correctArtist, totalPoints, pointsGained }) => {\r\n            setTitleBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--error)]');\r\n            setArtistBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--error)]');\r\n\r\n            if (correctTitle) {\r\n                setTitleBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--valid)]');\r\n            }\r\n\r\n            if (correctArtist) {\r\n                setArtistBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--valid)]')\r\n            }\r\n\r\n            if (correctTitle && correctArtist) {\r\n                setAnswerMessage('Tout juste, bravo ! +11pts');\r\n                setAnswerMessageColor('text-[var(--valid)]');\r\n            } else if (correctArtist) {\r\n                setAnswerMessage(`Tu as trouvé l'artiste mais pas la chanson. +5pts`);\r\n                setAnswerMessageColor('text-[var(--valid)]');\r\n            } else if (correctTitle) {\r\n                setAnswerMessage(`Tu as trouvé la chanson mais pas l'artiste. +5pts`);\r\n                setAnswerMessageColor('text-[var(--valid)]');\r\n            } else {\r\n                setAnswerMessage(\"Aucune bonne réponse... +0pts\");\r\n                setAnswerMessageColor('text-[var(--error)]');\r\n            }\r\n\r\n            setPoints(totalPoints);\r\n            setPointsPopup('+' + pointsGained);\r\n        });\r\n\r\n        socket.on('forceSubmitAnswer', () => {\r\n            handleAnswer();\r\n        })\r\n\r\n        return () => {\r\n            setIsConnected(false);\r\n            socket.disconnect();\r\n        }\r\n    }, []);\r\n\r\n    // fonctions pour les sockets\r\n    const createRoom = () => {\r\n        if (!pseudo.trim()) return alert(\"Entrez un pseudo !\");\r\n        socketRef.current.emit(\"createRoom\", pseudo);\r\n    };\r\n\r\n    const joinRoom = (e) => {\r\n        e.preventDefault();\r\n        const joinRoomCode = e.target.roomCode.value.trim();\r\n        if (!pseudo.trim() || !joinRoomCode)\r\n            return alert(\"Pseudo et code de room requis !\");\r\n        socketRef.current.emit(\"joinRoom\", { pseudo, joinRoomCode });\r\n    };\r\n\r\n    const handleAnswer = () => {\r\n        let rawTitleAnswer = titleAnswerRef.current?.value || \"\";\r\n        let rawArtistAnswer = artistAnswerRef.current?.value || \"\";\r\n        socketRef.current.emit('playerAnswer', { rawTitleAnswer, rawArtistAnswer });\r\n        setAnswers(prev => [...prev, { title: rawTitleAnswer, artist: rawArtistAnswer }]);\r\n    };\r\n\r\n    const setServerPlaying = () => {\r\n        socketRef.current.emit('setGamePlaying');\r\n    }\r\n\r\n    const startGame = () => {\r\n        socketRef.current.emit('startGame');\r\n    };\r\n\r\n    // CONCERNANT LE TIMER !!\r\n    //\r\n    //\r\n    const musicTime = 20;\r\n    const [duration, setDuration] = useState(musicTime);\r\n    const [timeLeft, setTimeLeft] = useState(musicTime);\r\n    const [isPaused, setIsPaused] = useState(false);\r\n    const [isActive, setIsActive] = useState(false);\r\n    const timerRef = useRef(null);\r\n    const progressBar = (timeLeft / duration) * 100;\r\n\r\n    // timer qui est lancé\r\n    const handleStart = () => {\r\n        if (timeLeft > 0) {\r\n            setIsActive(true);\r\n            setIsPaused(false);\r\n            audioRef.current?.play();\r\n            setGameStateMessage(['Partie en cours', () => {\r\n            }]);\r\n        }\r\n    };\r\n\r\n    const handlePause = () => {\r\n        if (isActive) {\r\n            setIsPaused(true);\r\n            setIsActive(false);\r\n            if (timerRef.current) {\r\n                clearInterval(timerRef.current);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setIsActive(false);\r\n        setIsPaused(false);\r\n        setTimeLeft(typeof duration === \"number\" ? duration : 0);\r\n        if (timerRef.current) {\r\n            clearInterval(timerRef.current);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isActive) {\r\n            timerRef.current = setInterval(() => {\r\n                setTimeLeft((prevTime) => {\r\n                    if (prevTime <= 1) {\r\n                        clearInterval(timerRef.current);\r\n                        return 0;\r\n                    }\r\n                    return prevTime - 1;\r\n                });\r\n            }, 1000);\r\n        }\r\n        return () => {\r\n            if (timerRef.current) {\r\n                clearInterval(timerRef.current);\r\n            }\r\n        };\r\n    }, [isActive, isPaused]);\r\n\r\n    const formatTime = (time) => {\r\n        const seconds = time % 60;\r\n        return `${String(seconds).padStart(2, \"0\")}`;\r\n    };\r\n    // FIN DE LA PARTIE CONCERNANT LES MUSIQUES !!!\r\n    //\r\n    //\r\n\r\n    setTimeout(() => {\r\n        setPointsPopup(null);\r\n    }, 5000);\r\n\r\n    const [gameStateMessage, setGameStateMessage] = useState(['Lancer la musique', setServerPlaying]);\r\n\r\n    // la page\r\n    return (\r\n        <>\r\n            <h1>Blindtest en VS !</h1>\r\n            {roomCode && (\r\n                <p>Identifiant de la room: {roomCode}</p>\r\n            )}\r\n\r\n            {/* 1. Écran de connexion/création de salle (Lobby) */}\r\n            {!roomCode && (\r\n                <div className=\"flex flex-col items-center gap-4\">\r\n\r\n                    {/* Si non connecté */}\r\n                    {!isConnected ? (\r\n                        <>\r\n                            <p>Connexion au serveur en cours...</p>\r\n                            <BlindtestLoader />\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Votre pseudo\"\r\n                                value={pseudo}\r\n                                onChange={(e) => setPseudo(e.target.value)}\r\n                                className=\"bg-white text-black px-2 py-1 rounded\"\r\n                            />\r\n                            <button className=\"bg-white px-4 py-1 text-black\" onClick={createRoom}>Créer une partie</button>\r\n                            <p>Ou bien en rejoindre une:</p>\r\n                            <form className=\"flex gap-2\" onSubmit={joinRoom}>\r\n                                <input className=\"bg-white text-black\" type=\"text\" name=\"roomCode\" />\r\n                                <button className=\"bg-white px-4 py-1 text-black\" type=\"submit\">Rejoindre</button>\r\n                            </form>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n\r\n            {/* 2. Interface de Jeu (Blindtest) - Affichée UNIQUEMENT si roomCode existe */}\r\n            {roomCode && (\r\n                <main className=\"mx-auto max-w-screen-md md:max-w-screen-lg lg:max-w-screen-xl px-8\">\r\n                    {roomCode && gameState === GAME_STATE.WAITING && (\r\n                        <div className=\"flex flex-col items-center p-8 bg-[var(--middleground)] rounded-lg\">\r\n                            <h2>Salle {roomCode} - En attente</h2>\r\n                            <p>Yo {players[socketRef.current.id].pseudo} ! On attend les autres joueurs ?</p>\r\n                            {players[socketRef.current.id] && players[socketRef.current.id].roomLeader ? (\r\n                                <>\r\n                                    <p>Vous êtes le chef de salle !</p>\r\n                                    <button onClick={startGame} className=\"mt-4 bg-[var(--valid)] text-white font-bold rounded px-4 py-2\">\r\n                                        Lancer la partie !\r\n                                    </button>\r\n                                </>\r\n                            ) : (\r\n                                <p>En attente du chef de salle pour lancer la partie...</p>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {roomCode && gameState !== GAME_STATE.WAITING && (\r\n                        <>\r\n                            <div className=\"flex flex-col bg-[var(--middleground)] px-8 py-4 rounded-lg border border-[var(--foreground)] shadow-md\">\r\n                                <div className=\"flex flex-row justify-between w-[100%] mb-4\">\r\n                                    <div className=\"flex max-w-fit bg-[var(--middleground)] px-4 py-2 rounded-lg border border-[var(--foreground)] shadow\">\r\n                                        <div className=\"relative flex items-center\">\r\n                                            <p className=\"text-(--gray) whitespace-nowrap\">{points} pts</p>\r\n                                            {pointsPopup && <p className=\"ml-2 absolute points-popup\">{pointsPopup}</p>}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <TrackAudio\r\n                                        ref={audioRef}\r\n                                        track={songs[currentSong]}\r\n                                        visible={gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER}\r\n                                    />\r\n\r\n                                    <div className=\"flex max-w-fit bg-[var(--middleground)] px-4 py-2 rounded-lg border border-[var(--foreground)] shadow\">\r\n                                        <div className=\"relative flex items-center text-right\">\r\n                                            <p className=\"text-(--gray) whitespace-nowrap\">{currentSong + 1} / {songs.length}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <TrackAudio ref={audioRef} track={songs[currentSong]}\r\n                                    visible={gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER} />\r\n\r\n                                {(gameState === GAME_STATE.PLAYING || gameState === GAME_STATE.PAUSED) && (\r\n                                    <>\r\n                                        <div className=\"\">\r\n                                            <p className=\"font-bold text-center text-xl text-[var(--text)]\">{formatTime(timeLeft)}</p>\r\n\r\n                                            <div className={`relative h-3 rounded bg-purple-300`}>\r\n                                                <div\r\n                                                    className={`absolute h-3 rounded transition-all duration-500 ${timeLeft <= 5 ? \"bg-[var(--accent-lighter)]\" : \"bg-[var(--accent)]\"\r\n                                                        }`}\r\n                                                    style={{ width: `${progressBar}%` }}\r\n                                                >\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </>\r\n                                )}\r\n\r\n                                <button\r\n                                    onClick={gameStateMessage[1]}\r\n                                    className=\"cursor-pointer bg-[var(--white)] mx-auto shadow-md my-4 text-[var(--accent)] duration-200 hover:text-[var(--accent-lighter)] font-bold uppercase rounded px-4 py-2 active:shadow-[none] active:bg-gray-50\"\r\n                                >\r\n                                    {gameStateMessage[0]}\r\n                                </button>\r\n\r\n                                {/* FORM / inputs */}\r\n                                {(gameState === GAME_STATE.PLAYING || gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.PAUSED) && (\r\n                                    <>\r\n                                        <div className=\"flex justify-center items-center mb-4\">\r\n                                            <p className={answerMessageColor}>{answerMessage}</p>\r\n                                        </div>\r\n\r\n                                        <form\r\n                                            onSubmit={(e) => {\r\n                                                e.preventDefault();\r\n                                                handleAnswer();\r\n                                            }}\r\n                                            className=\"flex flex-col flex-wrap gap-2\"\r\n                                        >\r\n                                            <div className=\"flex gap-2 justify-center\">\r\n                                                <div className=\"flex flex-col gap-0\">\r\n                                                    <label htmlFor=\"musicTitle\" className=\"text-[var(--text)]\">Titre de la musique :</label>\r\n                                                    <input\r\n                                                        name=\"musicTitle\"\r\n                                                        ref={titleAnswerRef}\r\n                                                        className={`${gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER\r\n                                                            ? titleBox\r\n                                                            : 'bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--gray)]'\r\n                                                            }`}\r\n                                                        placeholder=\"Votre réponse\"\r\n                                                        type=\"text\"\r\n                                                        disabled={gameState !== GAME_STATE.PLAYING}\r\n                                                    />\r\n                                                </div>\r\n\r\n                                                <div className=\"flex flex-col gap-0\">\r\n                                                    <label htmlFor=\"artistName\" className=\"text-[var(--text)]\">Nom de l'artiste :</label>\r\n                                                    <input\r\n                                                        name=\"artistName\"\r\n                                                        ref={artistAnswerRef}\r\n                                                        className={`${gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER\r\n                                                            ? artistBox\r\n                                                            : 'bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--gray)]'\r\n                                                            }`}\r\n                                                        placeholder=\"Votre réponse\"\r\n                                                        type=\"text\"\r\n                                                        disabled={gameState !== GAME_STATE.PLAYING}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <button\r\n                                                type=\"submit\"\r\n                                                disabled={gameState !== GAME_STATE.PLAYING}\r\n                                                className={gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.PAUSED ? \"hidden\" : \"cursor-pointer bg-[var(--white)] mx-auto shadow-md mt-4 text-[var(--accent)] duration-200 hover:text-[var(--accent-lighter)] font-bold uppercase rounded px-4 py-2 active:shadow-[none] active:bg-gray-50\"}\r\n                                            >\r\n                                                Confirmer\r\n                                            </button>\r\n                                        </form>\r\n                                    </>\r\n                                )}\r\n\r\n                                {(gameState === GAME_STATE.GAME_OVER || gameState === GAME_STATE.SHOW_ANSWER) && (\r\n                                    <div className=\"mt-4 mx-auto\">\r\n                                        <Track track={songs[currentSong]} />\r\n                                    </div>\r\n                                )}\r\n\r\n                                {gameState === GAME_STATE.GAME_OVER && (\r\n                                    <>\r\n                                        <div className=\"flex justify-center items-center mb-4\">\r\n                                            <p className={answerMessageColor}>{answerMessage}</p>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex gap-4 items-start\">\r\n                                            <div className=\"flex flex-col gap-0\">\r\n                                                <label htmlFor=\"musicTitle\">Titre de la musique :</label>\r\n                                                <input name=\"musicTitle\" value={answers[currentSong].title}\r\n                                                    className={titleBox}\r\n                                                    placeholder=\"votre réponse\" type=\"text\"\r\n                                                    disabled={gameState !== GAME_STATE.PLAYING} />\r\n                                            </div>\r\n\r\n                                            <div className=\"flex flex-col gap-0\">\r\n                                                <label htmlFor=\"artistName\">Nom de l'artiste :</label>\r\n                                                <input name=\"artistName\" value={answers[currentSong].artist}\r\n                                                    className={artistBox}\r\n                                                    placeholder=\"votre réponse\" type=\"text\"\r\n                                                    disabled={gameState !== GAME_STATE.PLAYING} />\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex flex-wrap gap-2\">\r\n                                            <button onClick={prevSong}\r\n                                                className=\"bg-[var(--white)] text-black rounded px-4 py-2\">Musique\r\n                                                précédante\r\n                                            </button>\r\n                                            <button onClick={nextSong}\r\n                                                className=\"bg-[var(--white)] text-black rounded px-4 py-2\">Musique suivante\r\n                                            </button>\r\n                                        </div>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                    {players && Object.keys(players).length > 0 &&\r\n                        (\r\n                            <div className=\"mt-4\">\r\n                                <h3>Joueurs:</h3>\r\n                                {Object.entries(players).map(([id, player]) => (\r\n                                    <div key={id}>\r\n                                        <p>{player.pseudo} (Score : {player.score})</p>\r\n                                        {player.answered && (\r\n                                            <p className=\"text-green-500\">A repondu !</p>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                </main>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nasync function fetchTracks(mode = \"genre\", q = \"0\", limit = 25, minRank = 0, maxRank = 1000000) {\r\n    const res = await fetch(\r\n        `/api/tracks?mode=${mode}&q=${encodeURIComponent(q)}&limit=${limit}&minRank=${minRank}&maxRank=${maxRank}`\r\n    );\r\n    if (!res.ok) throw new Error(`Erreur HTTP ${res.status}`);\r\n    const data = await res.json();\r\n    return data;\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}