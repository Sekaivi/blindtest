{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/app/api/score/leaderboard/route.js"],"sourcesContent":["import {NextResponse} from \"next/server\";\r\nimport sqlite3 from \"sqlite3\";\r\nimport {open} from \"sqlite\";\r\n\r\nasync function openDB() {\r\n    return open({\r\n        filename: \"test.sqlite\", // ton fichier SQLite\r\n        driver: sqlite3.Database,\r\n    });\r\n}\r\n\r\nexport async function GET() {\r\n    try {\r\n        const db = await openDB();\r\n        console.log(\"DB ouverte avec succ√®s\");\r\n\r\n        const leaderboard = await db.all(`\r\n            SELECT u.id AS user_id, u.name, IFNULL(s.score_user, 0) AS score_user\r\n            FROM users u\r\n                     LEFT JOIN score s ON u.id = s.user_id\r\n            ORDER BY score_user DESC\r\n            LIMIT 5\r\n        `);\r\n\r\n        console.log(\"Leaderboard raw:\", leaderboard);\r\n\r\n        return NextResponse.json({leaderboard});\r\n    } catch (err) {\r\n        console.error(\"Erreur leaderboard API:\", err);\r\n        return NextResponse.json({error: \"Server error\"}, {status: 500});\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,eAAe;IACX,OAAO,IAAA,mKAAI,EAAC;QACR,UAAU;QACV,QAAQ,kHAAO,CAAC,QAAQ;IAC5B;AACJ;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,KAAK,MAAM;QACjB,QAAQ,GAAG,CAAC;QAEZ,MAAM,cAAc,MAAM,GAAG,GAAG,CAAC,CAAC;;;;;;QAMlC,CAAC;QAED,QAAQ,GAAG,CAAC,oBAAoB;QAEhC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC;QAAW;IACzC,EAAE,OAAO,KAAK;QACV,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,OAAO;QAAc,GAAG;YAAC,QAAQ;QAAG;IAClE;AACJ"}}]
}