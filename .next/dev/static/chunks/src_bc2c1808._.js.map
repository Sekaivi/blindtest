{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/blindtestOptions/Search.jsx"],"sourcesContent":["\"use client\";\r\nimport {useState} from \"react\";\r\nimport {useRouter} from \"next/navigation\";\r\n\r\nexport default function Search({type}) {\r\n    const [query, setQuery] = useState(\"\");\r\n    const [limit, setLimit] = useState(10)\r\n    const router = useRouter();\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!query.trim()) return;\r\n        try {\r\n            let searchQuery;\r\n\r\n            // If user pasted a Deezer link:\r\n            if (query.includes(\"deezer.com\")) {\r\n                const res = await fetch(\"/api/resolve\", {\r\n                    method: \"POST\",\r\n                    headers: {\"Content-Type\": \"application/json\"},\r\n                    body: JSON.stringify({link: query}),\r\n                });\r\n\r\n                const data = await res.json();\r\n                if (data.error) throw new Error(data.error);\r\n                searchQuery = data.id;\r\n            } else {\r\n                searchQuery = query;\r\n            }\r\n            router.push(`/jeu/${type}/${encodeURIComponent(searchQuery)}?limit=${limit}`);\r\n        } catch (err) {\r\n            console.error(\"Erreur pendant la recherche :\", err);\r\n        }\r\n    }\r\n    return (\r\n        <form onSubmit={handleSubmit}\r\n              className=\"flex flex-col items-start space-y-4\">\r\n            <div className=\"flex flex-col gap-2 w-full\">\r\n                <input type=\"text\" value={query} onChange={(e) => setQuery(e.target.value)}\r\n                       placeholder=\"Rechercher\"\r\n                       className=\"bg-(--white) text-(--black) rounded px-4 py-2 placeholder-(--gray) border border-(--gray) focus:border-(--accent) outline-none\"/>\r\n            </div>\r\n            <div className=\"flex flex-col gap-2 w-full\">\r\n            <label className=\"text-(--text)\">Nombre de musique chargées</label>\r\n                <input type=\"number\" value={limit} onChange={(e) => setLimit(e.target.value)}\r\n                       placeholder=\"Nombre de musiques\"\r\n                       className=\"bg-(--white) text-(--black) rounded px-4 py-2 placeholder-(--gray) border border-(--gray) focus:border-(--accent) outline-none\"/>\r\n            </div>\r\n            <button type=\"submit\"\r\n                    className=\"cursor-pointer text-nowrap self-center text-(--white) shadow bg-(--accent) duration-200 hover:bg-(--accent-lighter) border border-(--accent) hover:border-(--accent-lighter) font-bold uppercase rounded px-4 py-2 active:shadow-none w-fit\">\r\n                Créer mon blindtest\r\n            </button>\r\n        </form>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAIe,SAAS,OAAO,EAAC,IAAI,EAAC;;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,MAAM,IAAI,IAAI;QACnB,IAAI;YACA,IAAI;YAEJ,gCAAgC;YAChC,IAAI,MAAM,QAAQ,CAAC,eAAe;gBAC9B,MAAM,MAAM,MAAM,MAAM,gBAAgB;oBACpC,QAAQ;oBACR,SAAS;wBAAC,gBAAgB;oBAAkB;oBAC5C,MAAM,KAAK,SAAS,CAAC;wBAAC,MAAM;oBAAK;gBACrC;gBAEA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,KAAK,KAAK,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK;gBAC1C,cAAc,KAAK,EAAE;YACzB,OAAO;gBACH,cAAc;YAClB;YACA,OAAO,IAAI,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,mBAAmB,aAAa,OAAO,EAAE,OAAO;QAChF,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,iCAAiC;QACnD;IACJ;IACA,qBACI,6LAAC;QAAK,UAAU;QACV,WAAU;;0BACZ,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAM,MAAK;oBAAO,OAAO;oBAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBAClE,aAAY;oBACZ,WAAU;;;;;;;;;;;0BAErB,6LAAC;gBAAI,WAAU;;kCACf,6LAAC;wBAAM,WAAU;kCAAgB;;;;;;kCAC7B,6LAAC;wBAAM,MAAK;wBAAS,OAAO;wBAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACpE,aAAY;wBACZ,WAAU;;;;;;;;;;;;0BAErB,6LAAC;gBAAO,MAAK;gBACL,WAAU;0BAA8O;;;;;;;;;;;;AAK5Q;GAjDwB;;QAGL,kJAAS;;;KAHJ"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/Loading.jsx"],"sourcesContent":["'use client';\r\nimport React from 'react'\r\nimport { motion, useReducedMotion } from 'framer-motion'\r\n\r\nexport default function BlindtestLoader({\r\n                                            size = 50,\r\n                                            color = 'bg-(--accent)',\r\n                                            speed = 2,\r\n                                            message = \"Chargement de votre blindtest\"\r\n                                        }) {\r\n    const shouldReduce = useReducedMotion()\r\n    const baseHeight = size * 0.4\r\n    const fullHeight = size\r\n    const barWidth = size / 3\r\n\r\n    const barStyle = {\r\n        width: `${barWidth}px`,\r\n        borderRadius: '10px',\r\n    }\r\n\r\n    const variants = {\r\n        animate: (i) => ({\r\n            height: [baseHeight, fullHeight, baseHeight, baseHeight],\r\n            transition: {\r\n                duration: speed,\r\n                repeat: Infinity,\r\n                ease: 'easeInOut',\r\n                delay: i * (speed / 4),\r\n                times: [0, 0.3, 0.6, 1],\r\n            },\r\n        }),\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center p-4 px-20\r\n        bg-(--middleground) shadow-md border border-solid border-(--foreground) rounded-lg\r\n        mx-auto max-w-screen-md md:max-w-screen-lg lg:max-w-screen-xl\">\r\n\r\n            <div className=\"mb-3 text-center\">\r\n                <span className=\"sr-only\">{message}</span>\r\n                <h3 className=\"text-xl font-medium text-(--text) zalando-sans-expanded-regular\">\r\n                    {message}\r\n                </h3>\r\n            </div>\r\n\r\n            <div\r\n                role=\"status\"\r\n                aria-live=\"polite\"\r\n                aria-label={message}\r\n                className=\"flex items-center gap-2 h-16 justify-center\"\r\n            >\r\n                {[0, 1, 2].map((i) =>\r\n                    shouldReduce ? (\r\n                        <div\r\n                            key={i}\r\n                            style={{ ...barStyle, height: `${baseHeight}px` }}\r\n                            className={`${color}`}\r\n                        />\r\n                    ) : (\r\n                        <motion.div\r\n                            key={i}\r\n                            custom={i}\r\n                            variants={variants}\r\n                            animate=\"animate\"\r\n                            style={barStyle}\r\n                            className={`${color} origin-bottom`}\r\n                        />\r\n                    )\r\n                )}\r\n            </div>\r\n\r\n            <p className=\"mt-2 text-md text-gray-500\">Veuillez patienter...</p>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;;;AAFA;;;AAIe,SAAS,gBAAgB,EACI,OAAO,EAAE,EACT,QAAQ,eAAe,EACvB,QAAQ,CAAC,EACT,UAAU,+BAA+B,EAC5C;;IACrC,MAAM,eAAe,IAAA,gOAAgB;IACrC,MAAM,aAAa,OAAO;IAC1B,MAAM,aAAa;IACnB,MAAM,WAAW,OAAO;IAExB,MAAM,WAAW;QACb,OAAO,GAAG,SAAS,EAAE,CAAC;QACtB,cAAc;IAClB;IAEA,MAAM,WAAW;QACb,SAAS,CAAC,IAAM,CAAC;gBACb,QAAQ;oBAAC;oBAAY;oBAAY;oBAAY;iBAAW;gBACxD,YAAY;oBACR,UAAU;oBACV,QAAQ;oBACR,MAAM;oBACN,OAAO,IAAI,CAAC,QAAQ,CAAC;oBACrB,OAAO;wBAAC;wBAAG;wBAAK;wBAAK;qBAAE;gBAC3B;YACJ,CAAC;IACL;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BAIX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAK,WAAU;kCAAW;;;;;;kCAC3B,6LAAC;wBAAG,WAAU;kCACT;;;;;;;;;;;;0BAIT,6LAAC;gBACG,MAAK;gBACL,aAAU;gBACV,cAAY;gBACZ,WAAU;0BAET;oBAAC;oBAAG;oBAAG;iBAAE,CAAC,GAAG,CAAC,CAAC,IACZ,6BACI,6LAAC;wBAEG,OAAO;4BAAE,GAAG,QAAQ;4BAAE,QAAQ,GAAG,WAAW,EAAE,CAAC;wBAAC;wBAChD,WAAW,GAAG,OAAO;uBAFhB;;;;6CAKT,6LAAC,uMAAM,CAAC,GAAG;wBAEP,QAAQ;wBACR,UAAU;wBACV,SAAQ;wBACR,OAAO;wBACP,WAAW,GAAG,MAAM,cAAc,CAAC;uBAL9B;;;;;;;;;;0BAWrB,6LAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAGtD;GAtEwB;;QAMC,gOAAgB;;;KANjB"}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/TrackAudio.js"],"sourcesContent":["\"use client\";\r\nimport React, { forwardRef, useEffect, useState, useRef } from \"react\";\r\nimport { Play, Pause } from \"lucide-react\";\r\n\r\nconst TrackAudio = forwardRef(({ track, visible }, ref) => {\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [audioProgress, setAudioProgress] = useState(0);\r\n    const [duration, setDuration] = useState(0);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n\r\n    const barRef = useRef(null);\r\n    const intervalRef = useRef(null); // NEW — interval 1s\r\n\r\n    // Sync src quand track change\r\n    useEffect(() => {\r\n        if (!ref?.current) return;\r\n        const audio = ref.current;\r\n\r\n        if (track?.preview && audio.src !== track.preview) {\r\n            audio.src = track.preview;\r\n        }\r\n    }, [track, ref]);\r\n\r\n    // Gestion des events play/pause + loadedmetadata\r\n    useEffect(() => {\r\n        if (!ref?.current) return;\r\n        const audio = ref.current;\r\n\r\n        const onLoaded = () => {\r\n            setDuration(audio.duration || 0);\r\n        };\r\n\r\n        const onPlay = () => {\r\n            setIsPlaying(true);\r\n\r\n            // NEW — démarrer un timer 1s\r\n            clearInterval(intervalRef.current);\r\n            intervalRef.current = setInterval(() => {\r\n                if (!audio.duration || isDragging) return;\r\n\r\n                const pct = (audio.currentTime / audio.duration) * 100;\r\n                setAudioProgress(pct);\r\n            }, 999);\r\n        };\r\n\r\n        const onPause = () => {\r\n            setIsPlaying(false);\r\n            clearInterval(intervalRef.current);\r\n        };\r\n\r\n        audio.addEventListener(\"loadedmetadata\", onLoaded);\r\n        audio.addEventListener(\"play\", onPlay);\r\n        audio.addEventListener(\"pause\", onPause);\r\n\r\n        return () => {\r\n            audio.removeEventListener(\"loadedmetadata\", onLoaded);\r\n            audio.removeEventListener(\"play\", onPlay);\r\n            audio.removeEventListener(\"pause\", onPause);\r\n            clearInterval(intervalRef.current);\r\n        };\r\n    }, [ref, isDragging]);\r\n\r\n    // PLAY / PAUSE\r\n    const togglePlay = () => {\r\n        if (!ref?.current) return;\r\n        const audio = ref.current;\r\n        audio.paused ? audio.play() : audio.pause();\r\n    };\r\n\r\n    // ----------- DRAG SEEK -----------\r\n    const handleDrag = (e) => {\r\n        if (!barRef.current || !ref.current || !duration) return;\r\n\r\n        const rect = barRef.current.getBoundingClientRect();\r\n        const x = Math.min(Math.max(e.clientX - rect.left, 0), rect.width);\r\n        const pct = (x / rect.width) * 100;\r\n\r\n        setAudioProgress(pct);\r\n    };\r\n\r\n    const stopDrag = (e) => {\r\n        if (!barRef.current || !ref.current || !duration) return;\r\n\r\n        document.removeEventListener(\"mousemove\", handleDrag);\r\n        document.removeEventListener(\"mouseup\", stopDrag);\r\n        setIsDragging(false);\r\n\r\n        const rect = barRef.current.getBoundingClientRect();\r\n        const x = Math.min(Math.max(e.clientX - rect.left, 0), rect.width);\r\n        const newTime = (x / rect.width) * duration;\r\n\r\n        ref.current.currentTime = newTime;\r\n    };\r\n\r\n    const startDrag = (e) => {\r\n        setIsDragging(true);\r\n        handleDrag(e);\r\n        document.addEventListener(\"mousemove\", handleDrag);\r\n        document.addEventListener(\"mouseup\", stopDrag);\r\n    };\r\n\r\n    // UI only when visible\r\n    return (\r\n        <div className=\"w-full mx-4\">\r\n            <audio ref={ref}>\r\n                <source src={track?.preview} type=\"audio/mpeg\" />\r\n            </audio>\r\n\r\n            {visible && (\r\n                <div className=\"w-full flex flex-col gap-2 p-3 bg-(--background) rounded-lg border border-(--foreground) shadow-sm\">\r\n                    <div className=\"flex items-center gap-3\">\r\n\r\n                        {/* PLAY / PAUSE */}\r\n                        <button\r\n                            onClick={togglePlay}\r\n                            aria-label={isPlaying ? \"Pause\" : \"Play\"}\r\n                            className=\"hover:scale-[110%] transition cursor-pointer\"\r\n                        >\r\n                            {isPlaying ? (\r\n                                <Pause size={22} color=\"var(--gray)\" fill=\"var(--gray)\" strokeWidth=\"1px\" />\r\n                            ) : (\r\n                                <Play size={22} color=\"var(--gray)\" fill=\"var(--gray)\" strokeWidth=\"1px\" />\r\n                            )}\r\n                        </button>\r\n\r\n                        {/* -------- BARRE -------- */}\r\n                        <div\r\n                            ref={barRef}\r\n                            className=\"relative w-full h-3 bg-purple-300 rounded cursor-pointer select-none\"\r\n                            onMouseDown={startDrag}\r\n                        >\r\n                            <div\r\n                                className={`absolute h-3 rounded bg-(--accent) ${\r\n                                    isDragging ? \"\" : \"transition-all duration-500\"\r\n                                }`}\r\n                                style={{ width: `${audioProgress}%` }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Times */}\r\n                    <div className=\"flex justify-between text-xs text-(--gray)\">\r\n                        <span>{formatTime(ref.current ? ref.current.currentTime : 0)}</span>\r\n                        <span>{formatTime(duration)}</span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\n// Format mm:ss\r\nfunction formatTime(sec) {\r\n    if (!sec || isNaN(sec)) return \"00:00\";\r\n    const s = Math.floor(sec);\r\n    const m = Math.floor(s / 60);\r\n    const ss = s % 60;\r\n    return `${String(m).padStart(2, \"0\")}:${String(ss).padStart(2, \"0\")}`;\r\n}\r\n\r\nexport default TrackAudio;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 511, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/Track.jsx"],"sourcesContent":["// pour afficher des musiques lol\r\nexport default function Track({ track }) {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center p-4 w-[100%]\r\n        bg-[var(--background)] shadow border border-solid border-[var(--foreground)] rounded-lg\">\r\n        <div className=\"mx-auto w-2xs flex flex-col gap-3 items-center\" key={track.id}>\r\n          <img className=\"w-full h-auto shadow-xl border border-solid border-[var(--foreground)] rounded-lg\"\r\n               src={track.album.cover_xl} alt={`Couverture de l'album: ${track.album.title}`} />\r\n          <div className=\"text-center flex flex-col items-center\">\r\n            <p className=\"text-lg text-(--text)\">{track.title}</p>\r\n            <p className=\"text-sm text-(--gray)\">{track.artist.name}</p>\r\n          </div>\r\n          <a href={track.link} target=\"_blank\" className=\"bg-[var(--accent)] hover:bg-[var(--accent-lighter)] text-[var(--white)]\r\n          cursor-pointer px-4 py-2 rounded font-bold uppercase active:text-gray-50 duration-300\">écouter sur Deezer</a>\r\n        </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;;AAClB,SAAS,MAAM,EAAE,KAAK,EAAE;IACrC,qBACE,6LAAC;QAAI,WAAU;kBAEX,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;oBACV,KAAK,MAAM,KAAK,CAAC,QAAQ;oBAAE,KAAK,CAAC,uBAAuB,EAAE,MAAM,KAAK,CAAC,KAAK,EAAE;;;;;;8BAClF,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAE,WAAU;sCAAyB,MAAM,KAAK;;;;;;sCACjD,6LAAC;4BAAE,WAAU;sCAAyB,MAAM,MAAM,CAAC,IAAI;;;;;;;;;;;;8BAEzD,6LAAC;oBAAE,MAAM,MAAM,IAAI;oBAAE,QAAO;oBAAS,WAAU;8BACwC;;;;;;;WARpB,MAAM,EAAE;;;;;;;;;;AAYrF;KAhBwB"}},
    {"offset": {"line": 590, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/app/jeu/vs/VSMode.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\nimport BlindtestLoader from \"@/components/Loading\";\r\nimport TrackAudio from '@/components/TrackAudio';\r\nimport Track from \"@/components/Track\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { createServerSearchParamsForServerPage } from \"next/dist/server/request/search-params\";\r\nimport { ConstructionIcon } from \"lucide-react\";\r\nimport { type } from \"os\";\r\n\r\nexport default function VSMode() {\r\n    const router = useRouter();\r\n    // CLASSEMENT EN FIN DE PARTIE !!!\r\n\r\n    // state machine\r\n    const GAME_STATE = {\r\n        PAUSED: 'paused',\r\n        PLAYING: \"playing\",\r\n        SHOW_ANSWER: \"show_answer\",\r\n        GAME_OVER: \"game_over\",\r\n        WAITING: \"waiting\",\r\n    };\r\n    const [isConnected, setIsConnected] = useState(false);\r\n    const [pseudo, setPseudo] = useState(\"\");\r\n    const [players, setPlayers] = useState({});\r\n    const [roomCode, setRoomCode] = useState('');\r\n    const [gameState, setGameState] = useState(false); // à mettre à jour en fonction du serveur uniquement\r\n    const [songs, setSongs] = useState([]);\r\n    const [currentSong, setCurrentSong] = useState(0);\r\n    const [chatMessages, setChatMessages] = useState([]);\r\n\r\n    const typeTracksRef = useRef(null);\r\n    const tracksQueryRef = useRef(null);\r\n    const tracksLimitRef = useRef(null);\r\n\r\n    // pour initialiser la recherche des musiques:\r\n    // pour garder une ref sur les inputs de reponse\r\n    const titleAnswerRef = useRef(null);\r\n    const artistAnswerRef = useRef(null);\r\n    const socketRef = useRef(null);\r\n    const playersRef = useRef(players);\r\n    const chatMessageInputRef = useRef(null);\r\n\r\n    // variables pour l'interface ?\r\n    const [points, setPoints] = useState(0);\r\n    const [pointsPopup, setPointsPopup] = useState(null);\r\n    const audioRef = useRef(null); // controler l'audio !\r\n\r\n    // POUR LES REPONSES !!\r\n    const [answers, setAnswers] = useState([]);\r\n    const [answerMessage, setAnswerMessage] = useState(\"\");\r\n    const [answerMessageColor, setAnswerMessageColor] = useState('');\r\n    const [titleBox, setTitleBox] = useState('');\r\n    const [artistBox, setArtistBox] = useState('');\r\n\r\n    // uniquement pour la fin pour la visualisation\r\n    const nextSong = () => {\r\n        if (currentSong < songs.length - 1) {\r\n            setCurrentSong(prev => prev + 1)\r\n        }\r\n    };\r\n\r\n    const prevSong = () => {\r\n        if (currentSong > 0) {\r\n            setCurrentSong(prev => prev - 1)\r\n        }\r\n    };\r\n\r\n    const updatePlayerProperty = (playerId, key, newValue) => {\r\n        setPlayers(prevPlayers => {\r\n            const updatedPlayers = { ...prevPlayers };\r\n\r\n            if (updatedPlayers[playerId]) {\r\n                updatedPlayers[playerId] = {\r\n                    ...updatedPlayers[playerId],\r\n                    [key]: newValue\r\n                };\r\n            }\r\n            return updatedPlayers;\r\n        });\r\n    };\r\n\r\n    const handleTextareaResize = () => {\r\n        const textarea = chatMessageInputRef.current;\r\n\r\n        if (textarea) {\r\n            textarea.style.height = 'auto';\r\n            textarea.style.height = textarea.scrollHeight + 'px';\r\n        }\r\n    };\r\n\r\n    const hanldleChatKeyDown = (e) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            sendChatMessage(e);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (audioRef.current) {\r\n            audioRef.current.pause();\r\n            audioRef.current.currentTime = 0;\r\n            audioRef.current.src = songs[currentSong].preview;\r\n        }\r\n    }, [currentSong]);\r\n\r\n    useEffect(() => {\r\n        playersRef.current = players;\r\n    }, [players]);\r\n\r\n    // sockets communication ^^\r\n    useEffect(() => {\r\n        const socket = io(\"http://localhost:3001\", {\r\n            path: \"/socket.io\",\r\n            transports: [\"websocket\"],\r\n        });\r\n\r\n        socketRef.current = socket;\r\n\r\n        socket.on('connect', () => {\r\n            socket.emit('message', 'hallo');\r\n            setIsConnected(true);\r\n        });\r\n\r\n        socket.on('roomCreated', async (roomCode) => {\r\n            setRoomCode(roomCode);\r\n            // ajouter des parametres lors de la creation d'une room pour permettre plus de choses ?\r\n            try {\r\n                const typeTracks = typeTracksRef.current.value;\r\n                const trackQuery = tracksQueryRef.current.value;\r\n                const tracksLimit = tracksLimitRef.current.value;\r\n                const tracks = await fetchTracks(typeTracks, trackQuery, tracksLimit);\r\n                setSongs(tracks);\r\n                socket.emit('setTrackList', tracks);\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        });\r\n\r\n        socket.on('roomJoined', (roomCode) => {\r\n            setRoomCode(roomCode);\r\n        });\r\n\r\n        socket.on('roomError', (error) => {\r\n            console.log(error);\r\n        });\r\n\r\n        socket.on('forceDisconnect', () => {\r\n            console.log('Erreur');\r\n            router.push(\"/jeu\");\r\n        })\r\n\r\n        // mise à jour des JOUEURS\r\n        socket.on(\"currentPlayers\", (serverPlayers) => {\r\n            setPlayers(serverPlayers);\r\n            playersRef.current = serverPlayers;\r\n        });\r\n\r\n        socket.on(\"playerHasAnswered\", (data) => {\r\n            const [playerId, answerState, playerscore] = data;\r\n            updatePlayerProperty(playerId, 'answered', answerState);\r\n            updatePlayerProperty(socket.id, 'score', playerscore);\r\n        });\r\n\r\n        socket.on('setGameState', (serverGameState) => {\r\n            const currentPlayers = playersRef.current;\r\n            setGameState(serverGameState);\r\n            if (serverGameState === GAME_STATE.PLAYING) {\r\n                handleStart();\r\n            }\r\n            if (serverGameState === GAME_STATE.SHOW_ANSWER || serverGameState === GAME_STATE.GAME_OVER) {\r\n                handleReset();\r\n            }\r\n\r\n            if (currentPlayers[socket.id].roomLeader) {\r\n                if (serverGameState === GAME_STATE.SHOW_ANSWER) {\r\n                    setGameStateMessage(['Passer à la suite', serverNextSong]);\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        socket.on('setTrackList', (tracks) => {\r\n            setSongs(tracks);\r\n        });\r\n\r\n        socket.on('nextSongInBlindtest', (serverCurrentSong) => {\r\n            setCurrentSong(serverCurrentSong);\r\n            const currentPlayers = playersRef.current;\r\n            titleAnswerRef.current.value = \"\";\r\n            artistAnswerRef.current.value = \"\";\r\n            setAnswerMessage('');\r\n            if (currentPlayers[socket.id].roomLeader) {\r\n                setGameStateMessage(['Lancer la musique', setServerPlaying]);\r\n            }\r\n        });\r\n\r\n        socket.on('playerAnswerResult', ({ correctTitle, correctArtist, totalPoints, pointsGained }) => {\r\n            setTitleBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--error)]');\r\n            setArtistBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--error)]');\r\n\r\n            if (correctTitle) {\r\n                setTitleBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--valid)]');\r\n            }\r\n\r\n            if (correctArtist) {\r\n                setArtistBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--valid)]')\r\n            }\r\n\r\n            if (correctTitle && correctArtist) {\r\n                setAnswerMessage('Tout juste, bravo ! +11pts');\r\n                setAnswerMessageColor('text-[var(--valid)]');\r\n            } else if (correctArtist) {\r\n                setAnswerMessage(`Tu as trouvé l'artiste mais pas la chanson. +` + pointsGained + 'pts');\r\n                setAnswerMessageColor('text-[var(--valid)]');\r\n            } else if (correctTitle) {\r\n                setAnswerMessage(`Tu as trouvé la chanson mais pas l'artiste. +` + pointsGained + 'pts');\r\n                setAnswerMessageColor('text-[var(--valid)]');\r\n            } else {\r\n                setAnswerMessage(\"Aucune bonne réponse... +0pts\");\r\n                setAnswerMessageColor('text-[var(--error)]');\r\n            }\r\n            updatePlayerProperty(socket.id, 'score', totalPoints);\r\n            setPoints(totalPoints);\r\n            console.log(pointsGained);\r\n            setPointsPopup('+' + pointsGained);\r\n        });\r\n\r\n        socket.on('forceSubmitAnswer', () => {\r\n            handleAnswer();\r\n        });\r\n\r\n        socket.on('newChatMessage', (message) => {\r\n            setChatMessages(prevMessages => [...prevMessages, message]);\r\n        });\r\n\r\n        // ajouter une fonction pour recuperer toutes les données sur l'état de la room...?\r\n        /* \r\n        socket.on('roomData', (data) => {\r\n            if (data.messages) {\r\n                setMessages(data.messages);\r\n            }\r\n        });\r\n        */\r\n\r\n        return () => {\r\n            setIsConnected(false);\r\n            socket.disconnect();\r\n        }\r\n    }, []);\r\n\r\n    // fonctions pour les sockets\r\n    const createRoom = (e) => {\r\n        e.preventDefault();\r\n        if (!pseudo.trim()) return alert(\"Entrez un pseudo !\");\r\n        if (!tracksQueryRef.current.value.trim()) return alert('Vous devez préciser votre recherche !');\r\n        socketRef.current.emit(\"createRoom\", pseudo);\r\n    };\r\n\r\n    const joinRoom = (e) => {\r\n        e.preventDefault();\r\n        const joinRoomCode = e.target.roomCode.value.trim();\r\n        if (!pseudo.trim() || !joinRoomCode)\r\n            return alert(\"Pseudo et code de room requis !\");\r\n        socketRef.current.emit(\"joinRoom\", { pseudo, joinRoomCode });\r\n    };\r\n\r\n    const handleAnswer = () => {\r\n        let rawTitleAnswer = titleAnswerRef.current?.value || \"\";\r\n        let rawArtistAnswer = artistAnswerRef.current?.value || \"\";\r\n        socketRef.current.emit('playerAnswer', { rawTitleAnswer, rawArtistAnswer });\r\n        setAnswers(prev => [...prev, { title: rawTitleAnswer, artist: rawArtistAnswer }]);\r\n    };\r\n\r\n    const setServerPlaying = () => {\r\n        socketRef.current.emit('setGamePlaying');\r\n    }\r\n\r\n    const serverNextSong = () => {\r\n        socketRef.current.emit('nextSongBlindtest');\r\n    }\r\n\r\n    const startGame = () => {\r\n        socketRef.current.emit('startGame');\r\n    };\r\n\r\n    const sendChatMessage = (e) => {\r\n        e.preventDefault();\r\n        handleTextareaResize();\r\n        const text = chatMessageInputRef.current.value.trim();\r\n\r\n        if (socketRef.current && text) {\r\n            socketRef.current.emit('chatMessage', text);\r\n            chatMessageInputRef.current.value = '';\r\n        }\r\n    };\r\n\r\n    // CONCERNANT LE TIMER !!\r\n    //\r\n    //\r\n    const musicTime = 20;\r\n    const [duration, setDuration] = useState(musicTime);\r\n    const [timeLeft, setTimeLeft] = useState(musicTime);\r\n    const [isPaused, setIsPaused] = useState(false);\r\n    const [isActive, setIsActive] = useState(false);\r\n    const timerRef = useRef(null);\r\n    const progressBar = (timeLeft / duration) * 100;\r\n\r\n    // timer qui est lancé\r\n    const handleStart = () => {\r\n        if (timeLeft > 0) {\r\n            setIsActive(true);\r\n            setIsPaused(false);\r\n            audioRef.current?.play();\r\n            setGameStateMessage(['Partie en cours', () => {\r\n            }]);\r\n        }\r\n    };\r\n\r\n    const handlePause = () => {\r\n        if (isActive) {\r\n            setIsPaused(true);\r\n            setIsActive(false);\r\n            if (timerRef.current) {\r\n                clearInterval(timerRef.current);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setIsActive(false);\r\n        setIsPaused(false);\r\n        setTimeLeft(typeof duration === \"number\" ? duration : 0);\r\n        if (timerRef.current) {\r\n            clearInterval(timerRef.current);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isActive) {\r\n            timerRef.current = setInterval(() => {\r\n                setTimeLeft((prevTime) => {\r\n                    if (prevTime <= 1) {\r\n                        clearInterval(timerRef.current);\r\n                        return 0;\r\n                    }\r\n                    return prevTime - 1;\r\n                });\r\n            }, 1000);\r\n        }\r\n        return () => {\r\n            if (timerRef.current) {\r\n                clearInterval(timerRef.current);\r\n            }\r\n        };\r\n    }, [isActive, isPaused]);\r\n\r\n    const formatTime = (time) => {\r\n        const seconds = time % 60;\r\n        return `${String(seconds).padStart(2, \"0\")}`;\r\n    };\r\n    // FIN DE LA PARTIE CONCERNANT LES MUSIQUES !!!\r\n    //\r\n    //\r\n\r\n    setTimeout(() => {\r\n        setPointsPopup(null);\r\n    }, 5000);\r\n\r\n    const [gameStateMessage, setGameStateMessage] = useState(['Lancer la musique', setServerPlaying]);\r\n\r\n    // la page\r\n    return (\r\n        <>\r\n            {/* 1. Écran de connexion/création de salle (Lobby) */}\r\n            {!roomCode && (\r\n                <div className=\"mx-auto max-w-screen-md md:max-w-screen-lg lg:max-w-screen-xl px-4\">\r\n                    <div className=\"flex flex-col items-center justify-center bg-(--middleground) px-8 py-4 gap-4 rounded-lg border border-(--foreground) shadow-md\">\r\n\r\n                        {/* Si non connecté */}\r\n                        {!isConnected ? (\r\n                            <>\r\n                                <BlindtestLoader message={\"Connexion au serveur en cours\"} />\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <div className=\"flex flex-col gap-4 w-md items-center justify-center\">\r\n                                    <div className=\"flex items-center flex-col gap-2\">\r\n                                        <label className=\"text-black dark:text-white text-lg font-bold\">Votre pseudo:</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            placeholder=\"Peusdo...  \"\r\n                                            value={pseudo}\r\n                                            onChange={(e) => setPseudo(e.target.value)}\r\n                                            className=\"bg-white text-black px-4 py-2 rounded border border-gray-400\"\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <form onSubmit={(e) => createRoom(e)} className=\"px-4 py-2 w-max flex flex-col flex-wrap gap-4\">\r\n                                        <h2 className=\"text-xl text-black dark:text-white font-bold\">Pour créer une room:</h2>\r\n                                        <div className=\"flex flex-col gap-2\">\r\n                                            <label className=\"text-black dark:text-white\">Votre séléction ?</label>\r\n                                            <select ref={typeTracksRef} defaultValue={'search'} className=\"bg-white text-black px-4 py-2 rounded cursor-pointer\">\r\n                                                <option value={'playlist'}>Playlist</option>\r\n                                                <option value={'genre'}>Genre</option>\r\n                                                <option value={'search'}>Mot-clé</option>\r\n                                            </select>\r\n                                        </div>\r\n                                        <div className=\"display flex flex-wrap gap-4 items-center justify-center\">\r\n                                            <div className=\"flex flex-col gap-2\">\r\n                                                <label className=\"text-black dark:text-white\">Votre recherche</label>\r\n                                                <input type=\"text\" ref={tracksQueryRef} defaultValue={''}\r\n                                                    placeholder=\"Rechercher\" className=\"bg-white text-black px-4 py-2 rounded\" />\r\n                                            </div>\r\n                                            <div className=\"flex flex-col gap-2\">\r\n                                                <label className=\"text-black dark:text-white\">Nombre de musique chargées</label>\r\n                                                <input ref={tracksLimitRef} defaultValue={25} type=\"number\"\r\n                                                    placeholder=\"Limite\" className=\"bg-white text-black px-4 py-2 rounded\" />\r\n                                            </div>\r\n                                        </div>\r\n                                        <button className=\"cursor-pointer text-(--white) shadow bg-(--accent) duration-200 hover:bg-(--accent-lighter) font-bold uppercase rounded px-4 py-2 active:shadow-none\" type=\"submit\">Créer une partie</button>\r\n                                    </form>\r\n\r\n\r\n                                    <h2 className=\"text-xl text-black dark:text-white font-bold\">Ou bien pour en rejoindre une:</h2>\r\n                                </div>\r\n                                <form className=\"flex gap-2\" onSubmit={joinRoom}>\r\n                                    <input className=\"bg-white text-black rounded\" type=\"text\" name=\"roomCode\" />\r\n                                    <button className=\"cursor-pointer text-(--white) shadow bg-(--accent) duration-200 hover:bg-(--accent-lighter) font-bold uppercase rounded px-4 py-2 active:shadow-none\" type=\"submit\">Rejoindre</button>\r\n                                </form>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n\r\n            {/* 2. Interface de Jeu (Blindtest) - Affichée UNIQUEMENT si roomCode existe */}\r\n            {roomCode && (\r\n                <div className=\"text-black dark:text-white mx-auto max-w-screen-md md:max-w-screen-lg lg:max-w-screen-xl px-8\">\r\n                    <div className=\"grid grid-cols-5 gap-4 content-start\">\r\n                        {players && Object.keys(players).length > 0 &&\r\n                            (\r\n                                <div id=\"joueurs\" className=\"col-span-1\">\r\n                                    <div className=\"bg-[var(--middleground)] rounded-lg shadow-inner flex flex-col gap-4\">\r\n                                        {roomCode && (\r\n                                            <p className=\"mx-4 mt-4 px-4 py-2 font-bold rounded\">Room ID: <span className=\"text-(--accent-darker)\">{roomCode}</span></p>\r\n                                        )}\r\n                                        <h3 className=\" mx-4 text-xl\">Joueurs:</h3>\r\n                                        <div className=\"flex flex-col gap-2\">\r\n                                            {Object.entries(players).map(([id, player], i) => {\r\n                                                const bgColorClass = i % 2 === 0\r\n                                                    ? 'bg-[var(--foreground)]'\r\n                                                    : 'bg-[var(--middleground)]'; return (\r\n\r\n                                                        <div className={`${bgColorClass} px-4 py-1`} key={id}>\r\n                                                            <p className=\"text-base\">{player.pseudo}</p>\r\n                                                            <p className=\"text-sm\">(Score : {player.score})</p>\r\n                                                            {player.answered && (\r\n                                                                <p className=\"text-sm text-(--valid)\">A répondu</p>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    )\r\n                                            })}\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n\r\n                        <div id=\"jeu\" className=\"col-span-3\">\r\n                            {roomCode && gameState === GAME_STATE.WAITING && (\r\n                                <div className=\"flex flex-col items-center p-8 bg-[var(--middleground)] rounded-lg\">\r\n                                    <h2 className=\"font-bold\">Salle <span className=\"text-(--accent-lighter)\">{roomCode}</span></h2>\r\n                                    <p className=\"italic\">En attente...</p>\r\n                                    <p>Hey <span className=\"text-(--accent-lighter)\">{players[socketRef.current.id].pseudo}</span> ! On attend les autres joueurs ?</p>\r\n                                    {players[socketRef.current.id] && players[socketRef.current.id].roomLeader ? (\r\n                                        <>\r\n                                            <button onClick={startGame} className=\"mt-4 cursor-pointer text-(--white) shadow bg-(--accent) duration-200 hover:bg-(--accent-lighter) font-bold uppercase rounded px-4 py-2 active:shadow-none\">\r\n                                                Lancer la partie !\r\n                                            </button>\r\n                                        </>\r\n                                    ) : (\r\n                                        <p>En attente du chef de salle pour lancer la partie...</p>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {roomCode && gameState !== GAME_STATE.WAITING && (\r\n                                <>\r\n                                    <div className=\"flex flex-col bg-[var(--middleground)] px-8 py-4 rounded-lg border border-[var(--foreground)] shadow-md\">\r\n                                        <div className=\"flex flex-row justify-between w-[100%] mb-4\">\r\n                                            <div className=\"flex max-w-fit bg-[var(--middleground)] px-4 py-2 rounded-lg border border-[var(--foreground)] shadow\">\r\n                                                <div className=\"relative flex items-center\">\r\n                                                    <p className=\"text-(--gray) whitespace-nowrap\">{points} pts</p>\r\n                                                    {pointsPopup && <p className=\"ml-2 absolute points-popup\">{pointsPopup}</p>}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <TrackAudio\r\n                                                ref={audioRef}\r\n                                                track={songs[currentSong]}\r\n                                                visible={gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER}\r\n                                            />\r\n\r\n                                            <div className=\"flex max-w-fit bg-[var(--middleground)] px-4 py-2 rounded-lg border border-[var(--foreground)] shadow\">\r\n                                                <div className=\"relative flex items-center text-right\">\r\n                                                    <p className=\"text-(--gray) whitespace-nowrap\">{currentSong + 1} / {songs.length}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {(gameState === GAME_STATE.PLAYING || gameState === GAME_STATE.PAUSED) && (\r\n                                            <>\r\n                                                <div className=\"\">\r\n                                                    <p className=\"font-bold text-center text-xl text-[var(--text)]\">{formatTime(timeLeft)}</p>\r\n\r\n                                                    <div className={`relative h-3 rounded bg-purple-300`}>\r\n                                                        <div\r\n                                                            className={`absolute h-3 rounded transition-all duration-500 ${timeLeft <= 5 ? \"bg-[var(--accent-lighter)]\" : \"bg-[var(--accent)]\"\r\n                                                                }`}\r\n                                                            style={{ width: `${progressBar}%` }}\r\n                                                        >\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </>\r\n                                        )}\r\n\r\n                                        {socketRef.current?.id && players[socketRef.current.id]?.roomLeader && (\r\n                                            <button\r\n                                                onClick={gameStateMessage[1]}\r\n                                                className=\"cursor-pointer bg-[var(--white)] mx-auto shadow-md my-4 text-[var(--accent)] duration-200 hover:text-[var(--accent-lighter)] font-bold uppercase rounded px-4 py-2 active:shadow-[none] active:bg-gray-50\"\r\n                                            >\r\n                                                {gameStateMessage[0]}\r\n                                            </button>\r\n                                        )}\r\n\r\n                                        {/* FORM / inputs */}\r\n                                        {(gameState === GAME_STATE.PLAYING || gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.PAUSED) && (\r\n                                            <>\r\n                                                <div className=\"flex justify-center items-center mb-4\">\r\n                                                    <p className={answerMessageColor}>{answerMessage}</p>\r\n                                                </div>\r\n\r\n                                                <form\r\n                                                    onSubmit={(e) => {\r\n                                                        e.preventDefault();\r\n                                                        handleAnswer();\r\n                                                    }}\r\n                                                    className=\"flex flex-col flex-wrap gap-2\"\r\n                                                >\r\n                                                    <div className=\"flex gap-2 justify-center\">\r\n                                                        <div className=\"flex flex-col gap-0\">\r\n                                                            <label htmlFor=\"musicTitle\" className=\"text-[var(--text)]\">Titre de la musique :</label>\r\n                                                            <input\r\n                                                                name=\"musicTitle\"\r\n                                                                ref={titleAnswerRef}\r\n                                                                className={`${gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER\r\n                                                                    ? titleBox\r\n                                                                    : 'bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--gray)]'\r\n                                                                    }`}\r\n                                                                placeholder=\"Votre réponse\"\r\n                                                                type=\"text\"\r\n                                                                disabled={gameState !== GAME_STATE.PLAYING || players[socketRef.current?.id]?.answered}\r\n                                                            />\r\n                                                        </div>\r\n\r\n                                                        <div className=\"flex flex-col gap-0\">\r\n                                                            <label htmlFor=\"artistName\" className=\"text-[var(--text)]\">Nom de l'artiste :</label>\r\n                                                            <input\r\n                                                                name=\"artistName\"\r\n                                                                ref={artistAnswerRef}\r\n                                                                className={`${gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER\r\n                                                                    ? artistBox\r\n                                                                    : 'bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--gray)]'\r\n                                                                    }`}\r\n                                                                placeholder=\"Votre réponse\"\r\n                                                                type=\"text\"\r\n                                                                disabled={gameState !== GAME_STATE.PLAYING || players[socketRef.current?.id]?.answered}\r\n                                                            />\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                    <button\r\n                                                        type=\"submit\"\r\n                                                        disabled={gameState !== GAME_STATE.PLAYING || players[socketRef.current?.id]?.answered}\r\n                                                        className={gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.PAUSED ? \"hidden\" : \"cursor-pointer bg-[var(--white)] mx-auto shadow-md mt-4 text-[var(--accent)] duration-200 hover:text-[var(--accent-lighter)] font-bold uppercase rounded px-4 py-2 active:shadow-[none] active:bg-gray-50\"}\r\n                                                    >\r\n                                                        Confirmer\r\n                                                    </button>\r\n                                                </form>\r\n                                            </>\r\n                                        )}\r\n\r\n                                        {(gameState === GAME_STATE.GAME_OVER || gameState === GAME_STATE.SHOW_ANSWER) && (\r\n                                            <div className=\"mt-4 mx-auto\">\r\n                                                <Track track={songs[currentSong]} />\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {gameState === GAME_STATE.GAME_OVER && (\r\n                                            <>\r\n                                                <div className=\"flex justify-center items-center mb-4\">\r\n                                                    <p className={answerMessageColor}>{answerMessage}</p>\r\n                                                </div>\r\n\r\n                                                <div className=\"flex gap-4 items-start\">\r\n                                                    <div className=\"flex flex-col gap-0\">\r\n                                                        <label htmlFor=\"musicTitle\">Titre de la musique :</label>\r\n                                                        <input name=\"musicTitle\" value={answers[currentSong].title}\r\n                                                            className={titleBox}\r\n                                                            placeholder=\"votre réponse\" type=\"text\"\r\n                                                            disabled={gameState !== GAME_STATE.PLAYING} />\r\n                                                    </div>\r\n\r\n                                                    <div className=\"flex flex-col gap-0\">\r\n                                                        <label htmlFor=\"artistName\">Nom de l'artiste :</label>\r\n                                                        <input name=\"artistName\" value={answers[currentSong].artist}\r\n                                                            className={artistBox}\r\n                                                            placeholder=\"votre réponse\" type=\"text\"\r\n                                                            disabled={gameState !== GAME_STATE.PLAYING} />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"flex flex-wrap gap-2\">\r\n                                                    <button onClick={prevSong}\r\n                                                        className=\"bg-[var(--white)] text-black rounded px-4 py-2\">Musique\r\n                                                        précédante\r\n                                                    </button>\r\n                                                    <button onClick={nextSong}\r\n                                                        className=\"bg-[var(--white)] text-black rounded px-4 py-2\">Musique suivante\r\n                                                    </button>\r\n                                                </div>\r\n                                            </>\r\n                                        )}\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div id=\"chat\" className=\"col-span-1\">\r\n                            {/* Bloc de Chat */}\r\n                            <div className=\"bg-[var(--middleground)] p-4 rounded-lg shadow-inner\">\r\n                                {/* Conteneur des messages */}\r\n                                <div className=\"h-64 overflow-y-auto mb-4 p-2 bg-[var(--background)] rounded border border-[var(--foreground)]\">\r\n                                    {chatMessages.length === 0 ? (\r\n                                        <p className=\"text-sm text-[var(--gray)]\">Aucun message pour l'instant.</p>\r\n                                    ) : (\r\n                                        chatMessages.map((msg) => (\r\n                                            <div key={msg.id} className=\"text-sm my-1\">\r\n                                                <span className=\"font-bold text-[var(--accent)]\">{msg.sender} :</span>\r\n                                                <span className=\"ml-2\">{msg.text}</span>\r\n                                                <span className=\"text-xs text-[var(--gray)] ml-2\">({msg.timestamp})</span>\r\n                                            </div>\r\n                                        ))\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Formulaire d'envoi */}\r\n                                <form onSubmit={sendChatMessage} className=\"flex gap-1\">\r\n                                    <textarea\r\n                                        className=\"text-sm text-black placeholder-gray-500 resize-none px-2 py-1 bg-white rounded\"\r\n                                        ref={chatMessageInputRef}\r\n                                        rows=\"1\"\r\n                                        placeholder=\"message...\"\r\n                                        onChange={handleTextareaResize}\r\n                                        onKeyDown={hanldleChatKeyDown}\r\n                                    />\r\n                                    <button className=\"px-3 py-1 self-end active:shadow-none font-bold cursor-pointer text-(--white) shadow bg-(--accent) duration-200 hover:bg-(--accent-lighter) rounded\" type=\"submit\">{\">\"}</button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nasync function fetchTracks(mode = \"genre\", q = \"0\", limit = 25, minRank = 0, maxRank = 1000000) {\r\n    q = q.replace(/\\s/g, '');\r\n    console.log(q);\r\n    const res = await fetch(\r\n        `/api/tracks?mode=${mode}&q=${encodeURIComponent(q)}&limit=${limit}&minRank=${minRank}&maxRank=${maxRank}`\r\n    );\r\n    if (!res.ok) throw new Error(`Erreur HTTP ${res.status}`);\r\n    const data = await res.json();\r\n    return data;\r\n}"],"names":[],"mappings":"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"}}]
}