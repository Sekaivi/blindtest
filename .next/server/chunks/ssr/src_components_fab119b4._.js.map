{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/Loading.jsx"],"sourcesContent":["'use client';\r\nimport React from 'react'\r\nimport { motion, useReducedMotion } from 'framer-motion'\r\n\r\nexport default function BlindtestLoader({\r\n                                            size = 50,\r\n                                            color = 'bg-(--accent)',\r\n                                            speed = 2,\r\n                                            message = \"Chargement de votre blindtest\"\r\n                                        }) {\r\n    const shouldReduce = useReducedMotion()\r\n    const baseHeight = size * 0.4\r\n    const fullHeight = size\r\n    const barWidth = size / 3\r\n\r\n    const barStyle = {\r\n        width: `${barWidth}px`,\r\n        borderRadius: '10px',\r\n    }\r\n\r\n    const variants = {\r\n        animate: (i) => ({\r\n            height: [baseHeight, fullHeight, baseHeight, baseHeight],\r\n            transition: {\r\n                duration: speed,\r\n                repeat: Infinity,\r\n                ease: 'easeInOut',\r\n                delay: i * (speed / 4),\r\n                times: [0, 0.3, 0.6, 1],\r\n            },\r\n        }),\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center p-4 px-20\r\n        bg-(--middleground) shadow-md border border-solid border-(--foreground) rounded-lg\r\n        mx-auto max-w-screen-md md:max-w-screen-lg lg:max-w-screen-xl\">\r\n\r\n            <div className=\"mb-3 text-center\">\r\n                <span className=\"sr-only\">{message}</span>\r\n                <h3 className=\"text-xl font-medium text-(--text) zalando-sans-expanded-regular\">\r\n                    {message}\r\n                </h3>\r\n            </div>\r\n\r\n            <div\r\n                role=\"status\"\r\n                aria-live=\"polite\"\r\n                aria-label={message}\r\n                className=\"flex items-center gap-2 h-16 justify-center\"\r\n            >\r\n                {[0, 1, 2].map((i) =>\r\n                    shouldReduce ? (\r\n                        <div\r\n                            key={i}\r\n                            style={{ ...barStyle, height: `${baseHeight}px` }}\r\n                            className={`${color}`}\r\n                        />\r\n                    ) : (\r\n                        <motion.div\r\n                            key={i}\r\n                            custom={i}\r\n                            variants={variants}\r\n                            animate=\"animate\"\r\n                            style={barStyle}\r\n                            className={`${color} origin-bottom`}\r\n                        />\r\n                    )\r\n                )}\r\n            </div>\r\n\r\n            <p className=\"mt-2 text-md text-gray-500\">Veuillez patienter...</p>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAFA;;;;AAIe,SAAS,gBAAgB,EACI,OAAO,EAAE,EACT,QAAQ,eAAe,EACvB,QAAQ,CAAC,EACT,UAAU,+BAA+B,EAC5C;IACrC,MAAM,eAAe,IAAA,6NAAgB;IACrC,MAAM,aAAa,OAAO;IAC1B,MAAM,aAAa;IACnB,MAAM,WAAW,OAAO;IAExB,MAAM,WAAW;QACb,OAAO,GAAG,SAAS,EAAE,CAAC;QACtB,cAAc;IAClB;IAEA,MAAM,WAAW;QACb,SAAS,CAAC,IAAM,CAAC;gBACb,QAAQ;oBAAC;oBAAY;oBAAY;oBAAY;iBAAW;gBACxD,YAAY;oBACR,UAAU;oBACV,QAAQ;oBACR,MAAM;oBACN,OAAO,IAAI,CAAC,QAAQ,CAAC;oBACrB,OAAO;wBAAC;wBAAG;wBAAK;wBAAK;qBAAE;gBAC3B;YACJ,CAAC;IACL;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAIX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAU;kCAAW;;;;;;kCAC3B,8OAAC;wBAAG,WAAU;kCACT;;;;;;;;;;;;0BAIT,8OAAC;gBACG,MAAK;gBACL,aAAU;gBACV,cAAY;gBACZ,WAAU;0BAET;oBAAC;oBAAG;oBAAG;iBAAE,CAAC,GAAG,CAAC,CAAC,IACZ,6BACI,8OAAC;wBAEG,OAAO;4BAAE,GAAG,QAAQ;4BAAE,QAAQ,GAAG,WAAW,EAAE,CAAC;wBAAC;wBAChD,WAAW,GAAG,OAAO;uBAFhB;;;;6CAKT,8OAAC,oMAAM,CAAC,GAAG;wBAEP,QAAQ;wBACR,UAAU;wBACV,SAAQ;wBACR,OAAO;wBACP,WAAW,GAAG,MAAM,cAAc,CAAC;uBAL9B;;;;;;;;;;0BAWrB,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAGtD","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/Leaderboard.jsx"],"sourcesContent":["'use client';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/stores/authContext';\r\nimport BlindtestLoader from \"@/components/Loading\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function Leaderboard() {\r\n    const { user } = useAuth(); // utilisateur connecté\r\n    const [scores, setScores] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchScores = async () => {\r\n            try {\r\n                const res = await fetch('/api/score/leaderboard');\r\n                const data = await res.json();\r\n                if (res.ok) {\r\n                    // Tri par score décroissant\r\n                    const sorted = data.leaderboard.sort((a, b) => b.score_user - a.score_user);\r\n                    setScores(sorted);\r\n                } else {\r\n                    console.error('Erreur API leaderboard:', data.error);\r\n                }\r\n            } catch (err) {\r\n                console.error('Erreur réseau leaderboard:', err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchScores();\r\n    }, []);\r\n\r\n    if (loading) return <BlindtestLoader message={\"Chargement du leaderboard\"} />;\r\n    if (scores.length === 0) return <BlindtestLoader message={\"Aucun score enregistré pour l'instant\"} />;\r\n\r\n    // Classement de l'utilisateur connecté\r\n    const userRank = user\r\n        ? scores.findIndex((s) => s.user_id === user.id)\r\n        : -1;\r\n\r\n    return (\r\n        <section className=\"flex flex-col mx-auto max-w-screen-md md:max-w-screen-lg lg:max-w-screen-xl px-8 py-4 bg-[var(--middleground)] rounded-lg border border-[var(--foreground)] shadow-md\">\r\n\r\n            {/* --- Classement global --- */}\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold mb-4 text-[var(--text)]\">Leaderboard</h2>\r\n                <table className=\"w-full border-spacing-0 border-separate bg-(--background) border border-(--foreground) rounded-lg shadow\">\r\n                    <thead className=\"text-[var(--text)] text-left\">\r\n                    <tr>\r\n                        <th className=\"px-8 py-2 w-[10%]\">Rang</th>\r\n                        <th className=\"border-x border-(--foreground) px-8 py-2 w-[60%]\">Pseudo</th>\r\n                        <th className=\"px-8 py-2 w-[30%]\">Score</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody className=\"text-[var(--text)] text-left\">\r\n                    {scores.map((player, index) => (\r\n                        <tr key={player.user_id}>\r\n                            <td className=\"border-t border-[var(--foreground)] px-8 py-2\">{index + 1}</td>\r\n                            <td className=\"border-x border-t border-[var(--foreground)] px-8 py-2\">{player.name}</td>\r\n                            <td className=\"border-t border-[var(--foreground)] px-8 py-2\">\r\n                                {player.score_user} {player.delta ? <span className=\"text-[var(--accent)]\">(+{player.delta})</span> : null}\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {/* --- Classement de l’utilisateur connecté --- */}\r\n            {user && userRank >= 0 && (\r\n                <div className=\"mt-6\">\r\n                    <h3 className=\"text-xl font-bold mb-2 text-(--text)\">Votre classement</h3>\r\n                    <table className=\"w-full border-spacing-0 border-separate mt-2 bg-(--background) border border-(--foreground) rounded-lg shadow\">\r\n                        <tbody className=\"text-(--text) text-left\">\r\n                        <tr>\r\n                            <td className=\"px-8 py-2 w-[10%]\">{userRank + 1}</td>\r\n                            <td className=\"border-x border-(--foreground) px-8 py-2 w-[60%]\">{scores[userRank].name}</td>\r\n                            <td className=\"px-8 py-2 w-[30%]\">{scores[userRank].score_user}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n\r\n            {/* --- Si pas connecté --- */}\r\n            {!user && (\r\n                <div\r\n                    className=\"flex flex-row items-center justify-between px-8 bg-[var(--background)] py-4 mt-4 rounded-lg border border-[var(--foreground)] shadow\">\r\n                <p className=\"text-[var(--text)]\">Connectez-vous pour commencer à accumuler des points.</p>\r\n                    <Link href={\"/login\"} className=\"cursor-pointer text-[var(--white)] shadow bg-[var(--accent)] duration-200 hover:bg-[var(--accent-lighter)] font-bold uppercase rounded px-4 py-2 active:shadow-none\">\r\n                        Se connecter\r\n                    </Link>\r\n                </div>\r\n            )}\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAMe,SAAS;IACpB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,uIAAO,KAAI,uBAAuB;IACnD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACN,MAAM,cAAc;YAChB,IAAI;gBACA,MAAM,MAAM,MAAM,MAAM;gBACxB,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,IAAI,EAAE,EAAE;oBACR,4BAA4B;oBAC5B,MAAM,SAAS,KAAK,WAAW,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,UAAU,GAAG,EAAE,UAAU;oBAC1E,UAAU;gBACd,OAAO;oBACH,QAAQ,KAAK,CAAC,2BAA2B,KAAK,KAAK;gBACvD;YACJ,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC,8BAA8B;YAChD,SAAU;gBACN,WAAW;YACf;QACJ;QAEA;IACJ,GAAG,EAAE;IAEL,IAAI,SAAS,qBAAO,8OAAC,wIAAe;QAAC,SAAS;;;;;;IAC9C,IAAI,OAAO,MAAM,KAAK,GAAG,qBAAO,8OAAC,wIAAe;QAAC,SAAS;;;;;;IAE1D,uCAAuC;IACvC,MAAM,WAAW,OACX,OAAO,SAAS,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK,KAAK,EAAE,IAC7C,CAAC;IAEP,qBACI,8OAAC;QAAQ,WAAU;;0BAGf,8OAAC;;kCACG,8OAAC;wBAAG,WAAU;kCAA6C;;;;;;kCAC3D,8OAAC;wBAAM,WAAU;;0CACb,8OAAC;gCAAM,WAAU;0CACjB,cAAA,8OAAC;;sDACG,8OAAC;4CAAG,WAAU;sDAAoB;;;;;;sDAClC,8OAAC;4CAAG,WAAU;sDAAmD;;;;;;sDACjE,8OAAC;4CAAG,WAAU;sDAAoB;;;;;;;;;;;;;;;;;0CAGtC,8OAAC;gCAAM,WAAU;0CAChB,OAAO,GAAG,CAAC,CAAC,QAAQ,sBACjB,8OAAC;;0DACG,8OAAC;gDAAG,WAAU;0DAAiD,QAAQ;;;;;;0DACvE,8OAAC;gDAAG,WAAU;0DAA0D,OAAO,IAAI;;;;;;0DACnF,8OAAC;gDAAG,WAAU;;oDACT,OAAO,UAAU;oDAAC;oDAAE,OAAO,KAAK,iBAAG,8OAAC;wDAAK,WAAU;;4DAAuB;4DAAG,OAAO,KAAK;4DAAC;;;;;;+DAAW;;;;;;;;uCAJrG,OAAO,OAAO;;;;;;;;;;;;;;;;;;;;;;YAalC,QAAQ,YAAY,mBACjB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAuC;;;;;;kCACrD,8OAAC;wBAAM,WAAU;kCACb,cAAA,8OAAC;4BAAM,WAAU;sCACjB,cAAA,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAAqB,WAAW;;;;;;kDAC9C,8OAAC;wCAAG,WAAU;kDAAoD,MAAM,CAAC,SAAS,CAAC,IAAI;;;;;;kDACvF,8OAAC;wCAAG,WAAU;kDAAqB,MAAM,CAAC,SAAS,CAAC,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQ7E,CAAC,sBACE,8OAAC;gBACG,WAAU;;kCACd,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;kCAC9B,8OAAC,uKAAI;wBAAC,MAAM;wBAAU,WAAU;kCAAsK;;;;;;;;;;;;;;;;;;AAO1N","debugId":null}}]
}