{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/blindtestOptions/Search.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function Search({ type }) {\r\n    const [query, setQuery] = useState(\"\");\r\n    const [limit, setLimit] = useState(25)\r\n    const router = useRouter();\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!query.trim()) return;\r\n        try {\r\n            let searchQuery;\r\n\r\n            // If user pasted a Deezer link:\r\n            if (query.includes(\"deezer.com\")) {\r\n                const res = await fetch(\"/api/resolve\", {\r\n                    method: \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify({ link: query }),\r\n                });\r\n\r\n                const data = await res.json();\r\n                if (data.error) throw new Error(data.error);\r\n                searchQuery = data.id;\r\n            } else {\r\n                searchQuery = query;\r\n            }\r\n            router.push(`/jeu/${type}/${encodeURIComponent(searchQuery)}?limit=${limit}`);\r\n        } catch (err) {\r\n            console.error(\"Erreur pendant la recherche :\", err);\r\n        }\r\n    }\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"flex items-end\">\r\n            <input type=\"text\" value={query} onChange={(e) => setQuery(e.target.value)}\r\n                placeholder=\"Rechercher\" className=\"border p-2 rounded-l\" />\r\n            <div className=\"flex flex-col gap-2\">\r\n                <label>Nombre de musique chargées</label>\r\n                <input type=\"number\" value={limit} onChange={(e) => setLimit(e.target.value)}\r\n                    placeholder=\"Limite\" className=\"border p-2 rounded-l\" />\r\n            </div>\r\n            <button type=\"submit\" className=\"bg-white text-black px-4 py-2 rounded-r\">\r\n                Créer mon blindtest :D\r\n            </button>\r\n        </form>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,OAAO,EAAE,IAAI,EAAE;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,MAAM,IAAI,IAAI;QACnB,IAAI;YACA,IAAI;YAEJ,gCAAgC;YAChC,IAAI,MAAM,QAAQ,CAAC,eAAe;gBAC9B,MAAM,MAAM,MAAM,MAAM,gBAAgB;oBACpC,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE,MAAM;oBAAM;gBACvC;gBAEA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,KAAK,KAAK,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK;gBAC1C,cAAc,KAAK,EAAE;YACzB,OAAO;gBACH,cAAc;YAClB;YACA,OAAO,IAAI,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,mBAAmB,aAAa,OAAO,EAAE,OAAO;QAChF,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,iCAAiC;QACnD;IACJ;IACA,qBACI,8OAAC;QAAK,UAAU;QAAc,WAAU;;0BACpC,8OAAC;gBAAM,MAAK;gBAAO,OAAO;gBAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACrE,aAAY;gBAAa,WAAU;;;;;;0BACvC,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAM,MAAK;wBAAS,OAAO;wBAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACvE,aAAY;wBAAS,WAAU;;;;;;;;;;;;0BAEvC,8OAAC;gBAAO,MAAK;gBAAS,WAAU;0BAA0C;;;;;;;;;;;;AAKtF","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/Loading.jsx"],"sourcesContent":["'use client';\r\nimport React from 'react'\r\nimport { motion, useReducedMotion } from 'framer-motion'\r\n\r\n    export default function BlindtestLoader({ size = 50, color = 'bg-(--accent)', speed = 2 }) {\r\n    const shouldReduce = useReducedMotion()\r\n    const baseHeight = size * 0.4 // hauteur mini (40% de la taille)\r\n    const fullHeight = size // hauteur max\r\n    const barWidth = size / 3\r\n    const barStyle = {\r\n        width: `${barWidth}px`,\r\n        borderRadius: '6px',\r\n    }\r\n\r\n    const variants = {\r\n        animate: (i) => ({\r\n            height: [baseHeight, fullHeight, baseHeight, baseHeight],\r\n            transition: {\r\n                duration: speed,\r\n                repeat: Infinity,\r\n                ease: 'easeInOut',\r\n                delay: i * (speed / 4),\r\n                times: [0, 0.3, 0.6, 1],\r\n            },\r\n        }),\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center p-4 px-20\r\n        bg-[var(--middleground)] shadow-md border border-solid border-[var(--foreground)] rounded-[10px]\">\r\n            <div className=\"mb-3 text-center\">\r\n                <span className=\"sr-only\">Chargement de votre blindtest</span>\r\n                <h3 className=\"text-xl font-medium text-(--text) zalando-sans-expanded-regular\">\r\n                    Chargement de votre blindtest\r\n                </h3>\r\n            </div>\r\n\r\n            <div\r\n                role=\"status\"\r\n                aria-live=\"polite\"\r\n                aria-label=\"Chargement de votre blindtest\"\r\n                className=\"flex items-center gap-2 h-16 justify-center\"\r\n            >\r\n                {[0, 1, 2].map((i) =>\r\n                    shouldReduce ? (\r\n                        <div\r\n                            key={i}\r\n                            style={{ ...barStyle, height: `${baseHeight}px` }}\r\n                            className={`${color}`}\r\n                        />\r\n                    ) : (\r\n                        <motion.div\r\n                            key={i}\r\n                            custom={i}\r\n                            variants={variants}\r\n                            animate=\"animate\"\r\n                            style={barStyle}\r\n                            className={`${color} origin-bottom`}\r\n                        />\r\n                    )\r\n                )}\r\n            </div>\r\n\r\n            <p className=\"mt-2 text-md text-gray-500\">Veuillez patienter...</p>\r\n        </div>\r\n    )\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAFA;;;;AAImB,SAAS,gBAAgB,EAAE,OAAO,EAAE,EAAE,QAAQ,eAAe,EAAE,QAAQ,CAAC,EAAE;IACzF,MAAM,eAAe,IAAA,6NAAgB;IACrC,MAAM,aAAa,OAAO,IAAI,kCAAkC;;IAChE,MAAM,aAAa,KAAK,cAAc;;IACtC,MAAM,WAAW,OAAO;IACxB,MAAM,WAAW;QACb,OAAO,GAAG,SAAS,EAAE,CAAC;QACtB,cAAc;IAClB;IAEA,MAAM,WAAW;QACb,SAAS,CAAC,IAAM,CAAC;gBACb,QAAQ;oBAAC;oBAAY;oBAAY;oBAAY;iBAAW;gBACxD,YAAY;oBACR,UAAU;oBACV,QAAQ;oBACR,MAAM;oBACN,OAAO,IAAI,CAAC,QAAQ,CAAC;oBACrB,OAAO;wBAAC;wBAAG;wBAAK;wBAAK;qBAAE;gBAC3B;YACJ,CAAC;IACL;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAU;kCAAU;;;;;;kCAC1B,8OAAC;wBAAG,WAAU;kCAAkE;;;;;;;;;;;;0BAKpF,8OAAC;gBACG,MAAK;gBACL,aAAU;gBACV,cAAW;gBACX,WAAU;0BAET;oBAAC;oBAAG;oBAAG;iBAAE,CAAC,GAAG,CAAC,CAAC,IACZ,6BACI,8OAAC;wBAEG,OAAO;4BAAE,GAAG,QAAQ;4BAAE,QAAQ,GAAG,WAAW,EAAE,CAAC;wBAAC;wBAChD,WAAW,GAAG,OAAO;uBAFhB;;;;6CAKT,8OAAC,oMAAM,CAAC,GAAG;wBAEP,QAAQ;wBACR,UAAU;wBACV,SAAQ;wBACR,OAAO;wBACP,WAAW,GAAG,MAAM,cAAc,CAAC;uBAL9B;;;;;;;;;;0BAWrB,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAGtD","debugId":null}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/TrackAudio.js"],"sourcesContent":["\"use client\";\r\nimport React, { forwardRef, useEffect, useState } from \"react\";\r\nimport { Play, Pause } from \"lucide-react\";\r\n\r\nconst TrackAudio = forwardRef(({ track, visible }, ref) => {\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [audioProgress, setAudioProgress] = useState(0); // 0..100\r\n    const [duration, setDuration] = useState(0);\r\n\r\n    // Sync src quand track change (sécurise si parent ne set pas src)\r\n    useEffect(() => {\r\n        if (!ref?.current) return;\r\n        const audio = ref.current;\r\n        if (track?.preview) {\r\n            if (audio.src !== track.preview) audio.src = track.preview;\r\n        }\r\n        // ne pas autoplay ici ; le parent contrôle play()\r\n    }, [track, ref]);\r\n\r\n    // Events : timeupdate, loadedmetadata, play/pause\r\n    useEffect(() => {\r\n        if (!ref?.current) return;\r\n        const audio = ref.current;\r\n\r\n        const onTimeUpdate = () => {\r\n            if (!audio.duration || isNaN(audio.duration)) {\r\n                setAudioProgress(0);\r\n                return;\r\n            }\r\n            const pct = (audio.currentTime / audio.duration) * 100;\r\n            setAudioProgress(pct);\r\n        };\r\n\r\n        const onLoaded = () => {\r\n            setDuration(audio.duration || 0);\r\n            onTimeUpdate();\r\n        };\r\n\r\n        const onPlay = () => setIsPlaying(true);\r\n        const onPause = () => setIsPlaying(false);\r\n\r\n        audio.addEventListener(\"timeupdate\", onTimeUpdate);\r\n        audio.addEventListener(\"loadedmetadata\", onLoaded);\r\n        audio.addEventListener(\"play\", onPlay);\r\n        audio.addEventListener(\"pause\", onPause);\r\n\r\n        // cleanup\r\n        return () => {\r\n            audio.removeEventListener(\"timeupdate\", onTimeUpdate);\r\n            audio.removeEventListener(\"loadedmetadata\", onLoaded);\r\n            audio.removeEventListener(\"play\", onPlay);\r\n            audio.removeEventListener(\"pause\", onPause);\r\n        };\r\n    }, [ref]);\r\n\r\n    const togglePlay = () => {\r\n        if (!ref?.current) return;\r\n        const audio = ref.current;\r\n        if (audio.paused) {\r\n            audio.play();\r\n        } else {\r\n            audio.pause();\r\n        }\r\n        // isPlaying sera mis à jour par les handlers play/pause ci-dessus\r\n    };\r\n\r\n    const handleSeek = (e) => {\r\n        if (!ref?.current || !duration) return;\r\n        const val = Number(e.target.value); // 0..100\r\n        const newTime = (val / 100) * duration;\r\n        ref.current.currentTime = newTime;\r\n        setAudioProgress(val);\r\n    };\r\n\r\n    // On affiche l'élément audio quoi qu'il arrive (pour que la lecture continue)\r\n    // mais l'UI (bouton + barre) n'apparaît que si visible === true\r\n    return (\r\n        <div className=\"w-full mx-4\">\r\n            {/* Element audio réel : toujours présent */}\r\n            <audio ref={ref}>\r\n                <source src={track?.preview} type=\"audio/mpeg\" />\r\n            </audio>\r\n\r\n            {/* UI visible seulement après show answer / game over */}\r\n            {visible && (\r\n                <div className=\"w-full flex flex-col gap-2 p-3 bg-(--background) rounded-lg border border-(--foreground) shadow-sm\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        {/* Play/Pause */}\r\n                        <button\r\n                            onClick={togglePlay}\r\n                            aria-label={isPlaying ? \"Pause\" : \"Play\"}\r\n                            className=\"hover:scale-[110%] transition cursor-pointer\"\r\n                        >\r\n                            {isPlaying ? <Pause size={22} color=\"var(--gray)\" fill=\"var(--gray)\" strokeWidth=\"1px\" /> : <Play size={22} color=\"var(--gray)\" fill=\"var(--gray)\" strokeWidth=\"1px\" />}\r\n                        </button>\r\n\r\n                        {/* Barre de lecture stylée + draggable */}\r\n                        <div className=\"relative w-full select-none\">\r\n\r\n                            {/* --- BARRE VISUELLE --- */}\r\n                            <div className=\"relative h-3 rounded bg-purple-300 overflow-hidden\">\r\n                                <div\r\n                                    className={`absolute h-3 rounded transition-all duration-300 bg-(--accent)`}\r\n                                    style={{ width: `${audioProgress}%` }}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* --- INPUT RANGE INVISIBLE MAIS INTERACTIF --- */}\r\n                            <input\r\n                                type=\"range\"\r\n                                min=\"0\"\r\n                                max=\"100\"\r\n                                value={Math.max(0, Math.min(100, audioProgress))}\r\n                                onChange={handleSeek}\r\n                                className=\"absolute top-0 left-0 w-full h-3 opacity-0 cursor-pointer\"\r\n                                style={{ WebkitAppearance: \"none\" }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Times */}\r\n                    <div className=\"flex justify-between text-xs text-(--gray)\">\r\n            <span>\r\n              {ref.current ? formatTime(ref.current.currentTime) : \"00:00\"}\r\n            </span>\r\n                        <span>{formatTime(duration)}</span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\n// utilitaire local pour formatage hh:mm:ss -> mm:ss\r\nfunction formatTime(sec) {\r\n    if (!sec || isNaN(sec)) return \"00:00\";\r\n    const s = Math.floor(sec);\r\n    const m = Math.floor(s / 60);\r\n    const ss = s % 60;\r\n    return `${String(m).padStart(2, \"0\")}:${String(ss).padStart(2, \"0\")}`;\r\n}\r\n\r\nexport default TrackAudio;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 552, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/components/Track.jsx"],"sourcesContent":["// pour afficher des musiques lol\r\nexport default function Track({ track }) {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center p-4 w-[100%]\r\n        bg-[var(--background)] shadow border border-solid border-[var(--foreground)] rounded-lg\">\r\n        <div className=\"mx-auto w-2xs flex flex-col gap-3 items-center\" key={track.id}>\r\n          <img className=\"w-full h-auto shadow-xl border border-solid border-[var(--foreground)] rounded-lg\"\r\n               src={track.album.cover_xl} alt={`Couverture de l'album: ${track.album.title}`} />\r\n          <div className=\"text-center flex flex-col items-center\">\r\n            <p className=\"text-lg text-(--text)\">{track.title}</p>\r\n            <p className=\"text-sm text-(--gray)\">{track.artist.name}</p>\r\n          </div>\r\n          <a href={track.link} target=\"_blank\" className=\"bg-[var(--accent)] hover:bg-[var(--accent-lighter)] text-[var(--white)]\r\n          cursor-pointer px-4 py-2 rounded font-bold uppercase active:text-gray-50 duration-300\">écouter sur Deezer</a>\r\n        </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;;AAClB,SAAS,MAAM,EAAE,KAAK,EAAE;IACrC,qBACE,8OAAC;QAAI,WAAU;kBAEX,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;oBACV,KAAK,MAAM,KAAK,CAAC,QAAQ;oBAAE,KAAK,CAAC,uBAAuB,EAAE,MAAM,KAAK,CAAC,KAAK,EAAE;;;;;;8BAClF,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAAyB,MAAM,KAAK;;;;;;sCACjD,8OAAC;4BAAE,WAAU;sCAAyB,MAAM,MAAM,CAAC,IAAI;;;;;;;;;;;;8BAEzD,8OAAC;oBAAE,MAAM,MAAM,IAAI;oBAAE,QAAO;oBAAS,WAAU;8BACwC;;;;;;;WARpB,MAAM,EAAE;;;;;;;;;;AAYrF","debugId":null}},
    {"offset": {"line": 631, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/roxis/Documents/Travail/MMI/S5/blindtest/src/app/jeu/vs/VSMode.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\nimport BlindtestLoader from \"@/components/Loading\";\r\nimport TrackAudio from '@/components/TrackAudio';\r\nimport Track from \"@/components/Track\" ;\r\nimport { createServerSearchParamsForServerPage } from \"next/dist/server/request/search-params\";\r\nimport { ConstructionIcon } from \"lucide-react\";\r\n\r\nexport default function VSMode() {\r\n\r\n    // CLASSEMENT EN FIN DE PARTIE !!!\r\n\r\n    // state machine\r\n    const GAME_STATE = {\r\n        PAUSED: 'paused',\r\n        PLAYING: \"playing\",\r\n        SHOW_ANSWER: \"show_answer\",\r\n        GAME_OVER: \"game_over\",\r\n        WAITING: \"waiting\",\r\n    };\r\n\r\n    const SOCKET_SERVER_URL = process.env.NEXT_PUBLIC_SOCKET_URL || \"http://localhost:10000\";\r\n\r\n    const [isConnected, setIsConnected] = useState(false);\r\n    const [pseudo, setPseudo] = useState(\"\");\r\n    const [players, setPlayers] = useState({});\r\n    const [roomCode, setRoomCode] = useState('');\r\n    const [gameState, setGameState] = useState(false); // à mettre à jour en fonction du serveur uniquement\r\n    const [songs, setSongs] = useState([]);\r\n    const [currentSong, setCurrentSong] = useState(0);\r\n    // POUR LE CHAT D'UNE ROOM !!\r\n    const [message, setMessages] = useState([]);\r\n    // pour garder une ref sur les inputs de reponse\r\n    const titleAnswerRef = useRef(null);\r\n    const artistAnswerRef = useRef(null);\r\n     const socketRef = useRef(null);\r\n    const playersRef = useRef(players);\r\n\r\n    // variables pour l'interface ?\r\n    const [points, setPoints] = useState(0);\r\n    const [pointsPopup, setPointsPopup] = useState(null);\r\n    const audioRef = useRef(null); // controler l'audio !\r\n\r\n    // POUR LES REPONSES !!\r\n    const [answers, setAnswers] = useState([]);\r\n    const [answerMessage, setAnswerMessage] = useState(\"\");\r\n    const [answerMessageColor, setAnswerMessageColor] = useState('');\r\n    const [titleBox, setTitleBox] = useState('');\r\n    const [artistBox, setArtistBox] = useState('');\r\n\r\n    // uniquement pour la fin pour la visualisation\r\n    const nextSong = () => {\r\n        if (currentSong < songs.length - 1) {\r\n            setCurrentSong(prev => prev + 1)\r\n        }\r\n    };\r\n\r\n    const prevSong = () => {\r\n        if (currentSong > 0) {\r\n            setCurrentSong(prev => prev - 1)\r\n        }\r\n    };\r\n\r\n    const updatePlayerProperty = (playerId, key, newValue) => {\r\n        setPlayers(prevPlayers => {\r\n            const updatedPlayers = { ...prevPlayers };\r\n\r\n            if (updatedPlayers[playerId]) {\r\n                updatedPlayers[playerId] = {\r\n                    ...updatedPlayers[playerId],\r\n                    [key]: newValue\r\n                };\r\n            }\r\n            return updatedPlayers;\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (audioRef.current) {\r\n            audioRef.current.pause();\r\n            audioRef.current.currentTime = 0;\r\n            audioRef.current.src = songs[currentSong].preview;\r\n        }\r\n    }, [currentSong]);\r\n\r\n    useEffect(() => {\r\n        playersRef.current = players;\r\n    }, [players]);\r\n\r\n    useEffect(() => {\r\n        console.log(gameState);\r\n    }, [gameState]);\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(\"Toutes les réponses :\", answers);\r\n    }, [answers]);\r\n\r\n\r\n    // sockets communication ^^\r\n    useEffect(() => {\r\n        const socket = io(SOCKET_SERVER_URL, {\r\n            path: \"/socket.io\",\r\n            transports: [\"websocket\"],\r\n        });\r\n\r\n        socketRef.current = socket;\r\n\r\n        socket.on('connect', () => {\r\n            socket.emit('message', 'hallo');\r\n            setIsConnected(true);\r\n        });\r\n\r\n        socket.on('roomCreated', async (roomCode) => {\r\n            setRoomCode(roomCode);\r\n            // ajouter des parametres lors de la creation d'une room pour permettre plus de choses ?\r\n            try {\r\n                const tracks = await fetchTracks(\"search\", \"disney\" , 5);\r\n                setSongs(tracks);\r\n                socket.emit('setTrackList', tracks);\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        });\r\n\r\n        socket.on('roomJoined', (roomCode) => {\r\n            setRoomCode(roomCode);\r\n        });\r\n\r\n        socket.on('roomError', (error) => {\r\n            console.log(error);\r\n        });\r\n\r\n        // mise à jour des JOUEURS\r\n        socket.on(\"currentPlayers\", (serverPlayers) => {\r\n            setPlayers(serverPlayers);\r\n            playersRef.current = serverPlayers;\r\n        });\r\n\r\n        socket.on(\"playerHasAnswered\", (data) => {\r\n            const [playerId, answerState] = data;\r\n            updatePlayerProperty(playerId, 'answered', answerState);\r\n        });\r\n\r\n        socket.on('setGameState', (serverGameState) => {\r\n            const currentPlayers = playersRef.current;\r\n            setGameState(serverGameState);\r\n            console.log('Game state update from server: ' + serverGameState);\r\n            if (serverGameState === GAME_STATE.PLAYING) {\r\n                handleStart();\r\n            }\r\n            if (serverGameState === GAME_STATE.SHOW_ANSWER || serverGameState === GAME_STATE.GAME_OVER) {\r\n                handleReset();\r\n            }\r\n\r\n            if (currentPlayers[socket.id].roomLeader) {\r\n                if (serverGameState === GAME_STATE.SHOW_ANSWER) {\r\n                    setGameStateMessage(['Passer à la suite', serverNextSong]);\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        socket.on('setTrackList', (tracks) => {\r\n            setSongs(tracks);\r\n        });\r\n\r\n        socket.on('nextSongInBlindtest', () => {\r\n            setCurrentSong((p) => p + 1);\r\n            const currentPlayers = playersRef.current;\r\n            titleAnswerRef.current.value = \"\";\r\n            artistAnswerRef.current.value = \"\";\r\n            setAnswerMessage('');\r\n            if (currentPlayers[socket.id].roomLeader) {\r\n                setGameStateMessage(['Lancer la musique', setServerPlaying]);\r\n            }\r\n        });\r\n\r\n        socket.on('playerAnswerResult', ({ correctTitle, correctArtist, totalPoints, pointsGained }) => {\r\n            setTitleBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--error)]');\r\n            setArtistBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--error)]');\r\n\r\n            if (correctTitle) {\r\n                setTitleBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--valid)]');\r\n            }\r\n\r\n            if (correctArtist) {\r\n                setArtistBox('bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--valid)]')\r\n            }\r\n\r\n            if (correctTitle && correctArtist) {\r\n                setAnswerMessage('Tout juste, bravo ! +11pts');\r\n                setAnswerMessageColor('text-[var(--valid)]');\r\n            } else if (correctArtist) {\r\n                setAnswerMessage(`Tu as trouvé l'artiste mais pas la chanson. +5pts`);\r\n                setAnswerMessageColor('text-[var(--valid)]');\r\n            } else if (correctTitle) {\r\n                setAnswerMessage(`Tu as trouvé la chanson mais pas l'artiste. +5pts`);\r\n                setAnswerMessageColor('text-[var(--valid)]');\r\n            } else {\r\n                setAnswerMessage(\"Aucune bonne réponse... +0pts\");\r\n                setAnswerMessageColor('text-[var(--error)]');\r\n            }\r\n\r\n            setPoints(totalPoints);\r\n            setPointsPopup('+' + pointsGained);\r\n        });\r\n\r\n        socket.on('forceSubmitAnswer', () => {\r\n            handleAnswer();\r\n        })\r\n\r\n        return () => {\r\n            setIsConnected(false);\r\n            socket.disconnect();\r\n        }\r\n    }, []);\r\n\r\n    // fonctions pour les sockets\r\n    const createRoom = () => {\r\n        if (!pseudo.trim()) return alert(\"Entrez un pseudo !\");\r\n        socketRef.current.emit(\"createRoom\", pseudo);\r\n    };\r\n\r\n    const joinRoom = (e) => {\r\n        e.preventDefault();\r\n        const joinRoomCode = e.target.roomCode.value.trim();\r\n        if (!pseudo.trim() || !joinRoomCode)\r\n            return alert(\"Pseudo et code de room requis !\");\r\n        socketRef.current.emit(\"joinRoom\", { pseudo, joinRoomCode });\r\n    };\r\n\r\n    const handleAnswer = () => {\r\n        let rawTitleAnswer = titleAnswerRef.current?.value || \"\";\r\n        let rawArtistAnswer = artistAnswerRef.current?.value || \"\";\r\n        socketRef.current.emit('playerAnswer', { rawTitleAnswer, rawArtistAnswer });\r\n        setAnswers(prev => [...prev, { title: rawTitleAnswer, artist: rawArtistAnswer }]);\r\n    };\r\n\r\n    const setServerPlaying = () => {\r\n        socketRef.current.emit('setGamePlaying');\r\n    }\r\n\r\n    const serverNextSong = () => {\r\n        socketRef.current.emit('nextSongBlindtest') ;\r\n    }\r\n\r\n    const startGame = () => {\r\n        socketRef.current.emit('startGame');\r\n    };\r\n\r\n    // CONCERNANT LE TIMER !!\r\n    //\r\n    //\r\n    const musicTime = 20;\r\n    const [duration, setDuration] = useState(musicTime);\r\n    const [timeLeft, setTimeLeft] = useState(musicTime);\r\n    const [isPaused, setIsPaused] = useState(false);\r\n    const [isActive, setIsActive] = useState(false);\r\n    const timerRef = useRef(null);\r\n    const progressBar = (timeLeft / duration) * 100;\r\n\r\n    // timer qui est lancé\r\n    const handleStart = () => {\r\n        if (timeLeft > 0) {\r\n            setIsActive(true);\r\n            setIsPaused(false);\r\n            audioRef.current?.play();\r\n            setGameStateMessage(['Partie en cours', () => {\r\n            }]);\r\n        }\r\n    };\r\n\r\n    const handlePause = () => {\r\n        if (isActive) {\r\n            setIsPaused(true);\r\n            setIsActive(false);\r\n            if (timerRef.current) {\r\n                clearInterval(timerRef.current);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setIsActive(false);\r\n        setIsPaused(false);\r\n        setTimeLeft(typeof duration === \"number\" ? duration : 0);\r\n        if (timerRef.current) {\r\n            clearInterval(timerRef.current);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isActive) {\r\n            timerRef.current = setInterval(() => {\r\n                setTimeLeft((prevTime) => {\r\n                    if (prevTime <= 1) {\r\n                        clearInterval(timerRef.current);\r\n                        return 0;\r\n                    }\r\n                    return prevTime - 1;\r\n                });\r\n            }, 1000);\r\n        }\r\n        return () => {\r\n            if (timerRef.current) {\r\n                clearInterval(timerRef.current);\r\n            }\r\n        };\r\n    }, [isActive, isPaused]);\r\n\r\n    const formatTime = (time) => {\r\n        const seconds = time % 60;\r\n        return `${String(seconds).padStart(2, \"0\")}`;\r\n    };\r\n    // FIN DE LA PARTIE CONCERNANT LES MUSIQUES !!!\r\n    //\r\n    //\r\n\r\n    setTimeout(() => {\r\n        setPointsPopup(null);\r\n    }, 5000);\r\n\r\n    const [gameStateMessage, setGameStateMessage] = useState(['Lancer la musique', setServerPlaying]);\r\n\r\n    // la page\r\n    return (\r\n        <>\r\n            <h1>Blindtest en VS !</h1>\r\n            {roomCode && (\r\n                <p>Identifiant de la room: {roomCode}</p>\r\n            )}\r\n\r\n            {/* 1. Écran de connexion/création de salle (Lobby) */}\r\n            {!roomCode && (\r\n                <div className=\"flex flex-col items-center gap-4\">\r\n\r\n                    {/* Si non connecté */}\r\n                    {!isConnected ? (\r\n                        <>\r\n                            <p>Connexion au serveur en cours...</p>\r\n                            <BlindtestLoader />\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Votre pseudo\"\r\n                                value={pseudo}\r\n                                onChange={(e) => setPseudo(e.target.value)}\r\n                                className=\"bg-white text-black px-2 py-1 rounded\"\r\n                            />\r\n                            <button className=\"bg-white px-4 py-1 text-black\" onClick={createRoom}>Créer une partie</button>\r\n                            <p>Ou bien en rejoindre une:</p>\r\n                            <form className=\"flex gap-2\" onSubmit={joinRoom}>\r\n                                <input className=\"bg-white text-black\" type=\"text\" name=\"roomCode\" />\r\n                                <button className=\"bg-white px-4 py-1 text-black\" type=\"submit\">Rejoindre</button>\r\n                            </form>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n\r\n            {/* 2. Interface de Jeu (Blindtest) - Affichée UNIQUEMENT si roomCode existe */}\r\n            {roomCode && (\r\n                <main className=\"mx-auto max-w-screen-md md:max-w-screen-lg lg:max-w-screen-xl px-8\">\r\n                    {roomCode && gameState === GAME_STATE.WAITING && (\r\n                        <div className=\"flex flex-col items-center p-8 bg-[var(--middleground)] rounded-lg\">\r\n                            <h2>Salle {roomCode} - En attente</h2>\r\n                            <p>Yo {players[socketRef.current.id].pseudo} ! On attend les autres joueurs ?</p>\r\n                            {players[socketRef.current.id] && players[socketRef.current.id].roomLeader ? (\r\n                                <>\r\n                                    <p>Vous êtes le chef de salle !</p>\r\n                                    <button onClick={startGame} className=\"mt-4 bg-[var(--valid)] text-white font-bold rounded px-4 py-2\">\r\n                                        Lancer la partie !\r\n                                    </button>\r\n                                </>\r\n                            ) : (\r\n                                <p>En attente du chef de salle pour lancer la partie...</p>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {roomCode && gameState !== GAME_STATE.WAITING && (\r\n                        <>\r\n                            <div className=\"flex flex-col bg-[var(--middleground)] px-8 py-4 rounded-lg border border-[var(--foreground)] shadow-md\">\r\n                                <div className=\"flex flex-row justify-between w-[100%] mb-4\">\r\n                                    <div className=\"flex max-w-fit bg-[var(--middleground)] px-4 py-2 rounded-lg border border-[var(--foreground)] shadow\">\r\n                                        <div className=\"relative flex items-center\">\r\n                                            <p className=\"text-(--gray) whitespace-nowrap\">{points} pts</p>\r\n                                            {pointsPopup && <p className=\"ml-2 absolute points-popup\">{pointsPopup}</p>}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <TrackAudio\r\n                                        ref={audioRef}\r\n                                        track={songs[currentSong]}\r\n                                        visible={gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER}\r\n                                    />\r\n\r\n                                    <div className=\"flex max-w-fit bg-[var(--middleground)] px-4 py-2 rounded-lg border border-[var(--foreground)] shadow\">\r\n                                        <div className=\"relative flex items-center text-right\">\r\n                                            <p className=\"text-(--gray) whitespace-nowrap\">{currentSong + 1} / {songs.length}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <TrackAudio ref={audioRef} track={songs[currentSong]}\r\n                                    visible={gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER} />\r\n\r\n                                {(gameState === GAME_STATE.PLAYING || gameState === GAME_STATE.PAUSED) && (\r\n                                    <>\r\n                                        <div className=\"\">\r\n                                            <p className=\"font-bold text-center text-xl text-[var(--text)]\">{formatTime(timeLeft)}</p>\r\n\r\n                                            <div className={`relative h-3 rounded bg-purple-300`}>\r\n                                                <div\r\n                                                    className={`absolute h-3 rounded transition-all duration-500 ${timeLeft <= 5 ? \"bg-[var(--accent-lighter)]\" : \"bg-[var(--accent)]\"\r\n                                                        }`}\r\n                                                    style={{ width: `${progressBar}%` }}\r\n                                                >\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </>\r\n                                )}\r\n\r\n                                <button\r\n                                    onClick={gameStateMessage[1]}\r\n                                    className=\"cursor-pointer bg-[var(--white)] mx-auto shadow-md my-4 text-[var(--accent)] duration-200 hover:text-[var(--accent-lighter)] font-bold uppercase rounded px-4 py-2 active:shadow-[none] active:bg-gray-50\"\r\n                                >\r\n                                    {gameStateMessage[0]}\r\n                                </button>\r\n\r\n                                {/* FORM / inputs */}\r\n                                {(gameState === GAME_STATE.PLAYING || gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.PAUSED) && (\r\n                                    <>\r\n                                        <div className=\"flex justify-center items-center mb-4\">\r\n                                            <p className={answerMessageColor}>{answerMessage}</p>\r\n                                        </div>\r\n\r\n                                        <form\r\n                                            onSubmit={(e) => {\r\n                                                e.preventDefault();\r\n                                                handleAnswer();\r\n                                            }}\r\n                                            className=\"flex flex-col flex-wrap gap-2\"\r\n                                        >\r\n                                            <div className=\"flex gap-2 justify-center\">\r\n                                                <div className=\"flex flex-col gap-0\">\r\n                                                    <label htmlFor=\"musicTitle\" className=\"text-[var(--text)]\">Titre de la musique :</label>\r\n                                                    <input\r\n                                                        name=\"musicTitle\"\r\n                                                        ref={titleAnswerRef}\r\n                                                        className={`${gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER\r\n                                                            ? titleBox\r\n                                                            : 'bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--gray)]'\r\n                                                            }`}\r\n                                                        placeholder=\"Votre réponse\"\r\n                                                        type=\"text\"\r\n                                                        disabled={gameState !== GAME_STATE.PLAYING}\r\n                                                    />\r\n                                                </div>\r\n\r\n                                                <div className=\"flex flex-col gap-0\">\r\n                                                    <label htmlFor=\"artistName\" className=\"text-[var(--text)]\">Nom de l'artiste :</label>\r\n                                                    <input\r\n                                                        name=\"artistName\"\r\n                                                        ref={artistAnswerRef}\r\n                                                        className={`${gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.GAME_OVER\r\n                                                            ? artistBox\r\n                                                            : 'bg-[var(--white)] text-[var(--black)] rounded px-4 py-2 placeholder-[var(--gray)] border border-[var(--gray)]'\r\n                                                            }`}\r\n                                                        placeholder=\"Votre réponse\"\r\n                                                        type=\"text\"\r\n                                                        disabled={gameState !== GAME_STATE.PLAYING}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <button\r\n                                                type=\"submit\"\r\n                                                disabled={gameState !== GAME_STATE.PLAYING}\r\n                                                className={gameState === GAME_STATE.SHOW_ANSWER || gameState === GAME_STATE.PAUSED ? \"hidden\" : \"cursor-pointer bg-[var(--white)] mx-auto shadow-md mt-4 text-[var(--accent)] duration-200 hover:text-[var(--accent-lighter)] font-bold uppercase rounded px-4 py-2 active:shadow-[none] active:bg-gray-50\"}\r\n                                            >\r\n                                                Confirmer\r\n                                            </button>\r\n                                        </form>\r\n                                    </>\r\n                                )}\r\n\r\n                                {(gameState === GAME_STATE.GAME_OVER || gameState === GAME_STATE.SHOW_ANSWER) && (\r\n                                    <div className=\"mt-4 mx-auto\">\r\n                                        <Track track={songs[currentSong]} />\r\n                                    </div>\r\n                                )}\r\n\r\n                                {gameState === GAME_STATE.GAME_OVER && (\r\n                                    <>\r\n                                        <div className=\"flex justify-center items-center mb-4\">\r\n                                            <p className={answerMessageColor}>{answerMessage}</p>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex gap-4 items-start\">\r\n                                            <div className=\"flex flex-col gap-0\">\r\n                                                <label htmlFor=\"musicTitle\">Titre de la musique :</label>\r\n                                                <input name=\"musicTitle\" value={answers[currentSong].title}\r\n                                                    className={titleBox}\r\n                                                    placeholder=\"votre réponse\" type=\"text\"\r\n                                                    disabled={gameState !== GAME_STATE.PLAYING} />\r\n                                            </div>\r\n\r\n                                            <div className=\"flex flex-col gap-0\">\r\n                                                <label htmlFor=\"artistName\">Nom de l'artiste :</label>\r\n                                                <input name=\"artistName\" value={answers[currentSong].artist}\r\n                                                    className={artistBox}\r\n                                                    placeholder=\"votre réponse\" type=\"text\"\r\n                                                    disabled={gameState !== GAME_STATE.PLAYING} />\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex flex-wrap gap-2\">\r\n                                            <button onClick={prevSong}\r\n                                                className=\"bg-[var(--white)] text-black rounded px-4 py-2\">Musique\r\n                                                précédante\r\n                                            </button>\r\n                                            <button onClick={nextSong}\r\n                                                className=\"bg-[var(--white)] text-black rounded px-4 py-2\">Musique suivante\r\n                                            </button>\r\n                                        </div>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                    {players && Object.keys(players).length > 0 &&\r\n                        (\r\n                            <div className=\"mt-4\">\r\n                                <h3>Joueurs:</h3>\r\n                                {Object.entries(players).map(([id, player]) => (\r\n                                    <div key={id}>\r\n                                        <p>{player.pseudo} (Score : {player.score})</p>\r\n                                        {player.answered && (\r\n                                            <p className=\"text-green-500\">A repondu !</p>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                </main>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nasync function fetchTracks(mode = \"genre\", q = \"0\", limit = 25, minRank = 0, maxRank = 1000000) {\r\n    const res = await fetch(\r\n        `/api/tracks?mode=${mode}&q=${encodeURIComponent(q)}&limit=${limit}&minRank=${minRank}&maxRank=${maxRank}`\r\n    );\r\n    if (!res.ok) throw new Error(`Erreur HTTP ${res.status}`);\r\n    const data = await res.json();\r\n    return data;\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}